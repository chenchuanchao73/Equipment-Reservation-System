2025-05-08 13:38:19 - Will watch for changes in these directories: ['D:\\equipment-reservation-system']
2025-05-08 13:38:19 - Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
2025-05-08 13:38:19 - Started reloader process [28852] using StatReload
2025-05-08 13:38:20 - 国际化设置成功
2025-05-08 13:38:20 - Started server process [12688]
2025-05-08 13:38:20 - Waiting for application startup.
2025-05-08 13:38:20 - 应用启动 / Application started
2025-05-08 13:38:20 - 数据库初始化成功
2025-05-08 13:38:20 - 执行预约状态更新任务
2025-05-08 13:38:20 - 当前时间: 2025-05-08 13:38:20.792916
2025-05-08 13:38:20 - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=13, 分=38, 秒=20
2025-05-08 13:38:20 - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 13:38:20 - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 13:38:20.792916 AND Reservation.end_datetime > 2025-05-08 13:38:20.792916
2025-05-08 13:38:20 - 找到 0 个应该更新为'使用中'的预约
2025-05-08 13:38:20 - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 13:38:20 - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 13:38:20.792916
2025-05-08 13:38:20 - 找到 0 个应该更新为'已过期'的预约
2025-05-08 13:38:20 - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 13:38:20 - 没有预约需要更新状态
2025-05-08 13:38:20 - Application startup complete.
2025-05-08 13:38:22 - 127.0.0.1:14429 - "GET / HTTP/1.1" 200
2025-05-08 13:38:56 - 127.0.0.1:14496 - "GET /api/equipment-categories/all HTTP/1.1" 200
2025-05-08 13:39:19 - 10.6.140.91:7738 - "GET /api/equipment?page=1&limit=20 HTTP/1.1" 307
2025-05-08 13:39:19 - 10.6.140.91:7739 - "GET /api/equipment/categories HTTP/1.1" 200
2025-05-08 13:39:19 - 10.6.140.91:7738 - "GET /api/equipment/?page=1&limit=20 HTTP/1.1" 200
2025-05-08 13:39:20 - 执行预约状态更新任务
2025-05-08 13:39:20 - 当前时间: 2025-05-08 13:39:20.812382
2025-05-08 13:39:20 - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=13, 分=39, 秒=20
2025-05-08 13:39:20 - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 13:39:20 - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 13:39:20.812382 AND Reservation.end_datetime > 2025-05-08 13:39:20.812382
2025-05-08 13:39:20 - 找到 0 个应该更新为'使用中'的预约
2025-05-08 13:39:20 - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 13:39:20 - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 13:39:20.812382
2025-05-08 13:39:20 - 找到 0 个应该更新为'已过期'的预约
2025-05-08 13:39:20 - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 13:39:20 - 没有预约需要更新状态
2025-05-08 13:39:25 - 10.6.140.91:7744 - "GET /api/reservations/calendar?start_date=2025-05-01&end_date=2025-06-01 HTTP/1.1" 200
2025-05-08 13:39:25 - 10.6.140.91:7745 - "GET /api/reservations/calendar?start_date=2025-05-01&end_date=2025-06-01 HTTP/1.1" 200
2025-05-08 13:39:53 - 10.6.140.91:7789 - "GET /api/reservation?limit=1000 HTTP/1.1" 307
2025-05-08 13:39:53 - 10.6.140.91:7788 - "GET /api/equipment-categories/all HTTP/1.1" 200
2025-05-08 13:39:53 - 排序参数: sort_by=None, sort_order=None
2025-05-08 13:39:53 - 10.6.140.91:7789 - "GET /api/reservation/?limit=1000 HTTP/1.1" 200
2025-05-08 13:40:15 - 10.6.140.91:7845 - "GET /api/reservation?limit=1000 HTTP/1.1" 307
2025-05-08 13:40:15 - 10.6.140.91:7844 - "GET /api/equipment-categories/all HTTP/1.1" 200
2025-05-08 13:40:15 - 排序参数: sort_by=None, sort_order=None
2025-05-08 13:40:15 - 10.6.140.91:7845 - "GET /api/reservation/?limit=1000 HTTP/1.1" 200
2025-05-08 13:40:20 - 执行预约状态更新任务
2025-05-08 13:40:20 - 当前时间: 2025-05-08 13:40:20.828966
2025-05-08 13:40:20 - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=13, 分=40, 秒=20
2025-05-08 13:40:20 - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 13:40:20 - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 13:40:20.828966 AND Reservation.end_datetime > 2025-05-08 13:40:20.828966
2025-05-08 13:40:20 - 找到 0 个应该更新为'使用中'的预约
2025-05-08 13:40:20 - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 13:40:20 - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 13:40:20.828966
2025-05-08 13:40:20 - 找到 0 个应该更新为'已过期'的预约
2025-05-08 13:40:20 - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 13:40:20 - 没有预约需要更新状态
2025-05-08 13:40:32 - Will watch for changes in these directories: ['D:\\equipment-reservation-system']
2025-05-08 13:40:32 - Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
2025-05-08 13:40:32 - Started reloader process [17156] using StatReload
2025-05-08 13:40:32 - 国际化设置成功
2025-05-08 13:40:33 - Started server process [27592]
2025-05-08 13:40:33 - Waiting for application startup.
2025-05-08 13:40:33 - 应用启动 / Application started
2025-05-08 13:40:33 - 数据库初始化成功
2025-05-08 13:40:33 - 执行预约状态更新任务
2025-05-08 13:40:33 - 当前时间: 2025-05-08 13:40:33.345696
2025-05-08 13:40:33 - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=13, 分=40, 秒=33
2025-05-08 13:40:33 - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 13:40:33 - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 13:40:33.345696 AND Reservation.end_datetime > 2025-05-08 13:40:33.345696
2025-05-08 13:40:33 - 找到 0 个应该更新为'使用中'的预约
2025-05-08 13:40:33 - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 13:40:33 - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 13:40:33.345696
2025-05-08 13:40:33 - 找到 0 个应该更新为'已过期'的预约
2025-05-08 13:40:33 - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 13:40:33 - 没有预约需要更新状态
2025-05-08 13:40:33 - Application startup complete.
2025-05-08 13:40:35 - 127.0.0.1:14751 - "GET / HTTP/1.1" 200
2025-05-08 13:40:35 - 127.0.0.1:14751 - "GET /favicon.ico HTTP/1.1" 404
2025-05-08 13:40:42 - 10.6.140.91:7882 - "OPTIONS /api/statistics/dashboard HTTP/1.1" 200
2025-05-08 13:40:42 - 10.6.140.91:7883 - "GET /api/statistics/dashboard HTTP/1.1" 401
2025-05-08 13:40:42 - 10.6.140.91:7883 - "GET /api/health HTTP/1.1" 200
2025-05-08 13:40:50 - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "D:\Python Projects\.venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-05-08 13:40:50 - 10.6.140.91:7892 - "POST /api/admin/login HTTP/1.1" 200
2025-05-08 13:40:50 - 10.6.140.91:7892 - "GET /api/statistics/dashboard HTTP/1.1" 200
2025-05-08 13:41:33 - 执行预约状态更新任务
2025-05-08 13:41:33 - 当前时间: 2025-05-08 13:41:33.375264
2025-05-08 13:41:33 - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=13, 分=41, 秒=33
2025-05-08 13:41:33 - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 13:41:33 - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 13:41:33.375264 AND Reservation.end_datetime > 2025-05-08 13:41:33.375264
2025-05-08 13:41:33 - 找到 0 个应该更新为'使用中'的预约
2025-05-08 13:41:33 - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 13:41:33 - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 13:41:33.375264
2025-05-08 13:41:33 - 找到 0 个应该更新为'已过期'的预约
2025-05-08 13:41:33 - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 13:41:33 - 没有预约需要更新状态
2025-05-08 13:41:53 - 10.6.140.91:7983 - "OPTIONS /api/reservation?skip=0&limit=10&_t=1746682913769&sort_by=id&sort_order=desc HTTP/1.1" 200
2025-05-08 13:41:53 - 10.6.140.91:7984 - "OPTIONS /api/reservation?skip=0&limit=10&_t=1746682913786&sort_by=id&sort_order=desc HTTP/1.1" 200
2025-05-08 13:41:53 - 10.6.140.91:7985 - "GET /api/reservation?skip=0&limit=10&_t=1746682913769&sort_by=id&sort_order=desc HTTP/1.1" 307
2025-05-08 13:41:53 - 10.6.140.91:7986 - "GET /api/reservation?skip=0&limit=10&_t=1746682913786&sort_by=id&sort_order=desc HTTP/1.1" 307
2025-05-08 13:41:53 - 10.6.140.91:7986 - "OPTIONS /api/reservation/?skip=0&limit=10&_t=1746682913769&sort_by=id&sort_order=desc HTTP/1.1" 200
2025-05-08 13:41:53 - 10.6.140.91:7985 - "OPTIONS /api/reservation/?skip=0&limit=10&_t=1746682913786&sort_by=id&sort_order=desc HTTP/1.1" 200
2025-05-08 13:41:53 - 排序参数: sort_by=id, sort_order=desc
2025-05-08 13:41:53 - 排序参数: sort_by=id, sort_order=desc
2025-05-08 13:41:53 - 10.6.140.91:7988 - "GET /api/reservation/?skip=0&limit=10&_t=1746682913786&sort_by=id&sort_order=desc HTTP/1.1" 200
2025-05-08 13:41:53 - 10.6.140.91:7987 - "GET /api/reservation/?skip=0&limit=10&_t=1746682913769&sort_by=id&sort_order=desc HTTP/1.1" 200
2025-05-08 13:42:30 - 10.6.140.91:8042 - "OPTIONS /api/reservation?skip=10&limit=10&_t=1746682950283&sort_by=id&sort_order=desc HTTP/1.1" 200
2025-05-08 13:42:30 - 10.6.140.91:8043 - "GET /api/reservation?skip=10&limit=10&_t=1746682950283&sort_by=id&sort_order=desc HTTP/1.1" 307
2025-05-08 13:42:30 - 10.6.140.91:8043 - "OPTIONS /api/reservation/?skip=10&limit=10&_t=1746682950283&sort_by=id&sort_order=desc HTTP/1.1" 200
2025-05-08 13:42:30 - 排序参数: sort_by=id, sort_order=desc
2025-05-08 13:42:30 - 10.6.140.91:8044 - "GET /api/reservation/?skip=10&limit=10&_t=1746682950283&sort_by=id&sort_order=desc HTTP/1.1" 200
2025-05-08 13:42:32 - 10.6.140.91:8044 - "OPTIONS /api/reservation?skip=20&limit=10&_t=1746682952142&sort_by=id&sort_order=desc HTTP/1.1" 200
2025-05-08 13:42:32 - 10.6.140.91:8047 - "GET /api/reservation?skip=20&limit=10&_t=1746682952142&sort_by=id&sort_order=desc HTTP/1.1" 307
2025-05-08 13:42:32 - 10.6.140.91:8047 - "OPTIONS /api/reservation/?skip=20&limit=10&_t=1746682952142&sort_by=id&sort_order=desc HTTP/1.1" 200
2025-05-08 13:42:32 - 排序参数: sort_by=id, sort_order=desc
2025-05-08 13:42:32 - 10.6.140.91:8048 - "GET /api/reservation/?skip=20&limit=10&_t=1746682952142&sort_by=id&sort_order=desc HTTP/1.1" 200
2025-05-08 13:42:33 - 执行预约状态更新任务
2025-05-08 13:42:33 - 当前时间: 2025-05-08 13:42:33.378921
2025-05-08 13:42:33 - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=13, 分=42, 秒=33
2025-05-08 13:42:33 - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 13:42:33 - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 13:42:33.378921 AND Reservation.end_datetime > 2025-05-08 13:42:33.378921
2025-05-08 13:42:33 - 找到 0 个应该更新为'使用中'的预约
2025-05-08 13:42:33 - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 13:42:33 - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 13:42:33.378921
2025-05-08 13:42:33 - 找到 0 个应该更新为'已过期'的预约
2025-05-08 13:42:33 - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 13:42:33 - 没有预约需要更新状态
2025-05-08 13:43:06 - 10.6.140.91:8092 - "OPTIONS /api/reservation?skip=20&limit=10&_t=1746682986514&sort_by=id&sort_order=desc HTTP/1.1" 200
2025-05-08 13:43:06 - 10.6.140.91:8093 - "GET /api/reservation?skip=20&limit=10&_t=1746682986514&sort_by=id&sort_order=desc HTTP/1.1" 307
2025-05-08 13:43:06 - 10.6.140.91:8093 - "OPTIONS /api/reservation/?skip=20&limit=10&_t=1746682986514&sort_by=id&sort_order=desc HTTP/1.1" 200
2025-05-08 13:43:06 - 排序参数: sort_by=id, sort_order=desc
2025-05-08 13:43:06 - 10.6.140.91:8094 - "GET /api/reservation/?skip=20&limit=10&_t=1746682986514&sort_by=id&sort_order=desc HTTP/1.1" 200
2025-05-08 13:43:33 - 执行预约状态更新任务
2025-05-08 13:43:33 - 当前时间: 2025-05-08 13:43:33.396104
2025-05-08 13:43:33 - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=13, 分=43, 秒=33
2025-05-08 13:43:33 - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 13:43:33 - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 13:43:33.396104 AND Reservation.end_datetime > 2025-05-08 13:43:33.396104
2025-05-08 13:43:33 - 找到 0 个应该更新为'使用中'的预约
2025-05-08 13:43:33 - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 13:43:33 - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 13:43:33.396104
2025-05-08 13:43:33 - 找到 0 个应该更新为'已过期'的预约
2025-05-08 13:43:33 - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 13:43:33 - 没有预约需要更新状态
2025-05-08 13:44:33 - 执行预约状态更新任务
2025-05-08 13:44:33 - 当前时间: 2025-05-08 13:44:33.412212
2025-05-08 13:44:33 - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=13, 分=44, 秒=33
2025-05-08 13:44:33 - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 13:44:33 - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 13:44:33.412212 AND Reservation.end_datetime > 2025-05-08 13:44:33.412212
2025-05-08 13:44:33 - 找到 0 个应该更新为'使用中'的预约
2025-05-08 13:44:33 - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 13:44:33 - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 13:44:33.412212
2025-05-08 13:44:33 - 找到 0 个应该更新为'已过期'的预约
2025-05-08 13:44:33 - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 13:44:33 - 没有预约需要更新状态
2025-05-08 13:45:33 - 执行预约状态更新任务
2025-05-08 13:45:33 - 当前时间: 2025-05-08 13:45:33.416435
2025-05-08 13:45:33 - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=13, 分=45, 秒=33
2025-05-08 13:45:33 - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 13:45:33 - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 13:45:33.416435 AND Reservation.end_datetime > 2025-05-08 13:45:33.416435
2025-05-08 13:45:33 - 找到 0 个应该更新为'使用中'的预约
2025-05-08 13:45:33 - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 13:45:33 - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 13:45:33.416435
2025-05-08 13:45:33 - 找到 0 个应该更新为'已过期'的预约
2025-05-08 13:45:33 - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 13:45:33 - 没有预约需要更新状态
2025-05-08 13:46:33 - 执行预约状态更新任务
2025-05-08 13:46:33 - 当前时间: 2025-05-08 13:46:33.424631
2025-05-08 13:46:33 - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=13, 分=46, 秒=33
2025-05-08 13:46:33 - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 13:46:33 - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 13:46:33.424631 AND Reservation.end_datetime > 2025-05-08 13:46:33.424631
2025-05-08 13:46:33 - 找到 0 个应该更新为'使用中'的预约
2025-05-08 13:46:33 - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 13:46:33 - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 13:46:33.424631
2025-05-08 13:46:33 - 找到 0 个应该更新为'已过期'的预约
2025-05-08 13:46:33 - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 13:46:33 - 没有预约需要更新状态
2025-05-08 13:47:11 - 10.6.140.91:8435 - "OPTIONS /api/reservation?skip=0&limit=10&_t=1746683231233&sort_by=id&sort_order=desc HTTP/1.1" 200
2025-05-08 13:47:11 - 10.6.140.91:8434 - "OPTIONS /api/reservation?skip=0&limit=10&_t=1746683231252&sort_by=id&sort_order=desc HTTP/1.1" 200
2025-05-08 13:47:11 - 10.6.140.91:8436 - "GET /api/reservation?skip=0&limit=10&_t=1746683231233&sort_by=id&sort_order=desc HTTP/1.1" 307
2025-05-08 13:47:11 - 10.6.140.91:8437 - "GET /api/reservation?skip=0&limit=10&_t=1746683231252&sort_by=id&sort_order=desc HTTP/1.1" 307
2025-05-08 13:47:11 - 10.6.140.91:8437 - "OPTIONS /api/reservation/?skip=0&limit=10&_t=1746683231233&sort_by=id&sort_order=desc HTTP/1.1" 200
2025-05-08 13:47:11 - 10.6.140.91:8436 - "OPTIONS /api/reservation/?skip=0&limit=10&_t=1746683231252&sort_by=id&sort_order=desc HTTP/1.1" 200
2025-05-08 13:47:11 - 排序参数: sort_by=id, sort_order=desc
2025-05-08 13:47:11 - 10.6.140.91:8438 - "GET /api/reservation/?skip=0&limit=10&_t=1746683231233&sort_by=id&sort_order=desc HTTP/1.1" 200
2025-05-08 13:47:11 - 排序参数: sort_by=id, sort_order=desc
2025-05-08 13:47:11 - 10.6.140.91:8439 - "GET /api/reservation/?skip=0&limit=10&_t=1746683231252&sort_by=id&sort_order=desc HTTP/1.1" 200
2025-05-08 13:47:26 - 10.6.140.91:8461 - "OPTIONS /api/reservation?skip=0&limit=10&_t=1746683246012&sort_by=id&sort_order=desc HTTP/1.1" 200
2025-05-08 13:47:26 - 10.6.140.91:8460 - "OPTIONS /api/reservation?skip=0&limit=10&_t=1746683245987&sort_by=id&sort_order=desc HTTP/1.1" 200
2025-05-08 13:47:26 - 10.6.140.91:8465 - "GET /api/reservation?skip=0&limit=10&_t=1746683245987&sort_by=id&sort_order=desc HTTP/1.1" 307
2025-05-08 13:47:26 - 10.6.140.91:8464 - "GET /api/reservation?skip=0&limit=10&_t=1746683246012&sort_by=id&sort_order=desc HTTP/1.1" 307
2025-05-08 13:47:26 - 10.6.140.91:8465 - "OPTIONS /api/reservation/?skip=0&limit=10&_t=1746683246012&sort_by=id&sort_order=desc HTTP/1.1" 200
2025-05-08 13:47:26 - 10.6.140.91:8464 - "OPTIONS /api/reservation/?skip=0&limit=10&_t=1746683245987&sort_by=id&sort_order=desc HTTP/1.1" 200
2025-05-08 13:47:26 - 排序参数: sort_by=id, sort_order=desc
2025-05-08 13:47:26 - 排序参数: sort_by=id, sort_order=desc
2025-05-08 13:47:26 - 10.6.140.91:8466 - "GET /api/reservation/?skip=0&limit=10&_t=1746683245987&sort_by=id&sort_order=desc HTTP/1.1" 200
2025-05-08 13:47:26 - 10.6.140.91:8467 - "GET /api/reservation/?skip=0&limit=10&_t=1746683246012&sort_by=id&sort_order=desc HTTP/1.1" 200
2025-05-08 13:47:33 - 执行预约状态更新任务
2025-05-08 13:47:33 - 当前时间: 2025-05-08 13:47:33.430127
2025-05-08 13:47:33 - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=13, 分=47, 秒=33
2025-05-08 13:47:33 - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 13:47:33 - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 13:47:33.430127 AND Reservation.end_datetime > 2025-05-08 13:47:33.430127
2025-05-08 13:47:33 - 找到 0 个应该更新为'使用中'的预约
2025-05-08 13:47:33 - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 13:47:33 - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 13:47:33.430127
2025-05-08 13:47:33 - 找到 0 个应该更新为'已过期'的预约
2025-05-08 13:47:33 - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 13:47:33 - 没有预约需要更新状态
2025-05-08 13:47:43 - 10.6.140.91:8494 - "OPTIONS /api/reservation?skip=0&limit=10&_t=1746683263770&sort_by=id&sort_order=desc HTTP/1.1" 200
2025-05-08 13:47:43 - 10.6.140.91:8495 - "OPTIONS /api/reservation?skip=0&limit=10&_t=1746683263797&sort_by=id&sort_order=desc HTTP/1.1" 200
2025-05-08 13:47:43 - 10.6.140.91:8496 - "GET /api/reservation?skip=0&limit=10&_t=1746683263770&sort_by=id&sort_order=desc HTTP/1.1" 307
2025-05-08 13:47:43 - 10.6.140.91:8497 - "GET /api/reservation?skip=0&limit=10&_t=1746683263797&sort_by=id&sort_order=desc HTTP/1.1" 307
2025-05-08 13:47:43 - 10.6.140.91:8497 - "OPTIONS /api/reservation/?skip=0&limit=10&_t=1746683263770&sort_by=id&sort_order=desc HTTP/1.1" 200
2025-05-08 13:47:43 - 10.6.140.91:8496 - "OPTIONS /api/reservation/?skip=0&limit=10&_t=1746683263797&sort_by=id&sort_order=desc HTTP/1.1" 200
2025-05-08 13:47:43 - 排序参数: sort_by=id, sort_order=desc
2025-05-08 13:47:43 - 10.6.140.91:8498 - "GET /api/reservation/?skip=0&limit=10&_t=1746683263770&sort_by=id&sort_order=desc HTTP/1.1" 200
2025-05-08 13:47:43 - 排序参数: sort_by=id, sort_order=desc
2025-05-08 13:47:43 - 10.6.140.91:8499 - "GET /api/reservation/?skip=0&limit=10&_t=1746683263797&sort_by=id&sort_order=desc HTTP/1.1" 200
2025-05-08 13:48:14 - 10.6.140.91:8544 - "OPTIONS /api/reservation?skip=0&limit=10&_t=1746683294838&sort_by=id&sort_order=desc HTTP/1.1" 200
2025-05-08 13:48:14 - 10.6.140.91:8543 - "OPTIONS /api/reservation?skip=0&limit=10&_t=1746683294825&sort_by=id&sort_order=desc HTTP/1.1" 200
2025-05-08 13:48:14 - 10.6.140.91:8546 - "GET /api/reservation?skip=0&limit=10&_t=1746683294838&sort_by=id&sort_order=desc HTTP/1.1" 307
2025-05-08 13:48:14 - 10.6.140.91:8545 - "GET /api/reservation?skip=0&limit=10&_t=1746683294825&sort_by=id&sort_order=desc HTTP/1.1" 307
2025-05-08 13:48:14 - 10.6.140.91:8546 - "OPTIONS /api/reservation/?skip=0&limit=10&_t=1746683294838&sort_by=id&sort_order=desc HTTP/1.1" 200
2025-05-08 13:48:14 - 排序参数: sort_by=id, sort_order=desc
2025-05-08 13:48:14 - 10.6.140.91:8545 - "GET /api/reservation/?skip=0&limit=10&_t=1746683294838&sort_by=id&sort_order=desc HTTP/1.1" 200
2025-05-08 13:48:14 - 10.6.140.91:8547 - "OPTIONS /api/reservation/?skip=0&limit=10&_t=1746683294825&sort_by=id&sort_order=desc HTTP/1.1" 200
2025-05-08 13:48:14 - 排序参数: sort_by=id, sort_order=desc
2025-05-08 13:48:14 - 10.6.140.91:8545 - "GET /api/reservation/?skip=0&limit=10&_t=1746683294825&sort_by=id&sort_order=desc HTTP/1.1" 200
2025-05-08 13:48:21 - 10.6.140.91:8555 - "GET /api/statistics/dashboard HTTP/1.1" 200
2025-05-08 13:48:25 - 10.6.140.91:8555 - "GET /api/statistics/dashboard HTTP/1.1" 200
2025-05-08 13:48:32 - 10.6.140.91:8565 - "OPTIONS /api/reservation?skip=0&limit=10&_t=1746683312034&sort_by=id&sort_order=desc HTTP/1.1" 200
2025-05-08 13:48:32 - 10.6.140.91:8566 - "GET /api/reservation?skip=0&limit=10&_t=1746683312034&sort_by=id&sort_order=desc HTTP/1.1" 307
2025-05-08 13:48:32 - 10.6.140.91:8566 - "OPTIONS /api/reservation/?skip=0&limit=10&_t=1746683312034&sort_by=id&sort_order=desc HTTP/1.1" 200
2025-05-08 13:48:32 - 排序参数: sort_by=id, sort_order=desc
2025-05-08 13:48:32 - 10.6.140.91:8567 - "GET /api/reservation/?skip=0&limit=10&_t=1746683312034&sort_by=id&sort_order=desc HTTP/1.1" 200
2025-05-08 13:48:33 - 执行预约状态更新任务
2025-05-08 13:48:33 - 当前时间: 2025-05-08 13:48:33.433155
2025-05-08 13:48:33 - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=13, 分=48, 秒=33
2025-05-08 13:48:33 - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 13:48:33 - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 13:48:33.433155 AND Reservation.end_datetime > 2025-05-08 13:48:33.433155
2025-05-08 13:48:33 - 找到 0 个应该更新为'使用中'的预约
2025-05-08 13:48:33 - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 13:48:33 - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 13:48:33.433155
2025-05-08 13:48:33 - 找到 0 个应该更新为'已过期'的预约
2025-05-08 13:48:33 - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 13:48:33 - 没有预约需要更新状态
2025-05-08 13:48:35 - 10.6.140.91:8567 - "OPTIONS /api/equipment-categories/all HTTP/1.1" 200
2025-05-08 13:48:35 - 10.6.140.91:8571 - "OPTIONS /api/reservation?limit=1000 HTTP/1.1" 200
2025-05-08 13:48:35 - 10.6.140.91:8572 - "GET /api/equipment-categories/all HTTP/1.1" 200
2025-05-08 13:48:35 - 10.6.140.91:8573 - "GET /api/reservation?limit=1000 HTTP/1.1" 307
2025-05-08 13:48:35 - 10.6.140.91:8573 - "OPTIONS /api/reservation/?limit=1000 HTTP/1.1" 200
2025-05-08 13:48:35 - 排序参数: sort_by=None, sort_order=None
2025-05-08 13:48:35 - 10.6.140.91:8574 - "GET /api/reservation/?limit=1000 HTTP/1.1" 200
2025-05-08 13:49:04 - 10.6.140.91:8614 - "GET /api/reservation?limit=1000 HTTP/1.1" 307
2025-05-08 13:49:04 - 10.6.140.91:8613 - "GET /api/equipment-categories/all HTTP/1.1" 200
2025-05-08 13:49:04 - 排序参数: sort_by=None, sort_order=None
2025-05-08 13:49:04 - 10.6.140.91:8614 - "GET /api/reservation/?limit=1000 HTTP/1.1" 200
2025-05-08 13:49:19 - 10.6.140.91:8643 - "GET /api/equipment-categories/all HTTP/1.1" 200
2025-05-08 13:49:19 - 10.6.140.91:8642 - "GET /api/reservation?limit=1000 HTTP/1.1" 307
2025-05-08 13:49:19 - 排序参数: sort_by=None, sort_order=None
2025-05-08 13:49:19 - 10.6.140.91:8642 - "GET /api/reservation/?limit=1000 HTTP/1.1" 200
2025-05-08 13:49:23 - 10.6.140.91:8643 - "GET /api/reservation?limit=1000 HTTP/1.1" 307
2025-05-08 13:49:23 - 10.6.140.91:8642 - "GET /api/equipment-categories/all HTTP/1.1" 200
2025-05-08 13:49:23 - 排序参数: sort_by=None, sort_order=None
2025-05-08 13:49:23 - 10.6.140.91:8643 - "GET /api/reservation/?limit=1000 HTTP/1.1" 200
2025-05-08 13:49:26 - 10.6.140.91:8642 - "GET /api/reservation?limit=1000 HTTP/1.1" 307
2025-05-08 13:49:26 - 10.6.140.91:8643 - "GET /api/equipment-categories/all HTTP/1.1" 200
2025-05-08 13:49:26 - 排序参数: sort_by=None, sort_order=None
2025-05-08 13:49:26 - 10.6.140.91:8642 - "GET /api/reservation/?limit=1000 HTTP/1.1" 200
2025-05-08 13:49:31 - 10.6.140.91:8654 - "GET /api/reservation?limit=1000 HTTP/1.1" 307
2025-05-08 13:49:31 - 10.6.140.91:8653 - "GET /api/equipment-categories/all HTTP/1.1" 200
2025-05-08 13:49:31 - 排序参数: sort_by=None, sort_order=None
2025-05-08 13:49:31 - 10.6.140.91:8654 - "GET /api/reservation/?limit=1000 HTTP/1.1" 200
2025-05-08 13:49:33 - 执行预约状态更新任务
2025-05-08 13:49:33 - 当前时间: 2025-05-08 13:49:33.450247
2025-05-08 13:49:33 - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=13, 分=49, 秒=33
2025-05-08 13:49:33 - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 13:49:33 - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 13:49:33.450247 AND Reservation.end_datetime > 2025-05-08 13:49:33.450247
2025-05-08 13:49:33 - 找到 0 个应该更新为'使用中'的预约
2025-05-08 13:49:33 - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 13:49:33 - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 13:49:33.450247
2025-05-08 13:49:33 - 找到 0 个应该更新为'已过期'的预约
2025-05-08 13:49:33 - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 13:49:33 - 没有预约需要更新状态
2025-05-08 13:50:33 - 执行预约状态更新任务
2025-05-08 13:50:33 - 当前时间: 2025-05-08 13:50:33.461837
2025-05-08 13:50:33 - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=13, 分=50, 秒=33
2025-05-08 13:50:33 - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 13:50:33 - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 13:50:33.461837 AND Reservation.end_datetime > 2025-05-08 13:50:33.461837
2025-05-08 13:50:33 - 找到 0 个应该更新为'使用中'的预约
2025-05-08 13:50:33 - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 13:50:33 - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 13:50:33.461837
2025-05-08 13:50:33 - 找到 0 个应该更新为'已过期'的预约
2025-05-08 13:50:33 - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 13:50:33 - 没有预约需要更新状态
2025-05-08 13:51:33 - 执行预约状态更新任务
2025-05-08 13:51:33 - 当前时间: 2025-05-08 13:51:33.465255
2025-05-08 13:51:33 - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=13, 分=51, 秒=33
2025-05-08 13:51:33 - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 13:51:33 - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 13:51:33.465255 AND Reservation.end_datetime > 2025-05-08 13:51:33.465255
2025-05-08 13:51:33 - 找到 0 个应该更新为'使用中'的预约
2025-05-08 13:51:33 - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 13:51:33 - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 13:51:33.465255
2025-05-08 13:51:33 - 找到 0 个应该更新为'已过期'的预约
2025-05-08 13:51:33 - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 13:51:33 - 没有预约需要更新状态
2025-05-08 13:52:33 - 执行预约状态更新任务
2025-05-08 13:52:33 - 当前时间: 2025-05-08 13:52:33.484623
2025-05-08 13:52:33 - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=13, 分=52, 秒=33
2025-05-08 13:52:33 - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 13:52:33 - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 13:52:33.484623 AND Reservation.end_datetime > 2025-05-08 13:52:33.484623
2025-05-08 13:52:33 - 找到 0 个应该更新为'使用中'的预约
2025-05-08 13:52:33 - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 13:52:33 - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 13:52:33.484623
2025-05-08 13:52:33 - 找到 0 个应该更新为'已过期'的预约
2025-05-08 13:52:33 - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 13:52:33 - 没有预约需要更新状态
2025-05-08 13:52:38 - StatReload detected changes in 'start.py'. Reloading...
2025-05-08 13:52:38 - Shutting down
2025-05-08 13:52:38 - Waiting for application shutdown.
2025-05-08 13:52:38 - 状态更新任务已取消
2025-05-08 13:52:38 - 应用关闭 / Application shut down
2025-05-08 13:52:38 - Application shutdown complete.
2025-05-08 13:52:38 - Finished server process [27592]
2025-05-08 13:52:39 - 国际化设置成功
2025-05-08 13:52:39 - Started server process [8696]
2025-05-08 13:52:39 - Waiting for application startup.
2025-05-08 13:52:39 - 应用启动 / Application started
2025-05-08 13:52:39 - 数据库初始化成功
2025-05-08 13:52:39 - 执行预约状态更新任务
2025-05-08 13:52:39 - 当前时间: 2025-05-08 13:52:39.832020
2025-05-08 13:52:39 - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=13, 分=52, 秒=39
2025-05-08 13:52:39 - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 13:52:39 - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 13:52:39.832020 AND Reservation.end_datetime > 2025-05-08 13:52:39.832020
2025-05-08 13:52:39 - 找到 0 个应该更新为'使用中'的预约
2025-05-08 13:52:39 - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 13:52:39 - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 13:52:39.832020
2025-05-08 13:52:39 - 找到 0 个应该更新为'已过期'的预约
2025-05-08 13:52:39 - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 13:52:39 - 没有预约需要更新状态
2025-05-08 13:52:39 - Application startup complete.
2025-05-08 13:53:39 - 执行预约状态更新任务
2025-05-08 13:53:39 - 当前时间: 2025-05-08 13:53:39.860646
2025-05-08 13:53:39 - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=13, 分=53, 秒=39
2025-05-08 13:53:39 - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 13:53:39 - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 13:53:39.860646 AND Reservation.end_datetime > 2025-05-08 13:53:39.860646
2025-05-08 13:53:39 - 找到 0 个应该更新为'使用中'的预约
2025-05-08 13:53:39 - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 13:53:39 - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 13:53:39.860646
2025-05-08 13:53:39 - 找到 0 个应该更新为'已过期'的预约
2025-05-08 13:53:39 - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 13:53:39 - 没有预约需要更新状态
2025-05-08 13:54:39 - 执行预约状态更新任务
2025-05-08 13:54:39 - 当前时间: 2025-05-08 13:54:39.867772
2025-05-08 13:54:39 - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=13, 分=54, 秒=39
2025-05-08 13:54:39 - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 13:54:39 - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 13:54:39.867772 AND Reservation.end_datetime > 2025-05-08 13:54:39.867772
2025-05-08 13:54:39 - 找到 0 个应该更新为'使用中'的预约
2025-05-08 13:54:39 - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 13:54:39 - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 13:54:39.867772
2025-05-08 13:54:39 - 找到 0 个应该更新为'已过期'的预约
2025-05-08 13:54:39 - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 13:54:39 - 没有预约需要更新状态
2025-05-08 13:55:07 - StatReload detected changes in 'start.py'. Reloading...
2025-05-08 13:55:07 - Shutting down
2025-05-08 13:55:07 - Waiting for application shutdown.
2025-05-08 13:55:07 - 状态更新任务已取消
2025-05-08 13:55:07 - 应用关闭 / Application shut down
2025-05-08 13:55:07 - Application shutdown complete.
2025-05-08 13:55:07 - Finished server process [8696]
2025-05-08 13:55:08 - 国际化设置成功
2025-05-08 13:55:08 - Started server process [26728]
2025-05-08 13:55:08 - Waiting for application startup.
2025-05-08 13:55:08 - 应用启动 / Application started
2025-05-08 13:55:08 - 数据库初始化成功
2025-05-08 13:55:08 - 执行预约状态更新任务
2025-05-08 13:55:08 - 当前时间: 2025-05-08 13:55:08.896250
2025-05-08 13:55:08 - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=13, 分=55, 秒=8
2025-05-08 13:55:08 - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 13:55:08 - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 13:55:08.896250 AND Reservation.end_datetime > 2025-05-08 13:55:08.896250
2025-05-08 13:55:08 - 找到 0 个应该更新为'使用中'的预约
2025-05-08 13:55:08 - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 13:55:08 - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 13:55:08.896250
2025-05-08 13:55:08 - 找到 0 个应该更新为'已过期'的预约
2025-05-08 13:55:08 - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 13:55:08 - 没有预约需要更新状态
2025-05-08 13:55:08 - Application startup complete.
2025-05-08 13:55:23 - StatReload detected changes in 'backend\main.py'. Reloading...
2025-05-08 13:55:23 - Shutting down
2025-05-08 13:55:23 - Waiting for application shutdown.
2025-05-08 13:55:23 - 状态更新任务已取消
2025-05-08 13:55:23 - 应用关闭 / Application shut down
2025-05-08 13:55:23 - Application shutdown complete.
2025-05-08 13:55:23 - Finished server process [26728]
2025-05-08 13:55:23 - 国际化设置成功
2025-05-08 13:55:23 - backend.i18n - INFO - 国际化设置成功
2025-05-08 13:55:24 - Started server process [15792]
2025-05-08 13:55:24 - Waiting for application startup.
2025-05-08 13:55:24 - 应用启动 / Application started
2025-05-08 13:55:24 - backend.main - INFO - 应用启动 / Application started
2025-05-08 13:55:24 - 数据库初始化成功
2025-05-08 13:55:24 - backend.database - INFO - 数据库初始化成功
2025-05-08 13:55:24 - 执行预约状态更新任务
2025-05-08 13:55:24 - backend.main - INFO - 执行预约状态更新任务
2025-05-08 13:55:24 - 当前时间: 2025-05-08 13:55:24.369875
2025-05-08 13:55:24 - backend.utils.status_updater - INFO - 当前时间: 2025-05-08 13:55:24.369875
2025-05-08 13:55:24 - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=13, 分=55, 秒=24
2025-05-08 13:55:24 - backend.utils.status_updater - INFO - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=13, 分=55, 秒=24
2025-05-08 13:55:24 - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 13:55:24 - backend.utils.status_updater - INFO - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 13:55:24 - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 13:55:24.369875 AND Reservation.end_datetime > 2025-05-08 13:55:24.369875
2025-05-08 13:55:24 - backend.utils.status_updater - INFO - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 13:55:24.369875 AND Reservation.end_datetime > 2025-05-08 13:55:24.369875
2025-05-08 13:55:24 - 找到 0 个应该更新为'使用中'的预约
2025-05-08 13:55:24 - backend.utils.status_updater - INFO - 找到 0 个应该更新为'使用中'的预约
2025-05-08 13:55:24 - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 13:55:24 - backend.utils.status_updater - INFO - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 13:55:24 - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 13:55:24.369875
2025-05-08 13:55:24 - backend.utils.status_updater - INFO - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 13:55:24.369875
2025-05-08 13:55:24 - 找到 0 个应该更新为'已过期'的预约
2025-05-08 13:55:24 - backend.utils.status_updater - INFO - 找到 0 个应该更新为'已过期'的预约
2025-05-08 13:55:24 - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 13:55:24 - backend.utils.status_updater - INFO - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 13:55:24 - 没有预约需要更新状态
2025-05-08 13:55:24 - backend.utils.status_updater - INFO - 没有预约需要更新状态
2025-05-08 13:55:24 - Application startup complete.
2025-05-08 13:56:24 - 执行预约状态更新任务
2025-05-08 13:56:24 - backend.main - INFO - 执行预约状态更新任务
2025-05-08 13:56:24 - 当前时间: 2025-05-08 13:56:24.393111
2025-05-08 13:56:24 - backend.utils.status_updater - INFO - 当前时间: 2025-05-08 13:56:24.393111
2025-05-08 13:56:24 - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=13, 分=56, 秒=24
2025-05-08 13:56:24 - backend.utils.status_updater - INFO - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=13, 分=56, 秒=24
2025-05-08 13:56:24 - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 13:56:24 - backend.utils.status_updater - INFO - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 13:56:24 - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 13:56:24.393111 AND Reservation.end_datetime > 2025-05-08 13:56:24.393111
2025-05-08 13:56:24 - backend.utils.status_updater - INFO - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 13:56:24.393111 AND Reservation.end_datetime > 2025-05-08 13:56:24.393111
2025-05-08 13:56:24 - 找到 0 个应该更新为'使用中'的预约
2025-05-08 13:56:24 - backend.utils.status_updater - INFO - 找到 0 个应该更新为'使用中'的预约
2025-05-08 13:56:24 - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 13:56:24 - backend.utils.status_updater - INFO - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 13:56:24 - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 13:56:24.393111
2025-05-08 13:56:24 - backend.utils.status_updater - INFO - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 13:56:24.393111
2025-05-08 13:56:24 - 找到 0 个应该更新为'已过期'的预约
2025-05-08 13:56:24 - backend.utils.status_updater - INFO - 找到 0 个应该更新为'已过期'的预约
2025-05-08 13:56:24 - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 13:56:24 - backend.utils.status_updater - INFO - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 13:56:24 - 没有预约需要更新状态
2025-05-08 13:56:24 - backend.utils.status_updater - INFO - 没有预约需要更新状态
2025-05-08 13:57:24 - 执行预约状态更新任务
2025-05-08 13:57:24 - backend.main - INFO - 执行预约状态更新任务
2025-05-08 13:57:24 - 当前时间: 2025-05-08 13:57:24.410567
2025-05-08 13:57:24 - backend.utils.status_updater - INFO - 当前时间: 2025-05-08 13:57:24.410567
2025-05-08 13:57:24 - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=13, 分=57, 秒=24
2025-05-08 13:57:24 - backend.utils.status_updater - INFO - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=13, 分=57, 秒=24
2025-05-08 13:57:24 - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 13:57:24 - backend.utils.status_updater - INFO - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 13:57:24 - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 13:57:24.410567 AND Reservation.end_datetime > 2025-05-08 13:57:24.410567
2025-05-08 13:57:24 - backend.utils.status_updater - INFO - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 13:57:24.410567 AND Reservation.end_datetime > 2025-05-08 13:57:24.410567
2025-05-08 13:57:24 - 找到 0 个应该更新为'使用中'的预约
2025-05-08 13:57:24 - backend.utils.status_updater - INFO - 找到 0 个应该更新为'使用中'的预约
2025-05-08 13:57:24 - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 13:57:24 - backend.utils.status_updater - INFO - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 13:57:24 - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 13:57:24.410567
2025-05-08 13:57:24 - backend.utils.status_updater - INFO - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 13:57:24.410567
2025-05-08 13:57:24 - 找到 0 个应该更新为'已过期'的预约
2025-05-08 13:57:24 - backend.utils.status_updater - INFO - 找到 0 个应该更新为'已过期'的预约
2025-05-08 13:57:24 - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 13:57:24 - backend.utils.status_updater - INFO - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 13:57:24 - 没有预约需要更新状态
2025-05-08 13:57:24 - backend.utils.status_updater - INFO - 没有预约需要更新状态
2025-05-08 13:58:24 - 执行预约状态更新任务
2025-05-08 13:58:24 - backend.main - INFO - 执行预约状态更新任务
2025-05-08 13:58:24 - 当前时间: 2025-05-08 13:58:24.432345
2025-05-08 13:58:24 - backend.utils.status_updater - INFO - 当前时间: 2025-05-08 13:58:24.432345
2025-05-08 13:58:24 - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=13, 分=58, 秒=24
2025-05-08 13:58:24 - backend.utils.status_updater - INFO - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=13, 分=58, 秒=24
2025-05-08 13:58:24 - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 13:58:24 - backend.utils.status_updater - INFO - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 13:58:24 - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 13:58:24.432345 AND Reservation.end_datetime > 2025-05-08 13:58:24.432345
2025-05-08 13:58:24 - backend.utils.status_updater - INFO - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 13:58:24.432345 AND Reservation.end_datetime > 2025-05-08 13:58:24.432345
2025-05-08 13:58:24 - 找到 0 个应该更新为'使用中'的预约
2025-05-08 13:58:24 - backend.utils.status_updater - INFO - 找到 0 个应该更新为'使用中'的预约
2025-05-08 13:58:24 - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 13:58:24 - backend.utils.status_updater - INFO - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 13:58:24 - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 13:58:24.432345
2025-05-08 13:58:24 - backend.utils.status_updater - INFO - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 13:58:24.432345
2025-05-08 13:58:24 - 找到 0 个应该更新为'已过期'的预约
2025-05-08 13:58:24 - backend.utils.status_updater - INFO - 找到 0 个应该更新为'已过期'的预约
2025-05-08 13:58:24 - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 13:58:24 - backend.utils.status_updater - INFO - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 13:58:24 - 没有预约需要更新状态
2025-05-08 13:58:24 - backend.utils.status_updater - INFO - 没有预约需要更新状态
2025-05-08 13:59:24 - 执行预约状态更新任务
2025-05-08 13:59:24 - backend.main - INFO - 执行预约状态更新任务
2025-05-08 13:59:24 - 当前时间: 2025-05-08 13:59:24.450527
2025-05-08 13:59:24 - backend.utils.status_updater - INFO - 当前时间: 2025-05-08 13:59:24.450527
2025-05-08 13:59:24 - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=13, 分=59, 秒=24
2025-05-08 13:59:24 - backend.utils.status_updater - INFO - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=13, 分=59, 秒=24
2025-05-08 13:59:24 - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 13:59:24 - backend.utils.status_updater - INFO - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 13:59:24 - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 13:59:24.450527 AND Reservation.end_datetime > 2025-05-08 13:59:24.450527
2025-05-08 13:59:24 - backend.utils.status_updater - INFO - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 13:59:24.450527 AND Reservation.end_datetime > 2025-05-08 13:59:24.450527
2025-05-08 13:59:24 - 找到 0 个应该更新为'使用中'的预约
2025-05-08 13:59:24 - backend.utils.status_updater - INFO - 找到 0 个应该更新为'使用中'的预约
2025-05-08 13:59:24 - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 13:59:24 - backend.utils.status_updater - INFO - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 13:59:24 - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 13:59:24.450527
2025-05-08 13:59:24 - backend.utils.status_updater - INFO - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 13:59:24.450527
2025-05-08 13:59:24 - 找到 0 个应该更新为'已过期'的预约
2025-05-08 13:59:24 - backend.utils.status_updater - INFO - 找到 0 个应该更新为'已过期'的预约
2025-05-08 13:59:24 - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 13:59:24 - backend.utils.status_updater - INFO - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 13:59:24 - 没有预约需要更新状态
2025-05-08 13:59:24 - backend.utils.status_updater - INFO - 没有预约需要更新状态
2025-05-08 13:59:25 - 10.6.140.91:9751 - "OPTIONS /api/statistics/dashboard HTTP/1.1" 200
2025-05-08 13:59:25 - 10.6.140.91:9753 - "GET /api/statistics/dashboard HTTP/1.1" 200
2025-05-08 13:59:28 - 10.6.140.91:9753 - "OPTIONS /api/admin/email/settings HTTP/1.1" 200
2025-05-08 13:59:28 - 10.6.140.91:9758 - "OPTIONS /api/db/tables HTTP/1.1" 200
2025-05-08 13:59:28 - 10.6.140.91:9757 - "OPTIONS /api/admin/email/logs?skip=0&limit=10&status=&event_type= HTTP/1.1" 200
2025-05-08 13:59:28 - 10.6.140.91:9756 - "OPTIONS /api/admin/email/templates HTTP/1.1" 200
2025-05-08 13:59:29 - 10.6.140.91:9759 - "GET /api/admin/email/settings HTTP/1.1" 200
2025-05-08 13:59:29 - 10.6.140.91:9761 - "GET /api/admin/email/templates HTTP/1.1" 200
2025-05-08 13:59:29 - 10.6.140.91:9760 - "GET /api/db/tables HTTP/1.1" 200
2025-05-08 13:59:29 - 10.6.140.91:9762 - "GET /api/admin/email/logs?skip=0&limit=10&status=&event_type= HTTP/1.1" 200
2025-05-08 13:59:29 - 10.6.140.91:9760 - "OPTIONS /api/db/table/admin/columns HTTP/1.1" 200
2025-05-08 13:59:29 - 10.6.140.91:9762 - "GET /api/db/table/admin/columns HTTP/1.1" 200
2025-05-08 13:59:29 - 10.6.140.91:9762 - "OPTIONS /api/db/table/admin/rows?skip=0&limit=20 HTTP/1.1" 200
2025-05-08 13:59:29 - 10.6.140.91:9759 - "GET /api/db/table/admin/rows?skip=0&limit=20 HTTP/1.1" 200
2025-05-08 14:00:24 - 执行预约状态更新任务
2025-05-08 14:00:24 - backend.main - INFO - 执行预约状态更新任务
2025-05-08 14:00:24 - 当前时间: 2025-05-08 14:00:24.460685
2025-05-08 14:00:24 - backend.utils.status_updater - INFO - 当前时间: 2025-05-08 14:00:24.460685
2025-05-08 14:00:24 - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=14, 分=0, 秒=24
2025-05-08 14:00:24 - backend.utils.status_updater - INFO - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=14, 分=0, 秒=24
2025-05-08 14:00:24 - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 14:00:24 - backend.utils.status_updater - INFO - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 14:00:24 - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 14:00:24.460685 AND Reservation.end_datetime > 2025-05-08 14:00:24.460685
2025-05-08 14:00:24 - backend.utils.status_updater - INFO - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 14:00:24.460685 AND Reservation.end_datetime > 2025-05-08 14:00:24.460685
2025-05-08 14:00:24 - 找到 0 个应该更新为'使用中'的预约
2025-05-08 14:00:24 - backend.utils.status_updater - INFO - 找到 0 个应该更新为'使用中'的预约
2025-05-08 14:00:24 - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 14:00:24 - backend.utils.status_updater - INFO - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 14:00:24 - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 14:00:24.460685
2025-05-08 14:00:24 - backend.utils.status_updater - INFO - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 14:00:24.460685
2025-05-08 14:00:24 - 找到 0 个应该更新为'已过期'的预约
2025-05-08 14:00:24 - backend.utils.status_updater - INFO - 找到 0 个应该更新为'已过期'的预约
2025-05-08 14:00:24 - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 14:00:24 - backend.utils.status_updater - INFO - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 14:00:24 - 没有预约需要更新状态
2025-05-08 14:00:24 - backend.utils.status_updater - INFO - 没有预约需要更新状态
2025-05-08 14:01:24 - 执行预约状态更新任务
2025-05-08 14:01:24 - backend.main - INFO - 执行预约状态更新任务
2025-05-08 14:01:24 - 当前时间: 2025-05-08 14:01:24.470115
2025-05-08 14:01:24 - backend.utils.status_updater - INFO - 当前时间: 2025-05-08 14:01:24.470115
2025-05-08 14:01:24 - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=14, 分=1, 秒=24
2025-05-08 14:01:24 - backend.utils.status_updater - INFO - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=14, 分=1, 秒=24
2025-05-08 14:01:24 - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 14:01:24 - backend.utils.status_updater - INFO - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 14:01:24 - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 14:01:24.470115 AND Reservation.end_datetime > 2025-05-08 14:01:24.470115
2025-05-08 14:01:24 - backend.utils.status_updater - INFO - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 14:01:24.470115 AND Reservation.end_datetime > 2025-05-08 14:01:24.470115
2025-05-08 14:01:24 - 找到 0 个应该更新为'使用中'的预约
2025-05-08 14:01:24 - backend.utils.status_updater - INFO - 找到 0 个应该更新为'使用中'的预约
2025-05-08 14:01:24 - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 14:01:24 - backend.utils.status_updater - INFO - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 14:01:24 - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 14:01:24.470115
2025-05-08 14:01:24 - backend.utils.status_updater - INFO - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 14:01:24.470115
2025-05-08 14:01:24 - 找到 0 个应该更新为'已过期'的预约
2025-05-08 14:01:24 - backend.utils.status_updater - INFO - 找到 0 个应该更新为'已过期'的预约
2025-05-08 14:01:24 - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 14:01:24 - backend.utils.status_updater - INFO - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 14:01:24 - 没有预约需要更新状态
2025-05-08 14:01:24 - backend.utils.status_updater - INFO - 没有预约需要更新状态
2025-05-08 14:02:24 - 执行预约状态更新任务
2025-05-08 14:02:24 - backend.main - INFO - 执行预约状态更新任务
2025-05-08 14:02:24 - 当前时间: 2025-05-08 14:02:24.485211
2025-05-08 14:02:24 - backend.utils.status_updater - INFO - 当前时间: 2025-05-08 14:02:24.485211
2025-05-08 14:02:24 - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=14, 分=2, 秒=24
2025-05-08 14:02:24 - backend.utils.status_updater - INFO - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=14, 分=2, 秒=24
2025-05-08 14:02:24 - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 14:02:24 - backend.utils.status_updater - INFO - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 14:02:24 - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 14:02:24.485211 AND Reservation.end_datetime > 2025-05-08 14:02:24.485211
2025-05-08 14:02:24 - backend.utils.status_updater - INFO - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 14:02:24.485211 AND Reservation.end_datetime > 2025-05-08 14:02:24.485211
2025-05-08 14:02:24 - 找到 0 个应该更新为'使用中'的预约
2025-05-08 14:02:24 - backend.utils.status_updater - INFO - 找到 0 个应该更新为'使用中'的预约
2025-05-08 14:02:24 - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 14:02:24 - backend.utils.status_updater - INFO - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 14:02:24 - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 14:02:24.485211
2025-05-08 14:02:24 - backend.utils.status_updater - INFO - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 14:02:24.485211
2025-05-08 14:02:24 - 找到 0 个应该更新为'已过期'的预约
2025-05-08 14:02:24 - backend.utils.status_updater - INFO - 找到 0 个应该更新为'已过期'的预约
2025-05-08 14:02:24 - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 14:02:24 - backend.utils.status_updater - INFO - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 14:02:24 - 没有预约需要更新状态
2025-05-08 14:02:24 - backend.utils.status_updater - INFO - 没有预约需要更新状态
2025-05-08 14:03:24 - 执行预约状态更新任务
2025-05-08 14:03:24 - backend.main - INFO - 执行预约状态更新任务
2025-05-08 14:03:24 - 当前时间: 2025-05-08 14:03:24.502929
2025-05-08 14:03:24 - backend.utils.status_updater - INFO - 当前时间: 2025-05-08 14:03:24.502929
2025-05-08 14:03:24 - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=14, 分=3, 秒=24
2025-05-08 14:03:24 - backend.utils.status_updater - INFO - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=14, 分=3, 秒=24
2025-05-08 14:03:24 - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 14:03:24 - backend.utils.status_updater - INFO - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 14:03:24 - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 14:03:24.502929 AND Reservation.end_datetime > 2025-05-08 14:03:24.502929
2025-05-08 14:03:24 - backend.utils.status_updater - INFO - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 14:03:24.502929 AND Reservation.end_datetime > 2025-05-08 14:03:24.502929
2025-05-08 14:03:24 - 找到 0 个应该更新为'使用中'的预约
2025-05-08 14:03:24 - backend.utils.status_updater - INFO - 找到 0 个应该更新为'使用中'的预约
2025-05-08 14:03:24 - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 14:03:24 - backend.utils.status_updater - INFO - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 14:03:24 - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 14:03:24.502929
2025-05-08 14:03:24 - backend.utils.status_updater - INFO - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 14:03:24.502929
2025-05-08 14:03:24 - 找到 0 个应该更新为'已过期'的预约
2025-05-08 14:03:24 - backend.utils.status_updater - INFO - 找到 0 个应该更新为'已过期'的预约
2025-05-08 14:03:24 - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 14:03:24 - backend.utils.status_updater - INFO - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 14:03:24 - 没有预约需要更新状态
2025-05-08 14:03:24 - backend.utils.status_updater - INFO - 没有预约需要更新状态
2025-05-08 14:04:13 - StatReload detected changes in 'backend\models\email.py'. Reloading...
2025-05-08 14:04:13 - Shutting down
2025-05-08 14:04:13 - Waiting for application shutdown.
2025-05-08 14:04:13 - 状态更新任务已取消
2025-05-08 14:04:13 - backend.main - INFO - 状态更新任务已取消
2025-05-08 14:04:13 - 应用关闭 / Application shut down
2025-05-08 14:04:13 - backend.main - INFO - 应用关闭 / Application shut down
2025-05-08 14:04:13 - Application shutdown complete.
2025-05-08 14:04:13 - Finished server process [15792]
2025-05-08 14:04:14 - 国际化设置成功
2025-05-08 14:04:14 - backend.i18n - INFO - 国际化设置成功
2025-05-08 14:04:14 - Started server process [14156]
2025-05-08 14:04:14 - Waiting for application startup.
2025-05-08 14:04:14 - 应用启动 / Application started
2025-05-08 14:04:14 - backend.main - INFO - 应用启动 / Application started
2025-05-08 14:04:14 - 数据库初始化成功
2025-05-08 14:04:14 - backend.database - INFO - 数据库初始化成功
2025-05-08 14:04:14 - 执行预约状态更新任务
2025-05-08 14:04:14 - backend.main - INFO - 执行预约状态更新任务
2025-05-08 14:04:14 - 当前时间: 2025-05-08 14:04:14.913968
2025-05-08 14:04:14 - backend.utils.status_updater - INFO - 当前时间: 2025-05-08 14:04:14.913968
2025-05-08 14:04:14 - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=14, 分=4, 秒=14
2025-05-08 14:04:14 - backend.utils.status_updater - INFO - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=14, 分=4, 秒=14
2025-05-08 14:04:14 - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 14:04:14 - backend.utils.status_updater - INFO - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 14:04:14 - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 14:04:14.913968 AND Reservation.end_datetime > 2025-05-08 14:04:14.913968
2025-05-08 14:04:14 - backend.utils.status_updater - INFO - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 14:04:14.913968 AND Reservation.end_datetime > 2025-05-08 14:04:14.913968
2025-05-08 14:04:14 - 找到 0 个应该更新为'使用中'的预约
2025-05-08 14:04:14 - backend.utils.status_updater - INFO - 找到 0 个应该更新为'使用中'的预约
2025-05-08 14:04:14 - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 14:04:14 - backend.utils.status_updater - INFO - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 14:04:14 - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 14:04:14.913968
2025-05-08 14:04:14 - backend.utils.status_updater - INFO - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 14:04:14.913968
2025-05-08 14:04:14 - 找到 0 个应该更新为'已过期'的预约
2025-05-08 14:04:14 - backend.utils.status_updater - INFO - 找到 0 个应该更新为'已过期'的预约
2025-05-08 14:04:14 - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 14:04:14 - backend.utils.status_updater - INFO - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 14:04:14 - 没有预约需要更新状态
2025-05-08 14:04:14 - backend.utils.status_updater - INFO - 没有预约需要更新状态
2025-05-08 14:04:14 - Application startup complete.
2025-05-08 14:04:29 - StatReload detected changes in 'backend\schemas\email.py'. Reloading...
2025-05-08 14:04:29 - Shutting down
2025-05-08 14:04:29 - Waiting for application shutdown.
2025-05-08 14:04:29 - 状态更新任务已取消
2025-05-08 14:04:29 - backend.main - INFO - 状态更新任务已取消
2025-05-08 14:04:29 - 应用关闭 / Application shut down
2025-05-08 14:04:29 - backend.main - INFO - 应用关闭 / Application shut down
2025-05-08 14:04:29 - Application shutdown complete.
2025-05-08 14:04:29 - Finished server process [14156]
2025-05-08 14:04:30 - 国际化设置成功
2025-05-08 14:04:30 - backend.i18n - INFO - 国际化设置成功
2025-05-08 14:04:30 - Started server process [9028]
2025-05-08 14:04:30 - Waiting for application startup.
2025-05-08 14:04:30 - 应用启动 / Application started
2025-05-08 14:04:30 - backend.main - INFO - 应用启动 / Application started
2025-05-08 14:04:30 - 数据库初始化成功
2025-05-08 14:04:30 - backend.database - INFO - 数据库初始化成功
2025-05-08 14:04:30 - 执行预约状态更新任务
2025-05-08 14:04:30 - backend.main - INFO - 执行预约状态更新任务
2025-05-08 14:04:30 - 当前时间: 2025-05-08 14:04:30.982656
2025-05-08 14:04:30 - backend.utils.status_updater - INFO - 当前时间: 2025-05-08 14:04:30.982656
2025-05-08 14:04:30 - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=14, 分=4, 秒=30
2025-05-08 14:04:30 - backend.utils.status_updater - INFO - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=14, 分=4, 秒=30
2025-05-08 14:04:30 - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 14:04:30 - backend.utils.status_updater - INFO - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 14:04:30 - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 14:04:30.982656 AND Reservation.end_datetime > 2025-05-08 14:04:30.982656
2025-05-08 14:04:30 - backend.utils.status_updater - INFO - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 14:04:30.982656 AND Reservation.end_datetime > 2025-05-08 14:04:30.982656
2025-05-08 14:04:30 - 找到 0 个应该更新为'使用中'的预约
2025-05-08 14:04:30 - backend.utils.status_updater - INFO - 找到 0 个应该更新为'使用中'的预约
2025-05-08 14:04:30 - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 14:04:30 - backend.utils.status_updater - INFO - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 14:04:30 - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 14:04:30.982656
2025-05-08 14:04:30 - backend.utils.status_updater - INFO - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 14:04:30.982656
2025-05-08 14:04:30 - 找到 0 个应该更新为'已过期'的预约
2025-05-08 14:04:30 - backend.utils.status_updater - INFO - 找到 0 个应该更新为'已过期'的预约
2025-05-08 14:04:30 - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 14:04:30 - backend.utils.status_updater - INFO - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 14:04:30 - 没有预约需要更新状态
2025-05-08 14:04:30 - backend.utils.status_updater - INFO - 没有预约需要更新状态
2025-05-08 14:04:30 - Application startup complete.
2025-05-08 14:05:04 - StatReload detected changes in 'backend\utils\email_sender.py'. Reloading...
2025-05-08 14:05:04 - Shutting down
2025-05-08 14:05:04 - Waiting for application shutdown.
2025-05-08 14:05:04 - 状态更新任务已取消
2025-05-08 14:05:04 - backend.main - INFO - 状态更新任务已取消
2025-05-08 14:05:04 - 应用关闭 / Application shut down
2025-05-08 14:05:04 - backend.main - INFO - 应用关闭 / Application shut down
2025-05-08 14:05:04 - Application shutdown complete.
2025-05-08 14:05:04 - Finished server process [9028]
2025-05-08 14:05:05 - 国际化设置成功
2025-05-08 14:05:05 - backend.i18n - INFO - 国际化设置成功
2025-05-08 14:05:05 - Started server process [26940]
2025-05-08 14:05:05 - Waiting for application startup.
2025-05-08 14:05:05 - 应用启动 / Application started
2025-05-08 14:05:05 - backend.main - INFO - 应用启动 / Application started
2025-05-08 14:05:05 - 数据库初始化成功
2025-05-08 14:05:05 - backend.database - INFO - 数据库初始化成功
2025-05-08 14:05:05 - 执行预约状态更新任务
2025-05-08 14:05:05 - backend.main - INFO - 执行预约状态更新任务
2025-05-08 14:05:05 - 当前时间: 2025-05-08 14:05:05.595490
2025-05-08 14:05:05 - backend.utils.status_updater - INFO - 当前时间: 2025-05-08 14:05:05.595490
2025-05-08 14:05:05 - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=14, 分=5, 秒=5
2025-05-08 14:05:05 - backend.utils.status_updater - INFO - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=14, 分=5, 秒=5
2025-05-08 14:05:05 - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 14:05:05 - backend.utils.status_updater - INFO - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 14:05:05 - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 14:05:05.595490 AND Reservation.end_datetime > 2025-05-08 14:05:05.595490
2025-05-08 14:05:05 - backend.utils.status_updater - INFO - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 14:05:05.595490 AND Reservation.end_datetime > 2025-05-08 14:05:05.595490
2025-05-08 14:05:05 - 找到 0 个应该更新为'使用中'的预约
2025-05-08 14:05:05 - backend.utils.status_updater - INFO - 找到 0 个应该更新为'使用中'的预约
2025-05-08 14:05:05 - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 14:05:05 - backend.utils.status_updater - INFO - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 14:05:05 - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 14:05:05.595490
2025-05-08 14:05:05 - backend.utils.status_updater - INFO - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 14:05:05.595490
2025-05-08 14:05:05 - 找到 0 个应该更新为'已过期'的预约
2025-05-08 14:05:05 - backend.utils.status_updater - INFO - 找到 0 个应该更新为'已过期'的预约
2025-05-08 14:05:05 - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 14:05:05 - backend.utils.status_updater - INFO - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 14:05:05 - 没有预约需要更新状态
2025-05-08 14:05:05 - backend.utils.status_updater - INFO - 没有预约需要更新状态
2025-05-08 14:05:05 - Application startup complete.
2025-05-08 14:05:27 - 10.6.140.91:10319 - "GET /api/admin/email/settings HTTP/1.1" 500
2025-05-08 14:05:27 - Exception in ASGI application
Traceback (most recent call last):
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: email_settings.cc_list

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\Python Projects\.venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Python Projects\.venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Python Projects\.venv\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\middleware\errors.py", line 187, in __call__
    raise exc
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\middleware\base.py", line 173, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "D:\Python\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    raise exc
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\middleware\base.py", line 175, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\equipment-reservation-system\backend\i18n.py", line 37, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\middleware\base.py", line 153, in call_next
    raise app_exc
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\middleware\base.py", line 140, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "D:\Python Projects\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "D:\Python Projects\.venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\equipment-reservation-system\backend\routes\crud\email.py", line 33, in get_email_settings
    email_settings = db.query(EmailSettings).first()
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2858, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: email_settings.cc_list
[SQL: SELECT email_settings.id AS email_settings_id, email_settings.smtp_server AS email_settings_smtp_server, email_settings.smtp_port AS email_settings_smtp_port, email_settings.sender_email AS email_settings_sender_email, email_settings.sender_name AS email_settings_sender_name, email_settings.smtp_username AS email_settings_smtp_username, email_settings.smtp_password AS email_settings_smtp_password, email_settings.cc_list AS email_settings_cc_list, email_settings.bcc_list AS email_settings_bcc_list, email_settings.use_ssl AS email_settings_use_ssl, email_settings.enabled AS email_settings_enabled, email_settings.created_at AS email_settings_created_at, email_settings.updated_at AS email_settings_updated_at 
FROM email_settings
 LIMIT ? OFFSET ?]
[parameters: (1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-05-08 14:05:27 - 10.6.140.91:10320 - "GET /api/admin/email/templates HTTP/1.1" 200
2025-05-08 14:05:27 - 10.6.140.91:10321 - "GET /api/admin/email/logs?skip=0&limit=10&status=&event_type= HTTP/1.1" 200
2025-05-08 14:05:27 - 10.6.140.91:10322 - "GET /api/db/tables HTTP/1.1" 200
2025-05-08 14:05:27 - 10.6.140.91:10322 - "GET /api/db/table/admin/columns HTTP/1.1" 200
2025-05-08 14:05:27 - 10.6.140.91:10322 - "GET /api/db/table/admin/rows?skip=0&limit=20 HTTP/1.1" 200
2025-05-08 14:05:39 - 10.6.140.91:10355 - "GET /api/admin/email/templates HTTP/1.1" 200
2025-05-08 14:05:39 - 10.6.140.91:10356 - "GET /api/admin/email/logs?skip=0&limit=10&status=&event_type= HTTP/1.1" 200
2025-05-08 14:05:39 - 10.6.140.91:10354 - "GET /api/admin/email/settings HTTP/1.1" 500
2025-05-08 14:05:39 - Exception in ASGI application
Traceback (most recent call last):
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: email_settings.cc_list

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\Python Projects\.venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Python Projects\.venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Python Projects\.venv\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\middleware\errors.py", line 187, in __call__
    raise exc
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\middleware\base.py", line 173, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "D:\Python\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    raise exc
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\middleware\base.py", line 175, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\equipment-reservation-system\backend\i18n.py", line 37, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\middleware\base.py", line 153, in call_next
    raise app_exc
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\middleware\base.py", line 140, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "D:\Python Projects\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "D:\Python Projects\.venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\equipment-reservation-system\backend\routes\crud\email.py", line 33, in get_email_settings
    email_settings = db.query(EmailSettings).first()
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2858, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: email_settings.cc_list
[SQL: SELECT email_settings.id AS email_settings_id, email_settings.smtp_server AS email_settings_smtp_server, email_settings.smtp_port AS email_settings_smtp_port, email_settings.sender_email AS email_settings_sender_email, email_settings.sender_name AS email_settings_sender_name, email_settings.smtp_username AS email_settings_smtp_username, email_settings.smtp_password AS email_settings_smtp_password, email_settings.cc_list AS email_settings_cc_list, email_settings.bcc_list AS email_settings_bcc_list, email_settings.use_ssl AS email_settings_use_ssl, email_settings.enabled AS email_settings_enabled, email_settings.created_at AS email_settings_created_at, email_settings.updated_at AS email_settings_updated_at 
FROM email_settings
 LIMIT ? OFFSET ?]
[parameters: (1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-05-08 14:05:39 - 10.6.140.91:10357 - "GET /api/db/tables HTTP/1.1" 200
2025-05-08 14:05:39 - 10.6.140.91:10357 - "GET /api/db/table/admin/columns HTTP/1.1" 200
2025-05-08 14:05:39 - 10.6.140.91:10357 - "GET /api/db/table/admin/rows?skip=0&limit=20 HTTP/1.1" 200
2025-05-08 14:05:49 - 10.6.140.91:10374 - "GET /api/admin/email/settings HTTP/1.1" 500
2025-05-08 14:05:49 - Exception in ASGI application
Traceback (most recent call last):
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: email_settings.cc_list

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\Python Projects\.venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Python Projects\.venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Python Projects\.venv\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\middleware\errors.py", line 187, in __call__
    raise exc
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\middleware\base.py", line 173, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "D:\Python\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    raise exc
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\middleware\base.py", line 175, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\equipment-reservation-system\backend\i18n.py", line 37, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\middleware\base.py", line 153, in call_next
    raise app_exc
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\middleware\base.py", line 140, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "D:\Python Projects\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "D:\Python Projects\.venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\equipment-reservation-system\backend\routes\crud\email.py", line 33, in get_email_settings
    email_settings = db.query(EmailSettings).first()
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2858, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: email_settings.cc_list
[SQL: SELECT email_settings.id AS email_settings_id, email_settings.smtp_server AS email_settings_smtp_server, email_settings.smtp_port AS email_settings_smtp_port, email_settings.sender_email AS email_settings_sender_email, email_settings.sender_name AS email_settings_sender_name, email_settings.smtp_username AS email_settings_smtp_username, email_settings.smtp_password AS email_settings_smtp_password, email_settings.cc_list AS email_settings_cc_list, email_settings.bcc_list AS email_settings_bcc_list, email_settings.use_ssl AS email_settings_use_ssl, email_settings.enabled AS email_settings_enabled, email_settings.created_at AS email_settings_created_at, email_settings.updated_at AS email_settings_updated_at 
FROM email_settings
 LIMIT ? OFFSET ?]
[parameters: (1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-05-08 14:05:49 - 10.6.140.91:10376 - "GET /api/admin/email/logs?skip=0&limit=10&status=&event_type= HTTP/1.1" 200
2025-05-08 14:05:49 - 10.6.140.91:10377 - "GET /api/db/tables HTTP/1.1" 200
2025-05-08 14:05:49 - 10.6.140.91:10375 - "GET /api/admin/email/templates HTTP/1.1" 200
2025-05-08 14:05:49 - 10.6.140.91:10377 - "GET /api/db/table/admin/columns HTTP/1.1" 200
2025-05-08 14:05:49 - 10.6.140.91:10377 - "GET /api/db/table/admin/rows?skip=0&limit=20 HTTP/1.1" 200
2025-05-08 14:06:05 - 执行预约状态更新任务
2025-05-08 14:06:05 - backend.main - INFO - 执行预约状态更新任务
2025-05-08 14:06:05 - 当前时间: 2025-05-08 14:06:05.619173
2025-05-08 14:06:05 - backend.utils.status_updater - INFO - 当前时间: 2025-05-08 14:06:05.619173
2025-05-08 14:06:05 - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=14, 分=6, 秒=5
2025-05-08 14:06:05 - backend.utils.status_updater - INFO - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=14, 分=6, 秒=5
2025-05-08 14:06:05 - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 14:06:05 - backend.utils.status_updater - INFO - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 14:06:05 - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 14:06:05.619173 AND Reservation.end_datetime > 2025-05-08 14:06:05.619173
2025-05-08 14:06:05 - backend.utils.status_updater - INFO - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 14:06:05.619173 AND Reservation.end_datetime > 2025-05-08 14:06:05.619173
2025-05-08 14:06:05 - 找到 0 个应该更新为'使用中'的预约
2025-05-08 14:06:05 - backend.utils.status_updater - INFO - 找到 0 个应该更新为'使用中'的预约
2025-05-08 14:06:05 - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 14:06:05 - backend.utils.status_updater - INFO - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 14:06:05 - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 14:06:05.619173
2025-05-08 14:06:05 - backend.utils.status_updater - INFO - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 14:06:05.619173
2025-05-08 14:06:05 - 找到 0 个应该更新为'已过期'的预约
2025-05-08 14:06:05 - backend.utils.status_updater - INFO - 找到 0 个应该更新为'已过期'的预约
2025-05-08 14:06:05 - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 14:06:05 - backend.utils.status_updater - INFO - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 14:06:05 - 没有预约需要更新状态
2025-05-08 14:06:05 - backend.utils.status_updater - INFO - 没有预约需要更新状态
2025-05-08 14:06:33 - StatReload detected changes in 'backend\routes\crud\email.py'. Reloading...
2025-05-08 14:06:33 - Shutting down
2025-05-08 14:06:34 - Waiting for application shutdown.
2025-05-08 14:06:34 - 状态更新任务已取消
2025-05-08 14:06:34 - backend.main - INFO - 状态更新任务已取消
2025-05-08 14:06:34 - 应用关闭 / Application shut down
2025-05-08 14:06:34 - backend.main - INFO - 应用关闭 / Application shut down
2025-05-08 14:06:34 - Application shutdown complete.
2025-05-08 14:06:34 - Finished server process [26940]
2025-05-08 14:06:34 - 国际化设置成功
2025-05-08 14:06:34 - backend.i18n - INFO - 国际化设置成功
2025-05-08 14:06:35 - Started server process [26112]
2025-05-08 14:06:35 - Waiting for application startup.
2025-05-08 14:06:35 - 应用启动 / Application started
2025-05-08 14:06:35 - backend.main - INFO - 应用启动 / Application started
2025-05-08 14:06:35 - 数据库初始化成功
2025-05-08 14:06:35 - backend.database - INFO - 数据库初始化成功
2025-05-08 14:06:35 - 执行预约状态更新任务
2025-05-08 14:06:35 - backend.main - INFO - 执行预约状态更新任务
2025-05-08 14:06:35 - 当前时间: 2025-05-08 14:06:35.262765
2025-05-08 14:06:35 - backend.utils.status_updater - INFO - 当前时间: 2025-05-08 14:06:35.262765
2025-05-08 14:06:35 - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=14, 分=6, 秒=35
2025-05-08 14:06:35 - backend.utils.status_updater - INFO - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=14, 分=6, 秒=35
2025-05-08 14:06:35 - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 14:06:35 - backend.utils.status_updater - INFO - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 14:06:35 - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 14:06:35.262765 AND Reservation.end_datetime > 2025-05-08 14:06:35.262765
2025-05-08 14:06:35 - backend.utils.status_updater - INFO - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 14:06:35.262765 AND Reservation.end_datetime > 2025-05-08 14:06:35.262765
2025-05-08 14:06:35 - 找到 0 个应该更新为'使用中'的预约
2025-05-08 14:06:35 - backend.utils.status_updater - INFO - 找到 0 个应该更新为'使用中'的预约
2025-05-08 14:06:35 - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 14:06:35 - backend.utils.status_updater - INFO - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 14:06:35 - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 14:06:35.262765
2025-05-08 14:06:35 - backend.utils.status_updater - INFO - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 14:06:35.262765
2025-05-08 14:06:35 - 找到 0 个应该更新为'已过期'的预约
2025-05-08 14:06:35 - backend.utils.status_updater - INFO - 找到 0 个应该更新为'已过期'的预约
2025-05-08 14:06:35 - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 14:06:35 - backend.utils.status_updater - INFO - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 14:06:35 - 没有预约需要更新状态
2025-05-08 14:06:35 - backend.utils.status_updater - INFO - 没有预约需要更新状态
2025-05-08 14:06:35 - Application startup complete.
2025-05-08 14:06:37 - 10.6.140.91:10458 - "GET /api/admin/email/settings HTTP/1.1" 500
2025-05-08 14:06:37 - Exception in ASGI application
Traceback (most recent call last):
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: email_settings.cc_list

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\Python Projects\.venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Python Projects\.venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Python Projects\.venv\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\middleware\errors.py", line 187, in __call__
    raise exc
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\middleware\base.py", line 173, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "D:\Python\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    raise exc
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\middleware\base.py", line 175, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\equipment-reservation-system\backend\i18n.py", line 37, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\middleware\base.py", line 153, in call_next
    raise app_exc
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\middleware\base.py", line 140, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "D:\Python Projects\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "D:\Python Projects\.venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\equipment-reservation-system\backend\routes\crud\email.py", line 33, in get_email_settings
    email_settings = db.query(EmailSettings).first()
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2858, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: email_settings.cc_list
[SQL: SELECT email_settings.id AS email_settings_id, email_settings.smtp_server AS email_settings_smtp_server, email_settings.smtp_port AS email_settings_smtp_port, email_settings.sender_email AS email_settings_sender_email, email_settings.sender_name AS email_settings_sender_name, email_settings.smtp_username AS email_settings_smtp_username, email_settings.smtp_password AS email_settings_smtp_password, email_settings.cc_list AS email_settings_cc_list, email_settings.bcc_list AS email_settings_bcc_list, email_settings.use_ssl AS email_settings_use_ssl, email_settings.enabled AS email_settings_enabled, email_settings.created_at AS email_settings_created_at, email_settings.updated_at AS email_settings_updated_at 
FROM email_settings
 LIMIT ? OFFSET ?]
[parameters: (1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-05-08 14:06:37 - 10.6.140.91:10459 - "GET /api/admin/email/templates HTTP/1.1" 200
2025-05-08 14:06:37 - 10.6.140.91:10460 - "GET /api/admin/email/logs?skip=0&limit=10&status=&event_type= HTTP/1.1" 200
2025-05-08 14:06:37 - 10.6.140.91:10461 - "GET /api/db/tables HTTP/1.1" 200
2025-05-08 14:06:37 - 10.6.140.91:10461 - "GET /api/db/table/admin/columns HTTP/1.1" 200
2025-05-08 14:06:37 - 10.6.140.91:10461 - "GET /api/db/table/admin/rows?skip=0&limit=20 HTTP/1.1" 200
2025-05-08 14:07:14 - 10.6.140.91:10519 - "OPTIONS /api/db/table/email_settings/columns HTTP/1.1" 200
2025-05-08 14:07:14 - 10.6.140.91:10520 - "GET /api/db/table/email_settings/columns HTTP/1.1" 200
2025-05-08 14:07:14 - 10.6.140.91:10520 - "OPTIONS /api/db/table/email_settings/rows?skip=0&limit=20 HTTP/1.1" 200
2025-05-08 14:07:14 - 10.6.140.91:10521 - "GET /api/db/table/email_settings/rows?skip=0&limit=20 HTTP/1.1" 200
2025-05-08 14:07:30 - 10.6.140.91:10542 - "GET /api/admin/email/settings HTTP/1.1" 500
2025-05-08 14:07:30 - Exception in ASGI application
Traceback (most recent call last):
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: email_settings.cc_list

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\Python Projects\.venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Python Projects\.venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Python Projects\.venv\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\middleware\errors.py", line 187, in __call__
    raise exc
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\middleware\base.py", line 173, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "D:\Python\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    raise exc
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\middleware\base.py", line 175, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\equipment-reservation-system\backend\i18n.py", line 37, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\middleware\base.py", line 153, in call_next
    raise app_exc
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\middleware\base.py", line 140, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "D:\Python Projects\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "D:\Python Projects\.venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\equipment-reservation-system\backend\routes\crud\email.py", line 33, in get_email_settings
    email_settings = db.query(EmailSettings).first()
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2858, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: email_settings.cc_list
[SQL: SELECT email_settings.id AS email_settings_id, email_settings.smtp_server AS email_settings_smtp_server, email_settings.smtp_port AS email_settings_smtp_port, email_settings.sender_email AS email_settings_sender_email, email_settings.sender_name AS email_settings_sender_name, email_settings.smtp_username AS email_settings_smtp_username, email_settings.smtp_password AS email_settings_smtp_password, email_settings.cc_list AS email_settings_cc_list, email_settings.bcc_list AS email_settings_bcc_list, email_settings.use_ssl AS email_settings_use_ssl, email_settings.enabled AS email_settings_enabled, email_settings.created_at AS email_settings_created_at, email_settings.updated_at AS email_settings_updated_at 
FROM email_settings
 LIMIT ? OFFSET ?]
[parameters: (1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-05-08 14:07:30 - 10.6.140.91:10543 - "GET /api/admin/email/templates HTTP/1.1" 200
2025-05-08 14:07:30 - 10.6.140.91:10544 - "GET /api/admin/email/logs?skip=0&limit=10&status=&event_type= HTTP/1.1" 200
2025-05-08 14:07:30 - 10.6.140.91:10545 - "GET /api/db/tables HTTP/1.1" 200
2025-05-08 14:07:30 - 10.6.140.91:10545 - "GET /api/db/table/admin/columns HTTP/1.1" 200
2025-05-08 14:07:30 - 10.6.140.91:10545 - "GET /api/db/table/admin/rows?skip=0&limit=20 HTTP/1.1" 200
2025-05-08 14:07:35 - 执行预约状态更新任务
2025-05-08 14:07:35 - backend.main - INFO - 执行预约状态更新任务
2025-05-08 14:07:35 - 当前时间: 2025-05-08 14:07:35.290537
2025-05-08 14:07:35 - backend.utils.status_updater - INFO - 当前时间: 2025-05-08 14:07:35.290537
2025-05-08 14:07:35 - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=14, 分=7, 秒=35
2025-05-08 14:07:35 - backend.utils.status_updater - INFO - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=14, 分=7, 秒=35
2025-05-08 14:07:35 - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 14:07:35 - backend.utils.status_updater - INFO - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 14:07:35 - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 14:07:35.290537 AND Reservation.end_datetime > 2025-05-08 14:07:35.290537
2025-05-08 14:07:35 - backend.utils.status_updater - INFO - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 14:07:35.290537 AND Reservation.end_datetime > 2025-05-08 14:07:35.290537
2025-05-08 14:07:35 - 找到 0 个应该更新为'使用中'的预约
2025-05-08 14:07:35 - backend.utils.status_updater - INFO - 找到 0 个应该更新为'使用中'的预约
2025-05-08 14:07:35 - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 14:07:35 - backend.utils.status_updater - INFO - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 14:07:35 - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 14:07:35.290537
2025-05-08 14:07:35 - backend.utils.status_updater - INFO - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 14:07:35.290537
2025-05-08 14:07:35 - 找到 0 个应该更新为'已过期'的预约
2025-05-08 14:07:35 - backend.utils.status_updater - INFO - 找到 0 个应该更新为'已过期'的预约
2025-05-08 14:07:35 - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 14:07:35 - backend.utils.status_updater - INFO - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 14:07:35 - 没有预约需要更新状态
2025-05-08 14:07:35 - backend.utils.status_updater - INFO - 没有预约需要更新状态
2025-05-08 14:07:38 - 10.6.140.91:10555 - "GET /api/db/table/email_settings/columns HTTP/1.1" 200
2025-05-08 14:07:38 - 10.6.140.91:10555 - "GET /api/db/table/email_settings/rows?skip=0&limit=20 HTTP/1.1" 200
2025-05-08 14:07:39 - 10.6.140.91:10555 - "GET /api/db/table/email_settings/columns HTTP/1.1" 200
2025-05-08 14:07:39 - 10.6.140.91:10568 - "GET /api/db/table/email_settings/rows?skip=0&limit=20 HTTP/1.1" 200
2025-05-08 14:07:40 - 10.6.140.91:10555 - "GET /api/db/table/email_settings/rows?skip=0&limit=20 HTTP/1.1" 200
2025-05-08 14:07:40 - 10.6.140.91:10568 - "GET /api/db/table/email_settings/columns HTTP/1.1" 200
2025-05-08 14:08:35 - 执行预约状态更新任务
2025-05-08 14:08:35 - backend.main - INFO - 执行预约状态更新任务
2025-05-08 14:08:35 - 当前时间: 2025-05-08 14:08:35.302200
2025-05-08 14:08:35 - backend.utils.status_updater - INFO - 当前时间: 2025-05-08 14:08:35.302200
2025-05-08 14:08:35 - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=14, 分=8, 秒=35
2025-05-08 14:08:35 - backend.utils.status_updater - INFO - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=14, 分=8, 秒=35
2025-05-08 14:08:35 - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 14:08:35 - backend.utils.status_updater - INFO - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 14:08:35 - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 14:08:35.302200 AND Reservation.end_datetime > 2025-05-08 14:08:35.302200
2025-05-08 14:08:35 - backend.utils.status_updater - INFO - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 14:08:35.302200 AND Reservation.end_datetime > 2025-05-08 14:08:35.302200
2025-05-08 14:08:35 - 找到 0 个应该更新为'使用中'的预约
2025-05-08 14:08:35 - backend.utils.status_updater - INFO - 找到 0 个应该更新为'使用中'的预约
2025-05-08 14:08:35 - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 14:08:35 - backend.utils.status_updater - INFO - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 14:08:35 - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 14:08:35.302200
2025-05-08 14:08:35 - backend.utils.status_updater - INFO - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 14:08:35.302200
2025-05-08 14:08:35 - 找到 0 个应该更新为'已过期'的预约
2025-05-08 14:08:35 - backend.utils.status_updater - INFO - 找到 0 个应该更新为'已过期'的预约
2025-05-08 14:08:35 - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 14:08:35 - backend.utils.status_updater - INFO - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 14:08:35 - 没有预约需要更新状态
2025-05-08 14:08:35 - backend.utils.status_updater - INFO - 没有预约需要更新状态
2025-05-08 14:09:35 - 执行预约状态更新任务
2025-05-08 14:09:35 - backend.main - INFO - 执行预约状态更新任务
2025-05-08 14:09:35 - 当前时间: 2025-05-08 14:09:35.314981
2025-05-08 14:09:35 - backend.utils.status_updater - INFO - 当前时间: 2025-05-08 14:09:35.314981
2025-05-08 14:09:35 - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=14, 分=9, 秒=35
2025-05-08 14:09:35 - backend.utils.status_updater - INFO - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=14, 分=9, 秒=35
2025-05-08 14:09:35 - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 14:09:35 - backend.utils.status_updater - INFO - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 14:09:35 - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 14:09:35.314981 AND Reservation.end_datetime > 2025-05-08 14:09:35.314981
2025-05-08 14:09:35 - backend.utils.status_updater - INFO - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 14:09:35.314981 AND Reservation.end_datetime > 2025-05-08 14:09:35.314981
2025-05-08 14:09:35 - 找到 0 个应该更新为'使用中'的预约
2025-05-08 14:09:35 - backend.utils.status_updater - INFO - 找到 0 个应该更新为'使用中'的预约
2025-05-08 14:09:35 - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 14:09:35 - backend.utils.status_updater - INFO - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 14:09:35 - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 14:09:35.314981
2025-05-08 14:09:35 - backend.utils.status_updater - INFO - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 14:09:35.314981
2025-05-08 14:09:35 - 找到 0 个应该更新为'已过期'的预约
2025-05-08 14:09:35 - backend.utils.status_updater - INFO - 找到 0 个应该更新为'已过期'的预约
2025-05-08 14:09:35 - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 14:09:35 - backend.utils.status_updater - INFO - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 14:09:35 - 没有预约需要更新状态
2025-05-08 14:09:35 - backend.utils.status_updater - INFO - 没有预约需要更新状态
2025-05-08 14:09:42 - 10.6.140.91:10726 - "OPTIONS /api/admin/email/settings HTTP/1.1" 200
2025-05-08 14:09:42 - 10.6.140.91:10727 - "POST /api/admin/email/settings HTTP/1.1" 500
2025-05-08 14:09:42 - Exception in ASGI application
Traceback (most recent call last):
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: email_settings.cc_list

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\Python Projects\.venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Python Projects\.venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Python Projects\.venv\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\middleware\errors.py", line 187, in __call__
    raise exc
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\middleware\base.py", line 173, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "D:\Python\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    raise exc
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\middleware\base.py", line 175, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\equipment-reservation-system\backend\i18n.py", line 37, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\middleware\base.py", line 153, in call_next
    raise app_exc
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\middleware\base.py", line 140, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "D:\Python Projects\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "D:\Python Projects\.venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\equipment-reservation-system\backend\routes\crud\email.py", line 59, in create_or_update_email_settings
    email_settings = db.query(EmailSettings).first()
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2858, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: email_settings.cc_list
[SQL: SELECT email_settings.id AS email_settings_id, email_settings.smtp_server AS email_settings_smtp_server, email_settings.smtp_port AS email_settings_smtp_port, email_settings.sender_email AS email_settings_sender_email, email_settings.sender_name AS email_settings_sender_name, email_settings.smtp_username AS email_settings_smtp_username, email_settings.smtp_password AS email_settings_smtp_password, email_settings.cc_list AS email_settings_cc_list, email_settings.bcc_list AS email_settings_bcc_list, email_settings.use_ssl AS email_settings_use_ssl, email_settings.enabled AS email_settings_enabled, email_settings.created_at AS email_settings_created_at, email_settings.updated_at AS email_settings_updated_at 
FROM email_settings
 LIMIT ? OFFSET ?]
[parameters: (1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-05-08 14:09:45 - 10.6.140.91:10734 - "POST /api/admin/email/settings HTTP/1.1" 500
2025-05-08 14:09:45 - Exception in ASGI application
Traceback (most recent call last):
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: email_settings.cc_list

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\Python Projects\.venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Python Projects\.venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Python Projects\.venv\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\middleware\errors.py", line 187, in __call__
    raise exc
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\middleware\base.py", line 173, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "D:\Python\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    raise exc
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\middleware\base.py", line 175, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\equipment-reservation-system\backend\i18n.py", line 37, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\middleware\base.py", line 153, in call_next
    raise app_exc
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\middleware\base.py", line 140, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\Python Projects\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "D:\Python Projects\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "D:\Python Projects\.venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\equipment-reservation-system\backend\routes\crud\email.py", line 59, in create_or_update_email_settings
    email_settings = db.query(EmailSettings).first()
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2858, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Python Projects\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: email_settings.cc_list
[SQL: SELECT email_settings.id AS email_settings_id, email_settings.smtp_server AS email_settings_smtp_server, email_settings.smtp_port AS email_settings_smtp_port, email_settings.sender_email AS email_settings_sender_email, email_settings.sender_name AS email_settings_sender_name, email_settings.smtp_username AS email_settings_smtp_username, email_settings.smtp_password AS email_settings_smtp_password, email_settings.cc_list AS email_settings_cc_list, email_settings.bcc_list AS email_settings_bcc_list, email_settings.use_ssl AS email_settings_use_ssl, email_settings.enabled AS email_settings_enabled, email_settings.created_at AS email_settings_created_at, email_settings.updated_at AS email_settings_updated_at 
FROM email_settings
 LIMIT ? OFFSET ?]
[parameters: (1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-05-08 14:10:35 - 执行预约状态更新任务
2025-05-08 14:10:35 - backend.main - INFO - 执行预约状态更新任务
2025-05-08 14:10:35 - 当前时间: 2025-05-08 14:10:35.320422
2025-05-08 14:10:35 - backend.utils.status_updater - INFO - 当前时间: 2025-05-08 14:10:35.320422
2025-05-08 14:10:35 - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=14, 分=10, 秒=35
2025-05-08 14:10:35 - backend.utils.status_updater - INFO - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=14, 分=10, 秒=35
2025-05-08 14:10:35 - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 14:10:35 - backend.utils.status_updater - INFO - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 14:10:35 - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 14:10:35.320422 AND Reservation.end_datetime > 2025-05-08 14:10:35.320422
2025-05-08 14:10:35 - backend.utils.status_updater - INFO - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 14:10:35.320422 AND Reservation.end_datetime > 2025-05-08 14:10:35.320422
2025-05-08 14:10:35 - 找到 0 个应该更新为'使用中'的预约
2025-05-08 14:10:35 - backend.utils.status_updater - INFO - 找到 0 个应该更新为'使用中'的预约
2025-05-08 14:10:35 - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 14:10:35 - backend.utils.status_updater - INFO - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 14:10:35 - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 14:10:35.320422
2025-05-08 14:10:35 - backend.utils.status_updater - INFO - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 14:10:35.320422
2025-05-08 14:10:35 - 找到 0 个应该更新为'已过期'的预约
2025-05-08 14:10:35 - backend.utils.status_updater - INFO - 找到 0 个应该更新为'已过期'的预约
2025-05-08 14:10:35 - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 14:10:35 - backend.utils.status_updater - INFO - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 14:10:35 - 没有预约需要更新状态
2025-05-08 14:10:35 - backend.utils.status_updater - INFO - 没有预约需要更新状态
2025-05-08 14:11:18 - StatReload detected changes in 'scripts\update_email_settings_table.py'. Reloading...
2025-05-08 14:11:18 - Shutting down
2025-05-08 14:11:18 - Waiting for application shutdown.
2025-05-08 14:11:18 - 状态更新任务已取消
2025-05-08 14:11:18 - backend.main - INFO - 状态更新任务已取消
2025-05-08 14:11:18 - 应用关闭 / Application shut down
2025-05-08 14:11:18 - backend.main - INFO - 应用关闭 / Application shut down
2025-05-08 14:11:18 - Application shutdown complete.
2025-05-08 14:11:18 - Finished server process [26112]
2025-05-08 14:11:19 - 国际化设置成功
2025-05-08 14:11:19 - backend.i18n - INFO - 国际化设置成功
2025-05-08 14:11:19 - Started server process [7960]
2025-05-08 14:11:19 - Waiting for application startup.
2025-05-08 14:11:19 - 应用启动 / Application started
2025-05-08 14:11:19 - backend.main - INFO - 应用启动 / Application started
2025-05-08 14:11:19 - 数据库初始化成功
2025-05-08 14:11:19 - backend.database - INFO - 数据库初始化成功
2025-05-08 14:11:19 - 执行预约状态更新任务
2025-05-08 14:11:19 - backend.main - INFO - 执行预约状态更新任务
2025-05-08 14:11:19 - 当前时间: 2025-05-08 14:11:19.552526
2025-05-08 14:11:19 - backend.utils.status_updater - INFO - 当前时间: 2025-05-08 14:11:19.552526
2025-05-08 14:11:19 - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=14, 分=11, 秒=19
2025-05-08 14:11:19 - backend.utils.status_updater - INFO - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=14, 分=11, 秒=19
2025-05-08 14:11:19 - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 14:11:19 - backend.utils.status_updater - INFO - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 14:11:19 - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 14:11:19.552526 AND Reservation.end_datetime > 2025-05-08 14:11:19.552526
2025-05-08 14:11:19 - backend.utils.status_updater - INFO - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 14:11:19.552526 AND Reservation.end_datetime > 2025-05-08 14:11:19.552526
2025-05-08 14:11:19 - 找到 0 个应该更新为'使用中'的预约
2025-05-08 14:11:19 - backend.utils.status_updater - INFO - 找到 0 个应该更新为'使用中'的预约
2025-05-08 14:11:19 - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 14:11:19 - backend.utils.status_updater - INFO - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 14:11:19 - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 14:11:19.552526
2025-05-08 14:11:19 - backend.utils.status_updater - INFO - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 14:11:19.552526
2025-05-08 14:11:19 - 找到 0 个应该更新为'已过期'的预约
2025-05-08 14:11:19 - backend.utils.status_updater - INFO - 找到 0 个应该更新为'已过期'的预约
2025-05-08 14:11:19 - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 14:11:19 - backend.utils.status_updater - INFO - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 14:11:19 - 没有预约需要更新状态
2025-05-08 14:11:19 - backend.utils.status_updater - INFO - 没有预约需要更新状态
2025-05-08 14:11:19 - Application startup complete.
2025-05-08 14:12:13 - 应用程序启动失败: Unable to configure handler 'file'
2025-05-08 14:12:16 - 127.0.0.1:3538 - "GET / HTTP/1.1" 200
2025-05-08 14:12:16 - 127.0.0.1:3561 - "GET /favicon.ico HTTP/1.1" 404
2025-05-08 14:12:19 - 执行预约状态更新任务
2025-05-08 14:12:19 - backend.main - INFO - 执行预约状态更新任务
2025-05-08 14:12:19 - 当前时间: 2025-05-08 14:12:19.570549
2025-05-08 14:12:19 - backend.utils.status_updater - INFO - 当前时间: 2025-05-08 14:12:19.570549
2025-05-08 14:12:19 - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=14, 分=12, 秒=19
2025-05-08 14:12:19 - backend.utils.status_updater - INFO - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=14, 分=12, 秒=19
2025-05-08 14:12:19 - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 14:12:19 - backend.utils.status_updater - INFO - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 14:12:19 - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 14:12:19.570549 AND Reservation.end_datetime > 2025-05-08 14:12:19.570549
2025-05-08 14:12:19 - backend.utils.status_updater - INFO - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 14:12:19.570549 AND Reservation.end_datetime > 2025-05-08 14:12:19.570549
2025-05-08 14:12:19 - 找到 0 个应该更新为'使用中'的预约
2025-05-08 14:12:19 - backend.utils.status_updater - INFO - 找到 0 个应该更新为'使用中'的预约
2025-05-08 14:12:19 - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 14:12:19 - backend.utils.status_updater - INFO - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 14:12:19 - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 14:12:19.570549
2025-05-08 14:12:19 - backend.utils.status_updater - INFO - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 14:12:19.570549
2025-05-08 14:12:19 - 找到 0 个应该更新为'已过期'的预约
2025-05-08 14:12:19 - backend.utils.status_updater - INFO - 找到 0 个应该更新为'已过期'的预约
2025-05-08 14:12:19 - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 14:12:19 - backend.utils.status_updater - INFO - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 14:12:19 - 没有预约需要更新状态
2025-05-08 14:12:19 - backend.utils.status_updater - INFO - 没有预约需要更新状态
2025-05-08 14:12:36 - 10.6.140.91:11058 - "POST /api/admin/email/settings HTTP/1.1" 401
2025-05-08 14:12:36 - 10.6.140.91:11058 - "GET /api/health HTTP/1.1" 200
2025-05-08 14:12:41 - 10.6.140.91:11058 - "POST /api/admin/login HTTP/1.1" 200
2025-05-08 14:12:41 - 10.6.140.91:11058 - "OPTIONS /api/statistics/dashboard HTTP/1.1" 200
2025-05-08 14:12:41 - 10.6.140.91:11077 - "GET /api/statistics/dashboard HTTP/1.1" 200
2025-05-08 14:12:47 - 10.6.140.91:11083 - "OPTIONS /api/admin/email/templates HTTP/1.1" 200
2025-05-08 14:12:47 - 10.6.140.91:11085 - "OPTIONS /api/db/tables HTTP/1.1" 200
2025-05-08 14:12:47 - 10.6.140.91:11082 - "OPTIONS /api/admin/email/logs?skip=0&limit=10&status=&event_type= HTTP/1.1" 200
2025-05-08 14:12:47 - 10.6.140.91:11084 - "GET /api/admin/email/settings HTTP/1.1" 200
2025-05-08 14:12:47 - 10.6.140.91:11087 - "GET /api/db/tables HTTP/1.1" 200
2025-05-08 14:12:47 - 10.6.140.91:11086 - "GET /api/admin/email/logs?skip=0&limit=10&status=&event_type= HTTP/1.1" 200
2025-05-08 14:12:47 - 10.6.140.91:11088 - "GET /api/admin/email/templates HTTP/1.1" 200
2025-05-08 14:12:47 - 10.6.140.91:11087 - "OPTIONS /api/db/table/admin/columns HTTP/1.1" 200
2025-05-08 14:12:47 - 10.6.140.91:11084 - "GET /api/db/table/admin/columns HTTP/1.1" 200
2025-05-08 14:12:47 - 10.6.140.91:11084 - "OPTIONS /api/db/table/admin/rows?skip=0&limit=20 HTTP/1.1" 200
2025-05-08 14:12:47 - 10.6.140.91:11086 - "GET /api/db/table/admin/rows?skip=0&limit=20 HTTP/1.1" 200
2025-05-08 14:13:09 - 10.6.140.91:11128 - "POST /api/admin/email/settings HTTP/1.1" 200
2025-05-08 14:13:19 - 执行预约状态更新任务
2025-05-08 14:13:19 - backend.main - INFO - 执行预约状态更新任务
2025-05-08 14:13:19 - 当前时间: 2025-05-08 14:13:19.587684
2025-05-08 14:13:19 - backend.utils.status_updater - INFO - 当前时间: 2025-05-08 14:13:19.587684
2025-05-08 14:13:19 - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=14, 分=13, 秒=19
2025-05-08 14:13:19 - backend.utils.status_updater - INFO - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=14, 分=13, 秒=19
2025-05-08 14:13:19 - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 14:13:19 - backend.utils.status_updater - INFO - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 14:13:19 - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 14:13:19.587684 AND Reservation.end_datetime > 2025-05-08 14:13:19.587684
2025-05-08 14:13:19 - backend.utils.status_updater - INFO - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 14:13:19.587684 AND Reservation.end_datetime > 2025-05-08 14:13:19.587684
2025-05-08 14:13:19 - 找到 0 个应该更新为'使用中'的预约
2025-05-08 14:13:19 - backend.utils.status_updater - INFO - 找到 0 个应该更新为'使用中'的预约
2025-05-08 14:13:19 - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 14:13:19 - backend.utils.status_updater - INFO - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 14:13:19 - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 14:13:19.587684
2025-05-08 14:13:19 - backend.utils.status_updater - INFO - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 14:13:19.587684
2025-05-08 14:13:19 - 找到 0 个应该更新为'已过期'的预约
2025-05-08 14:13:19 - backend.utils.status_updater - INFO - 找到 0 个应该更新为'已过期'的预约
2025-05-08 14:13:19 - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 14:13:19 - backend.utils.status_updater - INFO - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 14:13:19 - 没有预约需要更新状态
2025-05-08 14:13:19 - backend.utils.status_updater - INFO - 没有预约需要更新状态
2025-05-08 14:13:31 - 10.6.140.91:11150 - "OPTIONS /api/admin/email/test HTTP/1.1" 200
2025-05-08 14:13:32 - 10.6.140.91:11151 - "POST /api/admin/email/test HTTP/1.1" 200
2025-05-08 14:14:19 - 执行预约状态更新任务
2025-05-08 14:14:19 - backend.main - INFO - 执行预约状态更新任务
2025-05-08 14:14:19 - 当前时间: 2025-05-08 14:14:19.606965
2025-05-08 14:14:19 - backend.utils.status_updater - INFO - 当前时间: 2025-05-08 14:14:19.606965
2025-05-08 14:14:19 - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=14, 分=14, 秒=19
2025-05-08 14:14:19 - backend.utils.status_updater - INFO - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=14, 分=14, 秒=19
2025-05-08 14:14:19 - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 14:14:19 - backend.utils.status_updater - INFO - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 14:14:19 - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 14:14:19.606965 AND Reservation.end_datetime > 2025-05-08 14:14:19.606965
2025-05-08 14:14:19 - backend.utils.status_updater - INFO - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 14:14:19.606965 AND Reservation.end_datetime > 2025-05-08 14:14:19.606965
2025-05-08 14:14:19 - 找到 0 个应该更新为'使用中'的预约
2025-05-08 14:14:19 - backend.utils.status_updater - INFO - 找到 0 个应该更新为'使用中'的预约
2025-05-08 14:14:19 - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 14:14:19 - backend.utils.status_updater - INFO - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 14:14:19 - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 14:14:19.606965
2025-05-08 14:14:19 - backend.utils.status_updater - INFO - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 14:14:19.606965
2025-05-08 14:14:19 - 找到 0 个应该更新为'已过期'的预约
2025-05-08 14:14:19 - backend.utils.status_updater - INFO - 找到 0 个应该更新为'已过期'的预约
2025-05-08 14:14:19 - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 14:14:19 - backend.utils.status_updater - INFO - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 14:14:19 - 没有预约需要更新状态
2025-05-08 14:14:19 - backend.utils.status_updater - INFO - 没有预约需要更新状态
2025-05-08 14:15:19 - 执行预约状态更新任务
2025-05-08 14:15:19 - backend.main - INFO - 执行预约状态更新任务
2025-05-08 14:15:19 - 当前时间: 2025-05-08 14:15:19.611673
2025-05-08 14:15:19 - backend.utils.status_updater - INFO - 当前时间: 2025-05-08 14:15:19.611673
2025-05-08 14:15:19 - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=14, 分=15, 秒=19
2025-05-08 14:15:19 - backend.utils.status_updater - INFO - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=14, 分=15, 秒=19
2025-05-08 14:15:19 - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 14:15:19 - backend.utils.status_updater - INFO - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 14:15:19 - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 14:15:19.611673 AND Reservation.end_datetime > 2025-05-08 14:15:19.611673
2025-05-08 14:15:19 - backend.utils.status_updater - INFO - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 14:15:19.611673 AND Reservation.end_datetime > 2025-05-08 14:15:19.611673
2025-05-08 14:15:19 - 找到 0 个应该更新为'使用中'的预约
2025-05-08 14:15:19 - backend.utils.status_updater - INFO - 找到 0 个应该更新为'使用中'的预约
2025-05-08 14:15:19 - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 14:15:19 - backend.utils.status_updater - INFO - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 14:15:19 - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 14:15:19.611673
2025-05-08 14:15:19 - backend.utils.status_updater - INFO - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 14:15:19.611673
2025-05-08 14:15:19 - 找到 0 个应该更新为'已过期'的预约
2025-05-08 14:15:19 - backend.utils.status_updater - INFO - 找到 0 个应该更新为'已过期'的预约
2025-05-08 14:15:19 - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 14:15:19 - backend.utils.status_updater - INFO - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 14:15:19 - 没有预约需要更新状态
2025-05-08 14:15:19 - backend.utils.status_updater - INFO - 没有预约需要更新状态
2025-05-08 14:16:19 - 执行预约状态更新任务
2025-05-08 14:16:19 - backend.main - INFO - 执行预约状态更新任务
2025-05-08 14:16:19 - 当前时间: 2025-05-08 14:16:19.620899
2025-05-08 14:16:19 - backend.utils.status_updater - INFO - 当前时间: 2025-05-08 14:16:19.620899
2025-05-08 14:16:19 - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=14, 分=16, 秒=19
2025-05-08 14:16:19 - backend.utils.status_updater - INFO - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=14, 分=16, 秒=19
2025-05-08 14:16:19 - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 14:16:19 - backend.utils.status_updater - INFO - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 14:16:19 - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 14:16:19.620899 AND Reservation.end_datetime > 2025-05-08 14:16:19.620899
2025-05-08 14:16:19 - backend.utils.status_updater - INFO - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 14:16:19.620899 AND Reservation.end_datetime > 2025-05-08 14:16:19.620899
2025-05-08 14:16:19 - 找到 0 个应该更新为'使用中'的预约
2025-05-08 14:16:19 - backend.utils.status_updater - INFO - 找到 0 个应该更新为'使用中'的预约
2025-05-08 14:16:19 - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 14:16:19 - backend.utils.status_updater - INFO - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 14:16:19 - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 14:16:19.620899
2025-05-08 14:16:19 - backend.utils.status_updater - INFO - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 14:16:19.620899
2025-05-08 14:16:19 - 找到 0 个应该更新为'已过期'的预约
2025-05-08 14:16:19 - backend.utils.status_updater - INFO - 找到 0 个应该更新为'已过期'的预约
2025-05-08 14:16:19 - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 14:16:19 - backend.utils.status_updater - INFO - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 14:16:19 - 没有预约需要更新状态
2025-05-08 14:16:19 - backend.utils.status_updater - INFO - 没有预约需要更新状态
2025-05-08 14:17:19 - 执行预约状态更新任务
2025-05-08 14:17:19 - backend.main - INFO - 执行预约状态更新任务
2025-05-08 14:17:19 - 当前时间: 2025-05-08 14:17:19.632306
2025-05-08 14:17:19 - backend.utils.status_updater - INFO - 当前时间: 2025-05-08 14:17:19.632306
2025-05-08 14:17:19 - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=14, 分=17, 秒=19
2025-05-08 14:17:19 - backend.utils.status_updater - INFO - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=14, 分=17, 秒=19
2025-05-08 14:17:19 - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 14:17:19 - backend.utils.status_updater - INFO - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 14:17:19 - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 14:17:19.632306 AND Reservation.end_datetime > 2025-05-08 14:17:19.632306
2025-05-08 14:17:19 - backend.utils.status_updater - INFO - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 14:17:19.632306 AND Reservation.end_datetime > 2025-05-08 14:17:19.632306
2025-05-08 14:17:19 - 找到 0 个应该更新为'使用中'的预约
2025-05-08 14:17:19 - backend.utils.status_updater - INFO - 找到 0 个应该更新为'使用中'的预约
2025-05-08 14:17:19 - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 14:17:19 - backend.utils.status_updater - INFO - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 14:17:19 - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 14:17:19.632306
2025-05-08 14:17:19 - backend.utils.status_updater - INFO - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 14:17:19.632306
2025-05-08 14:17:19 - 找到 0 个应该更新为'已过期'的预约
2025-05-08 14:17:19 - backend.utils.status_updater - INFO - 找到 0 个应该更新为'已过期'的预约
2025-05-08 14:17:19 - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 14:17:19 - backend.utils.status_updater - INFO - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 14:17:19 - 没有预约需要更新状态
2025-05-08 14:17:19 - backend.utils.status_updater - INFO - 没有预约需要更新状态
2025-05-08 14:17:44 - 应用程序启动失败: Unable to configure handler 'file'
2025-05-08 14:17:47 - 127.0.0.1:3921 - "GET / HTTP/1.1" 200
2025-05-08 14:17:48 - 127.0.0.1:3931 - "GET /favicon.ico HTTP/1.1" 404
2025-05-08 14:18:19 - 执行预约状态更新任务
2025-05-08 14:18:19 - backend.main - INFO - 执行预约状态更新任务
2025-05-08 14:18:19 - 当前时间: 2025-05-08 14:18:19.637278
2025-05-08 14:18:19 - backend.utils.status_updater - INFO - 当前时间: 2025-05-08 14:18:19.637278
2025-05-08 14:18:19 - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=14, 分=18, 秒=19
2025-05-08 14:18:19 - backend.utils.status_updater - INFO - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=14, 分=18, 秒=19
2025-05-08 14:18:19 - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 14:18:19 - backend.utils.status_updater - INFO - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 14:18:19 - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 14:18:19.637278 AND Reservation.end_datetime > 2025-05-08 14:18:19.637278
2025-05-08 14:18:19 - backend.utils.status_updater - INFO - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 14:18:19.637278 AND Reservation.end_datetime > 2025-05-08 14:18:19.637278
2025-05-08 14:18:19 - 找到 0 个应该更新为'使用中'的预约
2025-05-08 14:18:19 - backend.utils.status_updater - INFO - 找到 0 个应该更新为'使用中'的预约
2025-05-08 14:18:19 - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 14:18:19 - backend.utils.status_updater - INFO - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 14:18:19 - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 14:18:19.637278
2025-05-08 14:18:19 - backend.utils.status_updater - INFO - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 14:18:19.637278
2025-05-08 14:18:19 - 找到 0 个应该更新为'已过期'的预约
2025-05-08 14:18:19 - backend.utils.status_updater - INFO - 找到 0 个应该更新为'已过期'的预约
2025-05-08 14:18:19 - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 14:18:19 - backend.utils.status_updater - INFO - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 14:18:19 - 没有预约需要更新状态
2025-05-08 14:18:19 - backend.utils.status_updater - INFO - 没有预约需要更新状态
2025-05-08 14:19:19 - 执行预约状态更新任务
2025-05-08 14:19:19 - backend.main - INFO - 执行预约状态更新任务
2025-05-08 14:19:19 - 当前时间: 2025-05-08 14:19:19.655679
2025-05-08 14:19:19 - backend.utils.status_updater - INFO - 当前时间: 2025-05-08 14:19:19.655679
2025-05-08 14:19:19 - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=14, 分=19, 秒=19
2025-05-08 14:19:19 - backend.utils.status_updater - INFO - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=14, 分=19, 秒=19
2025-05-08 14:19:19 - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 14:19:19 - backend.utils.status_updater - INFO - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 14:19:19 - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 14:19:19.655679 AND Reservation.end_datetime > 2025-05-08 14:19:19.655679
2025-05-08 14:19:19 - backend.utils.status_updater - INFO - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 14:19:19.655679 AND Reservation.end_datetime > 2025-05-08 14:19:19.655679
2025-05-08 14:19:19 - 找到 0 个应该更新为'使用中'的预约
2025-05-08 14:19:19 - backend.utils.status_updater - INFO - 找到 0 个应该更新为'使用中'的预约
2025-05-08 14:19:19 - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 14:19:19 - backend.utils.status_updater - INFO - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 14:19:19 - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 14:19:19.655679
2025-05-08 14:19:19 - backend.utils.status_updater - INFO - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 14:19:19.655679
2025-05-08 14:19:19 - 找到 0 个应该更新为'已过期'的预约
2025-05-08 14:19:19 - backend.utils.status_updater - INFO - 找到 0 个应该更新为'已过期'的预约
2025-05-08 14:19:19 - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 14:19:19 - backend.utils.status_updater - INFO - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 14:19:19 - 没有预约需要更新状态
2025-05-08 14:19:19 - backend.utils.status_updater - INFO - 没有预约需要更新状态
2025-05-08 14:20:19 - 执行预约状态更新任务
2025-05-08 14:20:19 - backend.main - INFO - 执行预约状态更新任务
2025-05-08 14:20:19 - 当前时间: 2025-05-08 14:20:19.670423
2025-05-08 14:20:19 - backend.utils.status_updater - INFO - 当前时间: 2025-05-08 14:20:19.670423
2025-05-08 14:20:19 - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=14, 分=20, 秒=19
2025-05-08 14:20:19 - backend.utils.status_updater - INFO - 当前时间详细信息: 年=2025, 月=5, 日=8, 时=14, 分=20, 秒=19
2025-05-08 14:20:19 - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 14:20:19 - backend.utils.status_updater - INFO - 执行查询：查找应该更新为'使用中'的预约
2025-05-08 14:20:19 - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 14:20:19.670423 AND Reservation.end_datetime > 2025-05-08 14:20:19.670423
2025-05-08 14:20:19 - backend.utils.status_updater - INFO - SQL查询条件: Reservation.status == 'confirmed' AND Reservation.start_datetime <= 2025-05-08 14:20:19.670423 AND Reservation.end_datetime > 2025-05-08 14:20:19.670423
2025-05-08 14:20:19 - 找到 0 个应该更新为'使用中'的预约
2025-05-08 14:20:19 - backend.utils.status_updater - INFO - 找到 0 个应该更新为'使用中'的预约
2025-05-08 14:20:19 - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 14:20:19 - backend.utils.status_updater - INFO - 执行查询：查找应该更新为'已过期'的预约
2025-05-08 14:20:19 - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 14:20:19.670423
2025-05-08 14:20:19 - backend.utils.status_updater - INFO - SQL查询条件: Reservation.status.in_(['confirmed', 'in_use']) AND Reservation.end_datetime <= 2025-05-08 14:20:19.670423
2025-05-08 14:20:19 - 找到 0 个应该更新为'已过期'的预约
2025-05-08 14:20:19 - backend.utils.status_updater - INFO - 找到 0 个应该更新为'已过期'的预约
2025-05-08 14:20:19 - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 14:20:19 - backend.utils.status_updater - INFO - ORM更新结果: 使用中=0条, 已过期=0条
2025-05-08 14:20:19 - 没有预约需要更新状态
2025-05-08 14:20:19 - backend.utils.status_updater - INFO - 没有预约需要更新状态
