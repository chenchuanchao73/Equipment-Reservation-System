{"ast":null,"code":"import Vue from 'vue';\nimport App from './App.vue';\nimport router from './router';\nimport store from './store';\nimport ElementUI from 'element-ui';\nimport 'element-ui/lib/theme-chalk/index.css';\nimport VueI18n from 'vue-i18n';\nimport axios from 'axios';\nimport enLocale from 'element-ui/lib/locale/lang/en';\nimport zhLocale from 'element-ui/lib/locale/lang/zh-CN';\n\n// 导入权限控制\nimport './router/permission';\n\n// 导入富文本编辑器\n// 暂时注释掉富文本编辑器相关代码\n// import VueQuillEditor from 'vue-quill-editor'\n// import 'quill/dist/quill.core.css'\n// import 'quill/dist/quill.snow.css'\n// import 'quill/dist/quill.bubble.css'\n\n// 导入语言包\nimport zhCN from './locales/zh-CN';\nimport en from './locales/en';\n\n// 使用插件\nVue.use(VueI18n);\n// Vue.use(VueQuillEditor) // 暂时注释掉\n\n// 配置axios\naxios.defaults.baseURL = process.env.VUE_APP_API_URL || 'http://localhost:8000';\n// 增加超时时间到 30 秒\naxios.defaults.timeout = 30000;\n// 添加调试日志\nconsole.log('API Base URL:', axios.defaults.baseURL);\naxios.interceptors.request.use(config => {\n  // 从localStorage获取token\n  const token = localStorage.getItem('token');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n}, error => {\n  return Promise.reject(error);\n});\naxios.interceptors.response.use(response => {\n  return response;\n}, error => {\n  if (error.response) {\n    // 处理401错误（会话过期）\n    if (error.response.status === 401) {\n      // 显示友好的提示信息\n      Vue.prototype.$message({\n        message: '您的会话已过期，请重新登录',\n        type: 'warning',\n        duration: 3000\n      });\n      store.dispatch('logout');\n      // 避免重复导航到登录页\n      if (router.currentRoute.path !== '/admin/login') {\n        router.push('/admin/login');\n      }\n    }\n  }\n  return Promise.reject(error);\n});\nVue.prototype.$http = axios;\n\n// 配置i18n\nconst i18n = new VueI18n({\n  locale: store.state.language || 'zh-CN',\n  messages: {\n    'zh-CN': {\n      ...zhCN,\n      el: zhLocale.el\n    },\n    'en': {\n      ...en,\n      el: enLocale.el\n    }\n  },\n  silentTranslationWarn: true\n});\n\n// 同步语言设置\nstore.watch(state => state.language, newLang => {\n  i18n.locale = newLang;\n  document.querySelector('html').setAttribute('lang', newLang);\n  console.log('Language changed to:', newLang);\n});\n\n// 使用Element UI\nVue.use(ElementUI, {\n  i18n: (key, value) => i18n.t(key, value)\n});\n\n// 导入日期工具函数\nimport { formatDate, convertToBeijingTime } from './utils/date';\n\n// 全局过滤器\nVue.filter('dateFormat', function (value, format = 'YYYY-MM-DD HH:mm') {\n  if (!value) return '';\n\n  // 使用日期工具函数，自动转换为北京时间\n  return formatDate(value, format, true);\n});\nVue.config.productionTip = false;\nnew Vue({\n  router,\n  store,\n  i18n,\n  render: h => h(App)\n}).$mount('#app');","map":{"version":3,"names":["Vue","App","router","store","ElementUI","VueI18n","axios","enLocale","zhLocale","zhCN","en","use","defaults","baseURL","process","env","VUE_APP_API_URL","timeout","console","log","interceptors","request","config","token","localStorage","getItem","headers","Authorization","error","Promise","reject","response","status","prototype","$message","message","type","duration","dispatch","currentRoute","path","push","$http","i18n","locale","state","language","messages","el","silentTranslationWarn","watch","newLang","document","querySelector","setAttribute","key","value","t","formatDate","convertToBeijingTime","filter","format","productionTip","render","h","$mount"],"sources":["D:/Equipment-Reservation-System-main/frontend/src/main.js"],"sourcesContent":["import Vue from 'vue'\nimport App from './App.vue'\nimport router from './router'\nimport store from './store'\nimport ElementUI from 'element-ui'\nimport 'element-ui/lib/theme-chalk/index.css'\nimport VueI18n from 'vue-i18n'\nimport axios from 'axios'\nimport enLocale from 'element-ui/lib/locale/lang/en'\nimport zhLocale from 'element-ui/lib/locale/lang/zh-CN'\n\n\n// 导入权限控制\nimport './router/permission'\n\n// 导入富文本编辑器\n// 暂时注释掉富文本编辑器相关代码\n// import VueQuillEditor from 'vue-quill-editor'\n// import 'quill/dist/quill.core.css'\n// import 'quill/dist/quill.snow.css'\n// import 'quill/dist/quill.bubble.css'\n\n// 导入语言包\nimport zhCN from './locales/zh-CN'\nimport en from './locales/en'\n\n// 使用插件\nVue.use(VueI18n)\n// Vue.use(VueQuillEditor) // 暂时注释掉\n\n// 配置axios\naxios.defaults.baseURL = process.env.VUE_APP_API_URL || 'http://localhost:8000'\n// 增加超时时间到 30 秒\naxios.defaults.timeout = 30000\n// 添加调试日志\nconsole.log('API Base URL:', axios.defaults.baseURL)\naxios.interceptors.request.use(config => {\n  // 从localStorage获取token\n  const token = localStorage.getItem('token')\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`\n  }\n  return config\n}, error => {\n  return Promise.reject(error)\n})\n\naxios.interceptors.response.use(response => {\n  return response\n}, error => {\n  if (error.response) {\n    // 处理401错误（会话过期）\n    if (error.response.status === 401) {\n      // 显示友好的提示信息\n      Vue.prototype.$message({\n        message: '您的会话已过期，请重新登录',\n        type: 'warning',\n        duration: 3000\n      })\n\n      store.dispatch('logout')\n      // 避免重复导航到登录页\n      if (router.currentRoute.path !== '/admin/login') {\n        router.push('/admin/login')\n      }\n    }\n  }\n  return Promise.reject(error)\n})\n\nVue.prototype.$http = axios\n\n// 配置i18n\nconst i18n = new VueI18n({\n  locale: store.state.language || 'zh-CN',\n  messages: {\n    'zh-CN': {\n      ...zhCN,\n      el: zhLocale.el\n    },\n    'en': {\n      ...en,\n      el: enLocale.el\n    }\n  },\n  silentTranslationWarn: true\n})\n\n// 同步语言设置\nstore.watch(\n  state => state.language,\n  (newLang) => {\n    i18n.locale = newLang\n    document.querySelector('html').setAttribute('lang', newLang)\n    console.log('Language changed to:', newLang)\n  }\n)\n\n// 使用Element UI\nVue.use(ElementUI, {\n  i18n: (key, value) => i18n.t(key, value)\n})\n\n// 导入日期工具函数\nimport { formatDate, convertToBeijingTime } from './utils/date'\n\n// 全局过滤器\nVue.filter('dateFormat', function(value, format = 'YYYY-MM-DD HH:mm') {\n  if (!value) return ''\n\n  // 使用日期工具函数，自动转换为北京时间\n  return formatDate(value, format, true)\n})\n\nVue.config.productionTip = false\n\nnew Vue({\n  router,\n  store,\n  i18n,\n  render: h => h(App)\n}).$mount('#app')\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}