{"ast":null,"code":"import { recurringReservationApi, reservationApi } from '@/api';\nimport { isReservationExpired } from '@/utils/date';\nexport default {\n  name: 'RecurringReservationDetail',\n  data() {\n    return {\n      recurringReservationId: null,\n      recurringReservation: null,\n      childReservations: [],\n      loading: true,\n      childReservationsLoading: false,\n      error: false,\n      errorMessage: '',\n      includePastReservations: false,\n      cancelDialogVisible: false,\n      cancelFutureOnly: 1,\n      userEmail: '',\n      cancelLoading: false\n    };\n  },\n  props: {\n    id: {\n      type: [String, Number],\n      required: false\n    }\n  },\n  created() {\n    // 优先使用props中的id，如果没有则使用路由参数\n    this.recurringReservationId = this.id || this.$route.params.id;\n    console.log('Recurring reservation ID:', this.recurringReservationId);\n    this.loadRecurringReservation();\n  },\n  methods: {\n    // 加载循环预约详情\n    async loadRecurringReservation() {\n      this.loading = true;\n      this.error = false;\n      try {\n        const response = await recurringReservationApi.getRecurringReservation(this.recurringReservationId);\n        if (response.data.success) {\n          this.recurringReservation = response.data.data;\n          this.userEmail = this.recurringReservation.user_email || '';\n          this.loadChildReservations();\n        } else {\n          this.error = true;\n          this.errorMessage = response.data.message || this.$t('reservation.failedToLoadReservation');\n        }\n      } catch (error) {\n        console.error('Failed to load recurring reservation:', error);\n        this.error = true;\n        this.errorMessage = error.response?.data?.detail || this.$t('reservation.failedToLoadReservation');\n      } finally {\n        this.loading = false;\n      }\n    },\n    // 加载子预约列表\n    async loadChildReservations() {\n      this.childReservationsLoading = true;\n      try {\n        const response = await recurringReservationApi.getChildReservations(this.recurringReservationId, this.includePastReservations ? 1 : 0);\n        if (response.data.success) {\n          this.childReservations = response.data.reservations || [];\n        } else {\n          this.$message.error(response.data.message || this.$t('reservation.failedToLoadChildReservations'));\n        }\n      } catch (error) {\n        console.error('Failed to load child reservations:', error);\n        this.$message.error(this.$t('reservation.failedToLoadChildReservations'));\n      } finally {\n        this.childReservationsLoading = false;\n      }\n    },\n    // 查看子预约详情\n    viewChildReservation(reservation) {\n      this.$router.push(`/reservation/${reservation.reservation_code}`);\n    },\n    // 取消子预约\n    async cancelChildReservation(reservation) {\n      try {\n        const result = await this.$confirm(this.$t('reservation.cancelConfirmation'), this.$t('common.warning'), {\n          confirmButtonText: this.$t('common.confirm'),\n          cancelButtonText: this.$t('common.cancel'),\n          type: 'warning'\n        });\n        if (result === 'confirm') {\n          const response = await reservationApi.cancelReservation(reservation.reservation_code, {\n            user_email: this.recurringReservation.user_email\n          });\n          if (response.data.success) {\n            this.$message.success(this.$t('reservation.cancelSuccess'));\n            this.loadChildReservations();\n          } else {\n            this.$message.error(response.data.message || this.$t('reservation.cancelFailed'));\n          }\n        }\n      } catch (error) {\n        if (error !== 'cancel') {\n          console.error('Failed to cancel reservation:', error);\n          this.$message.error(this.$t('reservation.cancelFailed'));\n        }\n      }\n    },\n    // 显示取消循环预约对话框\n    showCancelDialog() {\n      this.cancelDialogVisible = true;\n    },\n    // 确认取消循环预约\n    async confirmCancel() {\n      this.cancelLoading = true;\n      try {\n        const response = await recurringReservationApi.cancelRecurringReservation(this.recurringReservationId, this.cancelFutureOnly, this.userEmail || null);\n        if (response.data.success) {\n          this.$message.success(this.$t('reservation.cancelSuccess'));\n          this.cancelDialogVisible = false;\n          this.loadRecurringReservation();\n        } else {\n          this.$message.error(response.data.message || this.$t('reservation.cancelFailed'));\n        }\n      } catch (error) {\n        console.error('Failed to cancel recurring reservation:', error);\n        this.$message.error(this.$t('reservation.cancelFailed'));\n      } finally {\n        this.cancelLoading = false;\n      }\n    },\n    // 格式化日期\n    formatDate(dateStr) {\n      if (!dateStr) return '';\n      const date = new Date(dateStr);\n      return `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}-${String(date.getDate()).padStart(2, '0')}`;\n    },\n    // 格式化时间\n    formatTime(timeStr) {\n      if (!timeStr) return '';\n      return timeStr.substring(0, 5);\n    },\n    // 格式化日期时间\n    formatDateTime(row, column, cellValue) {\n      if (!cellValue) return '';\n      const date = new Date(cellValue);\n      return `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}-${String(date.getDate()).padStart(2, '0')} ${String(date.getHours()).padStart(2, '0')}:${String(date.getMinutes()).padStart(2, '0')}`;\n    },\n    // 格式化星期几\n    formatDaysOfWeek(days) {\n      if (!days || days.length === 0) return '';\n      const dayNames = [this.$t('reservation.sunday'), this.$t('reservation.monday'), this.$t('reservation.tuesday'), this.$t('reservation.wednesday'), this.$t('reservation.thursday'), this.$t('reservation.friday'), this.$t('reservation.saturday')];\n      return days.map(day => dayNames[day]).join(', ');\n    },\n    // 格式化每月几号\n    formatDaysOfMonth(days) {\n      if (!days || days.length === 0) return '';\n      return days.join(', ');\n    },\n    // 获取循环模式文本\n    getPatternText(pattern) {\n      const patterns = {\n        'daily': this.$t('reservation.daily'),\n        'weekly': this.$t('reservation.weekly'),\n        'monthly': this.$t('reservation.monthly'),\n        'custom': this.$t('reservation.custom')\n      };\n      return patterns[pattern] || pattern;\n    },\n    // 获取循环预约状态类型\n    getStatusType(reservation) {\n      if (reservation.status === 'cancelled') {\n        return 'danger';\n      }\n      return 'success';\n    },\n    // 获取循环预约状态文本\n    getStatusText(reservation) {\n      if (reservation.status === 'cancelled') {\n        return this.$t('reservation.cancelled');\n      }\n      return this.$t('reservation.active');\n    },\n    // 获取子预约状态类型\n    getChildStatusType(reservation) {\n      // 如果预约已取消，返回红色\n      if (reservation.status === 'cancelled') {\n        return 'danger';\n      }\n\n      // 如果预约已过期，返回橙色\n      if (isReservationExpired(reservation.end_datetime)) {\n        return 'warning';\n      }\n\n      // 如果预约正在进行中，返回蓝色\n      const now = new Date();\n      const start = new Date(reservation.start_datetime);\n      const end = new Date(reservation.end_datetime);\n      if (now >= start && now <= end) {\n        return 'primary';\n      }\n\n      // 如果预约已确认且未开始，返回绿色\n      return 'success';\n    },\n    // 获取子预约状态文本\n    getChildStatusText(reservation) {\n      // 如果预约已取消，显示\"已取消\"\n      if (reservation.status === 'cancelled') {\n        return this.$t('reservation.cancelled');\n      }\n\n      // 如果预约已过期，显示\"已过期\"\n      if (isReservationExpired(reservation.end_datetime)) {\n        return this.$t('reservation.expired');\n      }\n\n      // 如果预约正在进行中，显示\"进行中\"\n      const now = new Date();\n      const start = new Date(reservation.start_datetime);\n      const end = new Date(reservation.end_datetime);\n      if (now >= start && now <= end) {\n        return this.$t('reservation.ongoing');\n      }\n\n      // 如果预约已确认且未开始，显示\"已确认\"\n      return this.$t('reservation.confirmed');\n    }\n  }\n};","map":{"version":3,"names":["recurringReservationApi","reservationApi","isReservationExpired","name","data","recurringReservationId","recurringReservation","childReservations","loading","childReservationsLoading","error","errorMessage","includePastReservations","cancelDialogVisible","cancelFutureOnly","userEmail","cancelLoading","props","id","type","String","Number","required","created","$route","params","console","log","loadRecurringReservation","methods","response","getRecurringReservation","success","user_email","loadChildReservations","message","$t","detail","getChildReservations","reservations","$message","viewChildReservation","reservation","$router","push","reservation_code","cancelChildReservation","result","$confirm","confirmButtonText","cancelButtonText","cancelReservation","showCancelDialog","confirmCancel","cancelRecurringReservation","formatDate","dateStr","date","Date","getFullYear","getMonth","padStart","getDate","formatTime","timeStr","substring","formatDateTime","row","column","cellValue","getHours","getMinutes","formatDaysOfWeek","days","length","dayNames","map","day","join","formatDaysOfMonth","getPatternText","pattern","patterns","getStatusType","status","getStatusText","getChildStatusType","end_datetime","now","start","start_datetime","end","getChildStatusText"],"sources":["src/views/reservation/RecurringReservationDetail.vue"],"sourcesContent":["<template>\n  <div class=\"recurring-reservation-detail\">\n    <div v-if=\"loading\" class=\"loading-container\">\n      <el-skeleton :rows=\"10\" animated />\n    </div>\n\n    <div v-else-if=\"error\" class=\"error-container\">\n      <el-result\n        icon=\"error\"\n        :title=\"$t('common.error')\"\n        :sub-title=\"errorMessage\"\n      >\n        <template #extra>\n          <el-button type=\"primary\" @click=\"$router.push('/')\">{{ $t('common.backToHome') }}</el-button>\n        </template>\n      </el-result>\n    </div>\n\n    <div v-else class=\"content-container\">\n      <div class=\"header-actions\">\n        <el-button icon=\"el-icon-back\" @click=\"$router.go(-1)\">{{ $t('common.back') }}</el-button>\n        <el-button type=\"danger\" @click=\"showCancelDialog\" :disabled=\"recurringReservation.status === 'cancelled'\">\n          {{ $t('reservation.cancel') }}\n        </el-button>\n      </div>\n\n      <!-- 循环预约信息卡片 -->\n      <el-card class=\"reservation-card\" shadow=\"hover\">\n        <div slot=\"header\" class=\"card-header\">\n          <span>{{ $t('reservation.recurringReservationDetails') }}</span>\n          <el-tag :type=\"getStatusType(recurringReservation)\" size=\"medium\">\n            {{ getStatusText(recurringReservation) }}\n          </el-tag>\n        </div>\n\n        <div class=\"reservation-info\">\n          <div class=\"info-section\">\n            <h3>预约信息</h3>\n            <div class=\"info-row\">\n              <span class=\"info-label\">{{ $t('reservation.code') }}:</span>\n              <span class=\"info-value\">{{ recurringReservation.reservation_code }}</span>\n            </div>\n            <div class=\"info-row\">\n              <span class=\"info-label\">{{ $t('reservation.pattern') }}:</span>\n              <span class=\"info-value\">{{ getPatternText(recurringReservation.pattern_type) }}</span>\n            </div>\n            <div class=\"info-row\">\n              <span class=\"info-label\">{{ $t('reservation.dateRange') }}:</span>\n              <span class=\"info-value\">{{ formatDate(recurringReservation.start_date) }} - {{ formatDate(recurringReservation.end_date) }}</span>\n            </div>\n            <div class=\"info-row\">\n              <span class=\"info-label\">{{ $t('reservation.timeRange') }}:</span>\n              <span class=\"info-value\">{{ formatTime(recurringReservation.start_time) }} - {{ formatTime(recurringReservation.end_time) }}</span>\n            </div>\n            <div class=\"info-row\" v-if=\"recurringReservation.days_of_week && recurringReservation.days_of_week.length > 0\">\n              <span class=\"info-label\">{{ $t('reservation.daysOfWeek') }}:</span>\n              <span class=\"info-value\">{{ formatDaysOfWeek(recurringReservation.days_of_week) }}</span>\n            </div>\n            <div class=\"info-row\" v-if=\"recurringReservation.days_of_month && recurringReservation.days_of_month.length > 0\">\n              <span class=\"info-label\">{{ $t('reservation.daysOfMonth') }}:</span>\n              <span class=\"info-value\">{{ formatDaysOfMonth(recurringReservation.days_of_month) }}</span>\n            </div>\n            <div class=\"info-row\">\n              <span class=\"info-label\">{{ $t('reservation.purpose') }}:</span>\n              <span class=\"info-value\">{{ recurringReservation.purpose || $t('common.notProvided') }}</span>\n            </div>\n          </div>\n\n          <div class=\"info-section\">\n            <h3>{{ $t('equipment.info') }}</h3>\n            <div class=\"info-row\">\n              <span class=\"info-label\">{{ $t('equipment.name') }}:</span>\n              <span class=\"info-value\">{{ recurringReservation.equipment_name }}</span>\n            </div>\n            <div class=\"info-row\">\n              <span class=\"info-label\">{{ $t('equipment.category') }}:</span>\n              <span class=\"info-value\">{{ recurringReservation.equipment_category }}</span>\n            </div>\n            <div class=\"info-row\">\n              <span class=\"info-label\">{{ $t('equipment.location') }}:</span>\n              <span class=\"info-value\">{{ recurringReservation.equipment_location || $t('common.notProvided') }}</span>\n            </div>\n          </div>\n\n          <div class=\"info-section\">\n            <h3>{{ $t('reservation.userInfo') }}</h3>\n            <div class=\"info-row\">\n              <span class=\"info-label\">{{ $t('reservation.userName') }}:</span>\n              <span class=\"info-value\">{{ recurringReservation.user_name }}</span>\n            </div>\n            <div class=\"info-row\">\n              <span class=\"info-label\">{{ $t('reservation.userDepartment') }}:</span>\n              <span class=\"info-value\">{{ recurringReservation.user_department }}</span>\n            </div>\n            <div class=\"info-row\">\n              <span class=\"info-label\">{{ $t('reservation.userContact') }}:</span>\n              <span class=\"info-value\">{{ recurringReservation.user_contact }}</span>\n            </div>\n            <div class=\"info-row\" v-if=\"recurringReservation.user_email\">\n              <span class=\"info-label\">{{ $t('reservation.userEmail') }}:</span>\n              <span class=\"info-value\">{{ recurringReservation.user_email }}</span>\n            </div>\n          </div>\n        </div>\n      </el-card>\n\n      <!-- 子预约列表 -->\n      <el-card class=\"child-reservations-card\" shadow=\"hover\">\n        <div slot=\"header\" class=\"card-header\">\n          <span>{{ $t('reservation.childReservations') }}</span>\n          <el-switch\n            v-model=\"includePastReservations\"\n            :active-text=\"$t('reservation.includePast')\"\n            @change=\"loadChildReservations\"\n          ></el-switch>\n        </div>\n\n        <div v-if=\"childReservationsLoading\" class=\"loading-container\">\n          <el-skeleton :rows=\"5\" animated />\n        </div>\n\n        <div v-else-if=\"childReservations.length === 0\" class=\"empty-state\">\n          <el-empty :description=\"$t('reservation.noChildReservations')\"></el-empty>\n        </div>\n\n        <div v-else class=\"child-reservations-list\">\n          <el-table\n            :data=\"childReservations\"\n            style=\"width: 100%\"\n            border\n            stripe\n          >\n            <el-table-column\n              prop=\"reservation_code\"\n              :label=\"$t('reservation.code')\"\n              width=\"120\"\n            ></el-table-column>\n            <el-table-column\n              prop=\"start_datetime\"\n              :label=\"$t('reservation.startTime')\"\n              width=\"180\"\n              :formatter=\"formatDateTime\"\n            ></el-table-column>\n            <el-table-column\n              prop=\"end_datetime\"\n              :label=\"$t('reservation.endTime')\"\n              width=\"180\"\n              :formatter=\"formatDateTime\"\n            ></el-table-column>\n            <el-table-column\n              prop=\"status\"\n              :label=\"$t('reservation.status')\"\n              width=\"120\"\n            >\n              <template slot-scope=\"scope\">\n                <el-tag :type=\"getChildStatusType(scope.row)\" size=\"medium\">\n                  {{ getChildStatusText(scope.row) }}\n                </el-tag>\n              </template>\n            </el-table-column>\n            <el-table-column\n              :label=\"$t('common.actions')\"\n              width=\"150\"\n            >\n              <template slot-scope=\"scope\">\n                <el-button\n                  size=\"mini\"\n                  type=\"primary\"\n                  @click=\"viewChildReservation(scope.row)\"\n                  icon=\"el-icon-view\"\n                  circle\n                ></el-button>\n                <el-button\n                  size=\"mini\"\n                  type=\"danger\"\n                  @click=\"cancelChildReservation(scope.row)\"\n                  :disabled=\"scope.row.status === 'cancelled'\"\n                  icon=\"el-icon-delete\"\n                  circle\n                ></el-button>\n              </template>\n            </el-table-column>\n          </el-table>\n        </div>\n      </el-card>\n    </div>\n\n    <!-- 取消循环预约对话框 -->\n    <el-dialog\n      :title=\"$t('reservation.cancelRecurringReservation')\"\n      :visible.sync=\"cancelDialogVisible\"\n      width=\"500px\"\n    >\n      <div class=\"cancel-options\">\n        <p>{{ $t('reservation.cancelRecurringReservationConfirm') }}</p>\n        <el-radio-group v-model=\"cancelFutureOnly\">\n          <el-radio :label=\"1\">{{ $t('reservation.cancelFutureOnly') }}</el-radio>\n          <el-radio :label=\"0\">{{ $t('reservation.cancelAll') }}</el-radio>\n        </el-radio-group>\n        <div class=\"email-input\">\n          <el-form-item :label=\"$t('reservation.userEmail')\" prop=\"userEmail\">\n            <el-input v-model=\"userEmail\" :placeholder=\"$t('reservation.emailForConfirmation')\"></el-input>\n          </el-form-item>\n        </div>\n      </div>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"cancelDialogVisible = false\">{{ $t('common.cancel') }}</el-button>\n        <el-button type=\"danger\" @click=\"confirmCancel\" :loading=\"cancelLoading\">{{ $t('common.confirm') }}</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { recurringReservationApi, reservationApi } from '@/api'\nimport { isReservationExpired } from '@/utils/date'\n\nexport default {\n  name: 'RecurringReservationDetail',\n\n  data() {\n    return {\n      recurringReservationId: null,\n      recurringReservation: null,\n      childReservations: [],\n      loading: true,\n      childReservationsLoading: false,\n      error: false,\n      errorMessage: '',\n      includePastReservations: false,\n      cancelDialogVisible: false,\n      cancelFutureOnly: 1,\n      userEmail: '',\n      cancelLoading: false\n    }\n  },\n\n  props: {\n    id: {\n      type: [String, Number],\n      required: false\n    }\n  },\n\n  created() {\n    // 优先使用props中的id，如果没有则使用路由参数\n    this.recurringReservationId = this.id || this.$route.params.id\n    console.log('Recurring reservation ID:', this.recurringReservationId)\n    this.loadRecurringReservation()\n  },\n\n  methods: {\n    // 加载循环预约详情\n    async loadRecurringReservation() {\n      this.loading = true\n      this.error = false\n\n      try {\n        const response = await recurringReservationApi.getRecurringReservation(this.recurringReservationId)\n\n        if (response.data.success) {\n          this.recurringReservation = response.data.data\n          this.userEmail = this.recurringReservation.user_email || ''\n          this.loadChildReservations()\n        } else {\n          this.error = true\n          this.errorMessage = response.data.message || this.$t('reservation.failedToLoadReservation')\n        }\n      } catch (error) {\n        console.error('Failed to load recurring reservation:', error)\n        this.error = true\n        this.errorMessage = error.response?.data?.detail || this.$t('reservation.failedToLoadReservation')\n      } finally {\n        this.loading = false\n      }\n    },\n\n    // 加载子预约列表\n    async loadChildReservations() {\n      this.childReservationsLoading = true\n\n      try {\n        const response = await recurringReservationApi.getChildReservations(\n          this.recurringReservationId,\n          this.includePastReservations ? 1 : 0\n        )\n\n        if (response.data.success) {\n          this.childReservations = response.data.reservations || []\n        } else {\n          this.$message.error(response.data.message || this.$t('reservation.failedToLoadChildReservations'))\n        }\n      } catch (error) {\n        console.error('Failed to load child reservations:', error)\n        this.$message.error(this.$t('reservation.failedToLoadChildReservations'))\n      } finally {\n        this.childReservationsLoading = false\n      }\n    },\n\n    // 查看子预约详情\n    viewChildReservation(reservation) {\n      this.$router.push(`/reservation/${reservation.reservation_code}`)\n    },\n\n    // 取消子预约\n    async cancelChildReservation(reservation) {\n      try {\n        const result = await this.$confirm(\n          this.$t('reservation.cancelConfirmation'),\n          this.$t('common.warning'),\n          {\n            confirmButtonText: this.$t('common.confirm'),\n            cancelButtonText: this.$t('common.cancel'),\n            type: 'warning'\n          }\n        )\n\n        if (result === 'confirm') {\n          const response = await reservationApi.cancelReservation(reservation.reservation_code, {\n            user_email: this.recurringReservation.user_email\n          })\n\n          if (response.data.success) {\n            this.$message.success(this.$t('reservation.cancelSuccess'))\n            this.loadChildReservations()\n          } else {\n            this.$message.error(response.data.message || this.$t('reservation.cancelFailed'))\n          }\n        }\n      } catch (error) {\n        if (error !== 'cancel') {\n          console.error('Failed to cancel reservation:', error)\n          this.$message.error(this.$t('reservation.cancelFailed'))\n        }\n      }\n    },\n\n    // 显示取消循环预约对话框\n    showCancelDialog() {\n      this.cancelDialogVisible = true\n    },\n\n    // 确认取消循环预约\n    async confirmCancel() {\n      this.cancelLoading = true\n\n      try {\n        const response = await recurringReservationApi.cancelRecurringReservation(\n          this.recurringReservationId,\n          this.cancelFutureOnly,\n          this.userEmail || null\n        )\n\n        if (response.data.success) {\n          this.$message.success(this.$t('reservation.cancelSuccess'))\n          this.cancelDialogVisible = false\n          this.loadRecurringReservation()\n        } else {\n          this.$message.error(response.data.message || this.$t('reservation.cancelFailed'))\n        }\n      } catch (error) {\n        console.error('Failed to cancel recurring reservation:', error)\n        this.$message.error(this.$t('reservation.cancelFailed'))\n      } finally {\n        this.cancelLoading = false\n      }\n    },\n\n    // 格式化日期\n    formatDate(dateStr) {\n      if (!dateStr) return ''\n      const date = new Date(dateStr)\n      return `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}-${String(date.getDate()).padStart(2, '0')}`\n    },\n\n    // 格式化时间\n    formatTime(timeStr) {\n      if (!timeStr) return ''\n      return timeStr.substring(0, 5)\n    },\n\n    // 格式化日期时间\n    formatDateTime(row, column, cellValue) {\n      if (!cellValue) return ''\n      const date = new Date(cellValue)\n      return `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}-${String(date.getDate()).padStart(2, '0')} ${String(date.getHours()).padStart(2, '0')}:${String(date.getMinutes()).padStart(2, '0')}`\n    },\n\n    // 格式化星期几\n    formatDaysOfWeek(days) {\n      if (!days || days.length === 0) return ''\n\n      const dayNames = [\n        this.$t('reservation.sunday'),\n        this.$t('reservation.monday'),\n        this.$t('reservation.tuesday'),\n        this.$t('reservation.wednesday'),\n        this.$t('reservation.thursday'),\n        this.$t('reservation.friday'),\n        this.$t('reservation.saturday')\n      ]\n\n      return days.map(day => dayNames[day]).join(', ')\n    },\n\n    // 格式化每月几号\n    formatDaysOfMonth(days) {\n      if (!days || days.length === 0) return ''\n      return days.join(', ')\n    },\n\n    // 获取循环模式文本\n    getPatternText(pattern) {\n      const patterns = {\n        'daily': this.$t('reservation.daily'),\n        'weekly': this.$t('reservation.weekly'),\n        'monthly': this.$t('reservation.monthly'),\n        'custom': this.$t('reservation.custom')\n      }\n      return patterns[pattern] || pattern\n    },\n\n    // 获取循环预约状态类型\n    getStatusType(reservation) {\n      if (reservation.status === 'cancelled') {\n        return 'danger'\n      }\n      return 'success'\n    },\n\n    // 获取循环预约状态文本\n    getStatusText(reservation) {\n      if (reservation.status === 'cancelled') {\n        return this.$t('reservation.cancelled')\n      }\n      return this.$t('reservation.active')\n    },\n\n    // 获取子预约状态类型\n    getChildStatusType(reservation) {\n      // 如果预约已取消，返回红色\n      if (reservation.status === 'cancelled') {\n        return 'danger'\n      }\n\n      // 如果预约已过期，返回橙色\n      if (isReservationExpired(reservation.end_datetime)) {\n        return 'warning'\n      }\n\n      // 如果预约正在进行中，返回蓝色\n      const now = new Date()\n      const start = new Date(reservation.start_datetime)\n      const end = new Date(reservation.end_datetime)\n      if (now >= start && now <= end) {\n        return 'primary'\n      }\n\n      // 如果预约已确认且未开始，返回绿色\n      return 'success'\n    },\n\n    // 获取子预约状态文本\n    getChildStatusText(reservation) {\n      // 如果预约已取消，显示\"已取消\"\n      if (reservation.status === 'cancelled') {\n        return this.$t('reservation.cancelled')\n      }\n\n      // 如果预约已过期，显示\"已过期\"\n      if (isReservationExpired(reservation.end_datetime)) {\n        return this.$t('reservation.expired')\n      }\n\n      // 如果预约正在进行中，显示\"进行中\"\n      const now = new Date()\n      const start = new Date(reservation.start_datetime)\n      const end = new Date(reservation.end_datetime)\n      if (now >= start && now <= end) {\n        return this.$t('reservation.ongoing')\n      }\n\n      // 如果预约已确认且未开始，显示\"已确认\"\n      return this.$t('reservation.confirmed')\n    }\n  }\n}\n</script>\n\n<style scoped>\n.recurring-reservation-detail {\n  max-width: 1000px;\n  margin: 0 auto;\n  padding: 20px;\n}\n\n.loading-container,\n.error-container {\n  margin: 40px 0;\n}\n\n.header-actions {\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 20px;\n}\n\n.reservation-card,\n.child-reservations-card {\n  margin-bottom: 30px;\n}\n\n.card-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.reservation-info {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\n  gap: 20px;\n}\n\n.info-section {\n  margin-bottom: 20px;\n}\n\n.info-section h3 {\n  margin-top: 0;\n  margin-bottom: 15px;\n  font-size: 16px;\n  color: #303133;\n  border-bottom: 1px solid #EBEEF5;\n  padding-bottom: 10px;\n}\n\n.info-row {\n  margin-bottom: 10px;\n  line-height: 1.5;\n}\n\n.info-label {\n  font-weight: bold;\n  color: #606266;\n  margin-right: 5px;\n}\n\n.info-value {\n  color: #303133;\n}\n\n.empty-state {\n  padding: 30px 0;\n}\n\n.cancel-options {\n  padding: 0 20px;\n}\n\n.cancel-options p {\n  margin-bottom: 20px;\n  color: #606266;\n}\n\n.email-input {\n  margin-top: 20px;\n}\n\n.child-reservations-list {\n  margin-top: 20px;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}