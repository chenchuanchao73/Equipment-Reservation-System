{"ast":null,"code":"import Vue from 'vue';\nimport VueRouter from 'vue-router';\nimport store from '@/store';\n\n// 导入视图组件\nimport Home from '@/views/Home.vue';\nimport EquipmentList from '@/views/equipment/EquipmentList.vue';\nimport EquipmentDetail from '@/views/equipment/EquipmentDetail.vue';\nimport ReservationForm from '@/views/reservation/ReservationForm.vue';\nimport RecurringReservationForm from '@/views/reservation/RecurringReservationForm.vue';\nimport ReservationQuery from '@/views/reservation/ReservationQuery.vue';\nimport ReservationDetail from '@/views/reservation/ReservationDetail.vue';\nimport RecurringReservationDetail from '@/views/reservation/RecurringReservationDetail.vue';\nimport AdminLogin from '@/views/admin/AdminLogin.vue';\nimport AdminDashboard from '@/views/admin/AdminDashboard.vue';\nimport AdminEquipment from '@/views/admin/AdminEquipment.vue';\nimport AdminCategory from '@/views/admin/AdminCategory.vue';\nimport AdminReservation from '@/views/admin/AdminReservation.vue';\nimport AdminReservationDetail from '@/views/admin/AdminReservationDetail.vue';\nimport AdminSettings from '@/views/admin/AdminSettings.vue';\nimport NotFound from '@/views/NotFound.vue';\nimport AnnouncementManage from '@/views/admin/AnnouncementManage.vue';\nVue.use(VueRouter);\n\n// 路由配置\nconst routes = [{\n  path: '/',\n  name: 'home',\n  component: Home,\n  meta: {\n    title: '首页'\n  }\n}, {\n  path: '/calendar',\n  name: 'calendar',\n  component: () => import('@/views/calendar/CalendarView.vue'),\n  meta: {\n    title: 'calendar.title'\n  }\n}, {\n  path: '/equipment',\n  name: 'equipment-list',\n  component: EquipmentList,\n  meta: {\n    title: '设备列表'\n  }\n}, {\n  path: '/equipment/:id',\n  name: 'equipment-detail',\n  component: EquipmentDetail,\n  meta: {\n    title: '设备详情'\n  }\n}, {\n  path: '/equipment/:id/reserve',\n  name: 'reservation-form',\n  component: ReservationForm,\n  meta: {\n    title: '预定设备'\n  }\n}, {\n  path: '/equipment/:id/recurring-reserve',\n  name: 'recurring-reservation-form',\n  component: RecurringReservationForm,\n  meta: {\n    title: '循环预约设备'\n  }\n}, {\n  path: '/reservation/query',\n  name: 'reservation-query',\n  component: ReservationQuery,\n  meta: {\n    title: '查询预定'\n  }\n}, {\n  path: '/reservation/number/:number',\n  name: 'reservation-detail-by-number',\n  component: ReservationDetail,\n  meta: {\n    title: '预定详情'\n  }\n}, {\n  path: '/reservation/:code',\n  name: 'reservation-detail',\n  component: ReservationDetail,\n  meta: {\n    title: '预定详情'\n  }\n}, {\n  path: '/recurring-reservation/:id',\n  name: 'recurring-reservation-detail',\n  component: RecurringReservationDetail,\n  meta: {\n    title: '循环预约详情'\n  },\n  // 添加props选项，确保组件能够接收到路由参数\n  props: true\n}, {\n  path: '/admin/login',\n  name: 'admin-login',\n  component: AdminLogin,\n  meta: {\n    title: '管理员登录'\n  }\n}, {\n  path: '/admin',\n  component: () => import('@/views/admin/AdminLayout.vue'),\n  meta: {\n    title: '管理控制台',\n    requiresAuth: true\n  },\n  children: [{\n    path: '',\n    redirect: '/admin/dashboard'\n  }, {\n    path: 'dashboard',\n    name: 'admin-dashboard',\n    component: AdminDashboard,\n    meta: {\n      title: '控制台',\n      requiresAuth: true\n    }\n  }, {\n    path: 'equipment',\n    name: 'admin-equipment',\n    component: AdminEquipment,\n    meta: {\n      title: '设备管理',\n      requiresAuth: true\n    }\n  }, {\n    path: 'category',\n    name: 'admin-category',\n    component: AdminCategory,\n    meta: {\n      title: '设备类别管理',\n      requiresAuth: true\n    }\n  }, {\n    path: 'reservation',\n    name: 'admin-reservation',\n    component: AdminReservation,\n    meta: {\n      title: '预定管理',\n      requiresAuth: true\n    }\n  }, {\n    path: 'reservation/:code',\n    name: 'admin-reservation-detail',\n    component: AdminReservationDetail,\n    meta: {\n      title: '预定详情',\n      requiresAuth: true\n    }\n  }, {\n    path: 'settings',\n    name: 'admin-settings',\n    component: AdminSettings,\n    meta: {\n      title: '系统设置',\n      requiresAuth: true\n    }\n  }, {\n    path: 'db-viewer',\n    name: 'admin-db-viewer',\n    component: () => import('@/views/admin/DatabaseViewer.vue'),\n    meta: {\n      title: '数据库表查看',\n      requiresAuth: true\n    }\n  }, {\n    path: 'announcement',\n    name: 'admin-announcement',\n    component: AnnouncementManage,\n    meta: {\n      title: '公告管理',\n      requiresAuth: true\n    }\n  }]\n}, {\n  path: '*',\n  name: 'not-found',\n  component: NotFound,\n  meta: {\n    title: '页面未找到'\n  }\n}];\nconst router = new VueRouter({\n  mode: 'hash',\n  base: process.env.BASE_URL,\n  routes\n});\n\n// 添加路由解析规则，确保循环预约详情页面能够正确显示\nrouter.beforeEach((to, from, next) => {\n  // 如果是循环预约详情页面，但路由名称不是recurring-reservation-detail\n  if (to.path.startsWith('/recurring-reservation/') && to.name !== 'recurring-reservation-detail') {\n    // 获取循环预约ID\n    const id = to.path.split('/').pop();\n    // 重定向到循环预约详情页面\n    next({\n      name: 'recurring-reservation-detail',\n      params: {\n        id\n      }\n    });\n  } else {\n    next();\n  }\n});\n\n// 注意: 路由守卫已移至 permission.js\n\nexport default router;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}