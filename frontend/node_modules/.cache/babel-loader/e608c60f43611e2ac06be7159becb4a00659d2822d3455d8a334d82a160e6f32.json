{"ast":null,"code":"import Vue from 'vue';\nimport App from './App.vue';\nimport router from './router';\nimport store from './store';\nimport ElementUI from 'element-ui';\nimport 'element-ui/lib/theme-chalk/index.css';\nimport VueI18n from 'vue-i18n';\nimport axios from 'axios';\nimport enLocale from 'element-ui/lib/locale/lang/en';\nimport zhLocale from 'element-ui/lib/locale/lang/zh-CN';\n\n// 导入权限控制\nimport './router/permission';\n\n// 导入富文本编辑器\n// 暂时注释掉富文本编辑器相关代码\n// import VueQuillEditor from 'vue-quill-editor'\n// import 'quill/dist/quill.core.css'\n// import 'quill/dist/quill.snow.css'\n// import 'quill/dist/quill.bubble.css'\n\n// 导入语言包\nimport zhCN from './locales/zh-CN';\nimport en from './locales/en';\n\n// 使用插件\nVue.use(VueI18n);\n// Vue.use(VueQuillEditor) // 暂时注释掉\n\n// 配置axios\naxios.defaults.baseURL = process.env.VUE_APP_API_URL || 'http://localhost:8000';\n// 增加超时时间到 30 秒\naxios.defaults.timeout = 30000;\n// 添加调试日志\nconsole.log('API Base URL:', axios.defaults.baseURL);\naxios.interceptors.request.use(config => {\n  // 从localStorage获取token\n  const token = localStorage.getItem('token');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n}, error => {\n  return Promise.reject(error);\n});\naxios.interceptors.response.use(response => {\n  return response;\n}, error => {\n  if (error.response) {\n    // 处理401错误（会话过期）\n    if (error.response.status === 401) {\n      // 显示友好的提示信息\n      Vue.prototype.$message({\n        message: '您的会话已过期，请重新登录',\n        type: 'warning',\n        duration: 3000\n      });\n      store.dispatch('logout');\n      // 避免重复导航到登录页\n      if (router.currentRoute.path !== '/admin/login') {\n        router.push('/admin/login');\n      }\n    }\n  }\n  return Promise.reject(error);\n});\nVue.prototype.$http = axios;\n\n// 配置i18n\nconst i18n = new VueI18n({\n  locale: store.state.language || 'zh-CN',\n  messages: {\n    'zh-CN': {\n      ...zhCN,\n      el: zhLocale.el\n    },\n    'en': {\n      ...en,\n      el: enLocale.el\n    }\n  },\n  silentTranslationWarn: true\n});\n\n// 同步语言设置\nstore.watch(state => state.language, newLang => {\n  i18n.locale = newLang;\n  document.querySelector('html').setAttribute('lang', newLang);\n  console.log('Language changed to:', newLang);\n});\n\n// 使用Element UI\nVue.use(ElementUI, {\n  i18n: (key, value) => i18n.t(key, value)\n});\n\n// 全局过滤器\nVue.filter('dateFormat', function (value, format = 'YYYY-MM-DD HH:mm') {\n  if (!value) return '';\n  const date = new Date(value);\n  const year = date.getFullYear();\n  const month = String(date.getMonth() + 1).padStart(2, '0');\n  const day = String(date.getDate()).padStart(2, '0');\n  const hours = String(date.getHours()).padStart(2, '0');\n  const minutes = String(date.getMinutes()).padStart(2, '0');\n  return format.replace('YYYY', year).replace('MM', month).replace('DD', day).replace('HH', hours).replace('mm', minutes);\n});\nVue.config.productionTip = false;\nnew Vue({\n  router,\n  store,\n  i18n,\n  render: h => h(App)\n}).$mount('#app');","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}