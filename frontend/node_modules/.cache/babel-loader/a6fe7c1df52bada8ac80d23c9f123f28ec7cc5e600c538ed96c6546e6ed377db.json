{"ast":null,"code":"import { recurringReservationApi, reservationApi } from '@/api';\nimport { isReservationExpired } from '@/utils/date';\nexport default {\n  name: 'RecurringReservationDetail',\n  data() {\n    return {\n      recurringReservationId: null,\n      recurringReservation: null,\n      childReservations: [],\n      loading: true,\n      childReservationsLoading: false,\n      error: false,\n      errorMessage: '',\n      includePastReservations: false,\n      cancelDialogVisible: false,\n      cancelFutureOnly: 1,\n      userEmail: '',\n      cancelLoading: false,\n      fromChildReservation: false\n    };\n  },\n  props: {\n    id: {\n      type: [String, Number],\n      required: false\n    }\n  },\n  created() {\n    // 优先使用props中的id，如果没有则使用路由参数\n    this.recurringReservationId = this.id || this.$route.params.id;\n    console.log('Recurring reservation ID:', this.recurringReservationId);\n\n    // 检查是否是从子预约详情页面返回的\n    this.fromChildReservation = this.$route.query.fromChild === 'true';\n    this.loadRecurringReservation();\n  },\n  // 添加activated钩子函数，在组件被激活时调用（如从子预约详情页面返回）\n  activated() {\n    // 检查子预约状态是否发生变化\n    this.checkChildReservationUpdates();\n  },\n  methods: {\n    // 加载循环预约详情\n    async loadRecurringReservation() {\n      this.loading = true;\n      this.error = false;\n      try {\n        const response = await recurringReservationApi.getRecurringReservation(this.recurringReservationId);\n        if (response.data.success) {\n          this.recurringReservation = response.data.data;\n          this.userEmail = this.recurringReservation.user_email || '';\n          this.loadChildReservations();\n        } else {\n          this.error = true;\n          this.errorMessage = response.data.message || this.$t('reservation.failedToLoadReservation');\n        }\n      } catch (error) {\n        console.error('Failed to load recurring reservation:', error);\n        this.error = true;\n        this.errorMessage = error.response?.data?.detail || this.$t('reservation.failedToLoadReservation');\n      } finally {\n        this.loading = false;\n      }\n    },\n    // 加载子预约列表\n    async loadChildReservations() {\n      this.childReservationsLoading = true;\n      try {\n        const response = await recurringReservationApi.getChildReservations(this.recurringReservationId, this.includePastReservations ? 1 : 0);\n        if (response.data.success) {\n          this.childReservations = response.data.reservations || [];\n        } else {\n          this.$message.error(response.data.message || this.$t('reservation.failedToLoadChildReservations'));\n        }\n      } catch (error) {\n        console.error('Failed to load child reservations:', error);\n        this.$message.error(this.$t('reservation.failedToLoadChildReservations'));\n      } finally {\n        this.childReservationsLoading = false;\n      }\n    },\n    // 返回上一页\n    goBack() {\n      // 如果是从子预约详情页面返回的，则返回到个人预约管理页面\n      if (this.fromChildReservation) {\n        this.$router.push('/reservation/query');\n      } else {\n        // 否则使用浏览器的返回功能\n        this.$router.go(-1);\n      }\n    },\n    // 查看子预约详情\n    viewChildReservation(reservation) {\n      // 使用子预约的ID而不是预约码，避免与循环预约的预约码冲突\n      if (reservation.id) {\n        // 直接调用API获取子预约详情，避免重定向到循环预约\n        this.$router.push({\n          path: `/reservation/${reservation.reservation_code}`,\n          query: {\n            child: 'true',\n            id: reservation.id,\n            recurringId: this.recurringReservation.id,\n            startTime: reservation.start_datetime,\n            endTime: reservation.end_datetime\n          }\n        });\n      } else {\n        this.$message.warning('无法查看子预约详情，缺少预约ID');\n      }\n    },\n    // 取消子预约\n    async cancelChildReservation(reservation) {\n      try {\n        const result = await this.$confirm(this.$t('reservation.cancelConfirmation'), this.$t('common.warning'), {\n          confirmButtonText: this.$t('common.confirm'),\n          cancelButtonText: this.$t('common.cancel'),\n          type: 'warning'\n        });\n        if (result === 'confirm') {\n          // 添加预约序号参数，确保只取消特定的子预约\n          const response = await reservationApi.cancelReservation(reservation.reservation_code, {\n            user_email: this.recurringReservation.user_email,\n            reservation_number: reservation.reservation_number // 添加预约序号参数\n          });\n          console.log('取消子预约响应:', response.data);\n          if (response.data.success) {\n            this.$message.success(this.$t('reservation.cancelSuccess'));\n\n            // 直接更新子预约状态为已取消\n            reservation.status = 'cancelled';\n\n            // 保存状态变更到localStorage\n            this.saveChildReservationStatus(reservation, 'cancelled');\n\n            // 强制刷新整个页面，确保获取最新数据\n            console.log('子预约已取消，即将刷新页面...');\n            setTimeout(() => {\n              window.location.reload(true);\n            }, 1000);\n          } else {\n            this.$message.error(response.data.message || this.$t('reservation.cancelFailed'));\n          }\n        }\n      } catch (error) {\n        if (error !== 'cancel') {\n          console.error('Failed to cancel reservation:', error);\n          this.$message.error(this.$t('reservation.cancelFailed'));\n        }\n      }\n    },\n    // 保存子预约状态到localStorage\n    saveChildReservationStatus(reservation, status) {\n      if (!reservation) return;\n\n      // 使用预约码作为键\n      const stateKey = `reservation_status_${reservation.reservation_code}`;\n\n      // 保存状态信息\n      const state = {\n        statusText: this.getChildStatusText({\n          ...reservation,\n          status: status\n        }),\n        statusType: this.getChildStatusType({\n          ...reservation,\n          status: status\n        }),\n        dbStatus: status,\n        forcedStatus: status,\n        timestamp: new Date().getTime(),\n        permanent: true,\n        reservationCode: reservation.reservation_code\n      };\n      console.log('保存子预约状态到localStorage:', state);\n      localStorage.setItem(stateKey, JSON.stringify(state));\n    },\n    // 检查子预约状态是否发生变化\n    checkChildReservationUpdates() {\n      console.log('检查子预约状态是否发生变化');\n\n      // 检查是否有子预约状态变更标记\n      const recurringStateKey = `recurring_reservation_${this.recurringReservationId}_child_status_changed`;\n      const recurringStateStr = localStorage.getItem(recurringStateKey);\n      if (recurringStateStr) {\n        try {\n          const recurringState = JSON.parse(recurringStateStr);\n\n          // 检查状态变更是否还是新鲜的（5分钟内）\n          const now = new Date().getTime();\n          const fiveMinutes = 5 * 60 * 1000;\n          if (now - recurringState.timestamp <= fiveMinutes) {\n            console.log('检测到子预约状态变更，刷新列表:', recurringState);\n\n            // 移除状态变更标记\n            localStorage.removeItem(recurringStateKey);\n\n            // 重新加载子预约列表\n            this.loadChildReservations();\n            return;\n          } else {\n            // 如果状态变更过期，移除它\n            localStorage.removeItem(recurringStateKey);\n          }\n        } catch (e) {\n          console.error('解析子预约状态变更标记时出错:', e);\n        }\n      }\n\n      // 如果没有子预约状态变更标记，检查每个子预约的状态\n      if (this.childReservations.length > 0) {\n        let needRefresh = false;\n\n        // 检查每个子预约的状态\n        for (let i = 0; i < this.childReservations.length; i++) {\n          const reservation = this.childReservations[i];\n          const stateKey = `reservation_status_${reservation.reservation_code}`;\n          const savedStateStr = localStorage.getItem(stateKey);\n          if (savedStateStr) {\n            try {\n              const savedState = JSON.parse(savedStateStr);\n\n              // 检查保存的状态是否还是新鲜的（5分钟内）\n              const now = new Date().getTime();\n              const fiveMinutes = 5 * 60 * 1000;\n              if (now - savedState.timestamp <= fiveMinutes) {\n                console.log(`检测到子预约 ${reservation.reservation_code} 的状态可能已更改，保存的状态:`, savedState);\n\n                // 如果状态已变更为已取消，需要刷新子预约列表\n                if (savedState.forcedStatus === 'cancelled' || savedState.statusText === this.$t('reservation.cancelled') && savedState.statusType === 'danger') {\n                  console.log(`子预约 ${reservation.reservation_code} 已被标记为已取消，需要刷新列表`);\n                  needRefresh = true;\n                  break;\n                }\n              } else {\n                // 如果状态过期，则移除它\n                localStorage.removeItem(stateKey);\n              }\n            } catch (e) {\n              console.error(`解析子预约 ${reservation.reservation_code} 的保存状态时出错:`, e);\n            }\n          }\n        }\n\n        // 如果需要刷新，重新加载子预约列表\n        if (needRefresh) {\n          console.log('检测到子预约状态变更，刷新列表');\n          this.loadChildReservations();\n        }\n      }\n    },\n    // 显示取消循环预约对话框\n    showCancelDialog() {\n      this.cancelDialogVisible = true;\n    },\n    // 确认取消循环预约\n    async confirmCancel() {\n      this.cancelLoading = true;\n      try {\n        const response = await recurringReservationApi.cancelRecurringReservation(this.recurringReservationId, this.cancelFutureOnly, this.userEmail || null);\n        if (response.data.success) {\n          this.$message.success(this.$t('reservation.cancelSuccess'));\n          this.cancelDialogVisible = false;\n          this.loadRecurringReservation();\n        } else {\n          this.$message.error(response.data.message || this.$t('reservation.cancelFailed'));\n        }\n      } catch (error) {\n        console.error('Failed to cancel recurring reservation:', error);\n        this.$message.error(this.$t('reservation.cancelFailed'));\n      } finally {\n        this.cancelLoading = false;\n      }\n    },\n    // 格式化日期\n    formatDate(dateStr) {\n      if (!dateStr) return '';\n      const date = new Date(dateStr);\n      return `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}-${String(date.getDate()).padStart(2, '0')}`;\n    },\n    // 格式化时间\n    formatTime(timeStr) {\n      if (!timeStr) return '';\n      return timeStr.substring(0, 5);\n    },\n    // 格式化日期时间\n    formatDateTime(row, column, cellValue) {\n      if (!cellValue) return '';\n      const date = new Date(cellValue);\n      return `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}-${String(date.getDate()).padStart(2, '0')} ${String(date.getHours()).padStart(2, '0')}:${String(date.getMinutes()).padStart(2, '0')}`;\n    },\n    // 格式化星期几\n    formatDaysOfWeek(days) {\n      if (!days || days.length === 0) return '';\n      const dayNames = [this.$t('reservation.sunday'), this.$t('reservation.monday'), this.$t('reservation.tuesday'), this.$t('reservation.wednesday'), this.$t('reservation.thursday'), this.$t('reservation.friday'), this.$t('reservation.saturday')];\n      return days.map(day => dayNames[day]).join(', ');\n    },\n    // 格式化每月几号\n    formatDaysOfMonth(days) {\n      if (!days || days.length === 0) return '';\n      return days.join(', ');\n    },\n    // 获取循环模式文本\n    getPatternText(pattern) {\n      const patterns = {\n        'daily': this.$t('reservation.daily'),\n        'weekly': this.$t('reservation.weekly'),\n        'monthly': this.$t('reservation.monthly'),\n        'custom': this.$t('reservation.custom')\n      };\n      return patterns[pattern] || pattern;\n    },\n    // 获取循环预约状态类型\n    getStatusType(reservation) {\n      if (reservation.status === 'cancelled') {\n        return 'danger';\n      }\n      return 'success';\n    },\n    // 获取循环预约状态文本\n    getStatusText(reservation) {\n      if (reservation.status === 'cancelled') {\n        return this.$t('reservation.cancelled');\n      }\n      return this.$t('reservation.active');\n    },\n    // 获取子预约状态类型\n    getChildStatusType(reservation) {\n      // 如果预约已取消，返回红色\n      if (reservation.status === 'cancelled') {\n        return 'danger';\n      }\n\n      // 如果预约已过期，返回橙色\n      if (isReservationExpired(reservation.end_datetime)) {\n        return 'warning';\n      }\n\n      // 如果预约正在进行中，返回蓝色\n      const now = new Date();\n      const start = new Date(reservation.start_datetime);\n      const end = new Date(reservation.end_datetime);\n      if (now >= start && now <= end) {\n        return 'primary';\n      }\n\n      // 如果预约已确认且未开始，返回绿色\n      return 'success';\n    },\n    // 获取子预约状态文本\n    getChildStatusText(reservation) {\n      // 如果预约已取消，显示\"已取消\"\n      if (reservation.status === 'cancelled') {\n        return this.$t('reservation.cancelled');\n      }\n\n      // 如果预约已过期，显示\"已过期\"\n      if (isReservationExpired(reservation.end_datetime)) {\n        return this.$t('reservation.expired');\n      }\n\n      // 如果预约正在进行中，显示\"进行中\"\n      const now = new Date();\n      const start = new Date(reservation.start_datetime);\n      const end = new Date(reservation.end_datetime);\n      if (now >= start && now <= end) {\n        return this.$t('reservation.ongoing');\n      }\n\n      // 如果预约已确认且未开始，显示\"已确认\"\n      return this.$t('reservation.confirmed');\n    }\n  }\n};","map":{"version":3,"names":["recurringReservationApi","reservationApi","isReservationExpired","name","data","recurringReservationId","recurringReservation","childReservations","loading","childReservationsLoading","error","errorMessage","includePastReservations","cancelDialogVisible","cancelFutureOnly","userEmail","cancelLoading","fromChildReservation","props","id","type","String","Number","required","created","$route","params","console","log","query","fromChild","loadRecurringReservation","activated","checkChildReservationUpdates","methods","response","getRecurringReservation","success","user_email","loadChildReservations","message","$t","detail","getChildReservations","reservations","$message","goBack","$router","push","go","viewChildReservation","reservation","path","reservation_code","child","recurringId","startTime","start_datetime","endTime","end_datetime","warning","cancelChildReservation","result","$confirm","confirmButtonText","cancelButtonText","cancelReservation","reservation_number","status","saveChildReservationStatus","setTimeout","window","location","reload","stateKey","state","statusText","getChildStatusText","statusType","getChildStatusType","dbStatus","forcedStatus","timestamp","Date","getTime","permanent","reservationCode","localStorage","setItem","JSON","stringify","recurringStateKey","recurringStateStr","getItem","recurringState","parse","now","fiveMinutes","removeItem","e","length","needRefresh","i","savedStateStr","savedState","showCancelDialog","confirmCancel","cancelRecurringReservation","formatDate","dateStr","date","getFullYear","getMonth","padStart","getDate","formatTime","timeStr","substring","formatDateTime","row","column","cellValue","getHours","getMinutes","formatDaysOfWeek","days","dayNames","map","day","join","formatDaysOfMonth","getPatternText","pattern","patterns","getStatusType","getStatusText","start","end"],"sources":["src/views/reservation/RecurringReservationDetail.vue"],"sourcesContent":["<template>\n  <div class=\"recurring-reservation-detail\">\n    <div v-if=\"loading\" class=\"loading-container\">\n      <el-skeleton :rows=\"10\" animated />\n    </div>\n\n    <div v-else-if=\"error\" class=\"error-container\">\n      <el-result\n        icon=\"error\"\n        :title=\"$t('common.error')\"\n        :sub-title=\"errorMessage\"\n      >\n        <template #extra>\n          <el-button type=\"primary\" @click=\"$router.push('/')\">{{ $t('common.backToHome') }}</el-button>\n        </template>\n      </el-result>\n    </div>\n\n    <div v-else class=\"content-container\">\n      <div class=\"header-actions\">\n        <el-button icon=\"el-icon-back\" @click=\"goBack\">{{ $t('common.back') }}</el-button>\n        <el-button type=\"danger\" @click=\"showCancelDialog\" :disabled=\"recurringReservation.status === 'cancelled'\">\n          取消循环预约\n        </el-button>\n      </div>\n\n      <!-- 循环预约信息卡片 -->\n      <el-card class=\"reservation-card\" shadow=\"hover\">\n        <div slot=\"header\" class=\"card-header\">\n          <span>{{ $t('reservation.recurringReservationDetails') }}</span>\n          <el-tag :type=\"getStatusType(recurringReservation)\" size=\"medium\">\n            已确认\n          </el-tag>\n        </div>\n\n        <div class=\"reservation-info\">\n          <div class=\"info-section\">\n            <h3>预约信息</h3>\n            <div class=\"info-row\">\n              <span class=\"info-label\">{{ $t('reservation.code') }}:</span>\n              <span class=\"info-value\">{{ recurringReservation.reservation_code }}</span>\n            </div>\n            <div class=\"info-row\">\n              <span class=\"info-label\">{{ $t('reservation.pattern') }}:</span>\n              <span class=\"info-value\">{{ getPatternText(recurringReservation.pattern_type) }}</span>\n            </div>\n            <div class=\"info-row\">\n              <span class=\"info-label\">{{ $t('reservation.dateRange') }}:</span>\n              <span class=\"info-value\">{{ formatDate(recurringReservation.start_date) }} - {{ formatDate(recurringReservation.end_date) }}</span>\n            </div>\n            <div class=\"info-row\">\n              <span class=\"info-label\">{{ $t('reservation.timeRange') }}:</span>\n              <span class=\"info-value\">{{ formatTime(recurringReservation.start_time) }} - {{ formatTime(recurringReservation.end_time) }}</span>\n            </div>\n            <div class=\"info-row\" v-if=\"recurringReservation.days_of_week && recurringReservation.days_of_week.length > 0\">\n              <span class=\"info-label\">{{ $t('reservation.daysOfWeek') }}:</span>\n              <span class=\"info-value\">{{ formatDaysOfWeek(recurringReservation.days_of_week) }}</span>\n            </div>\n            <div class=\"info-row\" v-if=\"recurringReservation.days_of_month && recurringReservation.days_of_month.length > 0\">\n              <span class=\"info-label\">{{ $t('reservation.daysOfMonth') }}:</span>\n              <span class=\"info-value\">{{ formatDaysOfMonth(recurringReservation.days_of_month) }}</span>\n            </div>\n            <div class=\"info-row\">\n              <span class=\"info-label\">{{ $t('reservation.purpose') }}:</span>\n              <span class=\"info-value\">{{ recurringReservation.purpose || $t('common.notProvided') }}</span>\n            </div>\n          </div>\n\n          <div class=\"info-section\">\n            <h3>设备信息</h3>\n            <div class=\"info-row\">\n              <span class=\"info-label\">{{ $t('equipment.name') }}:</span>\n              <span class=\"info-value\">{{ recurringReservation.equipment_name }}</span>\n            </div>\n            <div class=\"info-row\">\n              <span class=\"info-label\">{{ $t('equipment.category') }}:</span>\n              <span class=\"info-value\">{{ recurringReservation.equipment_category }}</span>\n            </div>\n            <div class=\"info-row\">\n              <span class=\"info-label\">{{ $t('equipment.location') }}:</span>\n              <span class=\"info-value\">{{ recurringReservation.equipment_location || $t('common.notProvided') }}</span>\n            </div>\n          </div>\n\n          <div class=\"info-section\">\n            <h3>用户信息</h3>\n            <div class=\"info-row\">\n              <span class=\"info-label\">{{ $t('reservation.userName') }}:</span>\n              <span class=\"info-value\">{{ recurringReservation.user_name }}</span>\n            </div>\n            <div class=\"info-row\">\n              <span class=\"info-label\">{{ $t('reservation.userDepartment') }}:</span>\n              <span class=\"info-value\">{{ recurringReservation.user_department }}</span>\n            </div>\n            <div class=\"info-row\">\n              <span class=\"info-label\">{{ $t('reservation.userContact') }}:</span>\n              <span class=\"info-value\">{{ recurringReservation.user_contact }}</span>\n            </div>\n            <div class=\"info-row\" v-if=\"recurringReservation.user_email\">\n              <span class=\"info-label\">{{ $t('reservation.userEmail') }}:</span>\n              <span class=\"info-value\">{{ recurringReservation.user_email }}</span>\n            </div>\n          </div>\n        </div>\n      </el-card>\n\n      <!-- 子预约列表 -->\n      <el-card class=\"child-reservations-card\" shadow=\"hover\">\n        <div slot=\"header\" class=\"card-header\">\n          <span>{{ $t('reservation.childReservations') }}</span>\n          <el-switch\n            v-model=\"includePastReservations\"\n            :active-text=\"$t('reservation.includePast')\"\n            @change=\"loadChildReservations\"\n          ></el-switch>\n        </div>\n\n        <div v-if=\"childReservationsLoading\" class=\"loading-container\">\n          <el-skeleton :rows=\"5\" animated />\n        </div>\n\n        <div v-else-if=\"childReservations.length === 0\" class=\"empty-state\">\n          <el-empty :description=\"$t('reservation.noChildReservations')\"></el-empty>\n        </div>\n\n        <div v-else class=\"child-reservations-list\">\n          <el-table\n            :data=\"childReservations\"\n            style=\"width: 100%\"\n            border\n            stripe\n          >\n            <el-table-column\n              prop=\"reservation_code\"\n              :label=\"$t('reservation.code')\"\n              width=\"120\"\n            ></el-table-column>\n            <el-table-column\n              prop=\"start_datetime\"\n              :label=\"$t('reservation.startTime')\"\n              width=\"180\"\n              :formatter=\"formatDateTime\"\n            ></el-table-column>\n            <el-table-column\n              prop=\"end_datetime\"\n              :label=\"$t('reservation.endTime')\"\n              width=\"180\"\n              :formatter=\"formatDateTime\"\n            ></el-table-column>\n            <el-table-column\n              prop=\"status\"\n              :label=\"$t('reservation.status')\"\n              width=\"120\"\n            >\n              <template slot-scope=\"scope\">\n                <el-tag :type=\"getChildStatusType(scope.row)\" size=\"medium\">\n                  {{ getChildStatusText(scope.row) }}\n                </el-tag>\n              </template>\n            </el-table-column>\n            <el-table-column\n              :label=\"$t('common.actions')\"\n              width=\"150\"\n            >\n              <template slot-scope=\"scope\">\n                <el-button\n                  size=\"mini\"\n                  type=\"primary\"\n                  @click=\"viewChildReservation(scope.row)\"\n                  icon=\"el-icon-view\"\n                  circle\n                ></el-button>\n                <el-button\n                  size=\"mini\"\n                  type=\"danger\"\n                  @click=\"cancelChildReservation(scope.row)\"\n                  :disabled=\"scope.row.status === 'cancelled'\"\n                  icon=\"el-icon-delete\"\n                  circle\n                ></el-button>\n              </template>\n            </el-table-column>\n          </el-table>\n        </div>\n      </el-card>\n    </div>\n\n    <!-- 取消循环预约对话框 -->\n    <el-dialog\n      :title=\"$t('reservation.cancelRecurringReservation')\"\n      :visible.sync=\"cancelDialogVisible\"\n      width=\"500px\"\n    >\n      <div class=\"cancel-options\">\n        <p>{{ $t('reservation.cancelRecurringReservationConfirm') }}</p>\n        <el-radio-group v-model=\"cancelFutureOnly\">\n          <el-radio :label=\"1\">{{ $t('reservation.cancelFutureOnly') }}</el-radio>\n          <el-radio :label=\"0\">{{ $t('reservation.cancelAll') }}</el-radio>\n        </el-radio-group>\n        <div class=\"email-input\">\n          <el-form-item :label=\"$t('reservation.userEmail')\" prop=\"userEmail\">\n            <el-input v-model=\"userEmail\" :placeholder=\"$t('reservation.emailForConfirmation')\"></el-input>\n          </el-form-item>\n        </div>\n      </div>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"cancelDialogVisible = false\">{{ $t('common.cancel') }}</el-button>\n        <el-button type=\"danger\" @click=\"confirmCancel\" :loading=\"cancelLoading\">{{ $t('common.confirm') }}</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { recurringReservationApi, reservationApi } from '@/api'\nimport { isReservationExpired } from '@/utils/date'\n\nexport default {\n  name: 'RecurringReservationDetail',\n\n  data() {\n    return {\n      recurringReservationId: null,\n      recurringReservation: null,\n      childReservations: [],\n      loading: true,\n      childReservationsLoading: false,\n      error: false,\n      errorMessage: '',\n      includePastReservations: false,\n      cancelDialogVisible: false,\n      cancelFutureOnly: 1,\n      userEmail: '',\n      cancelLoading: false,\n      fromChildReservation: false\n    }\n  },\n\n  props: {\n    id: {\n      type: [String, Number],\n      required: false\n    }\n  },\n\n  created() {\n    // 优先使用props中的id，如果没有则使用路由参数\n    this.recurringReservationId = this.id || this.$route.params.id\n    console.log('Recurring reservation ID:', this.recurringReservationId)\n\n    // 检查是否是从子预约详情页面返回的\n    this.fromChildReservation = this.$route.query.fromChild === 'true'\n\n    this.loadRecurringReservation()\n  },\n\n  // 添加activated钩子函数，在组件被激活时调用（如从子预约详情页面返回）\n  activated() {\n    // 检查子预约状态是否发生变化\n    this.checkChildReservationUpdates()\n  },\n\n  methods: {\n    // 加载循环预约详情\n    async loadRecurringReservation() {\n      this.loading = true\n      this.error = false\n\n      try {\n        const response = await recurringReservationApi.getRecurringReservation(this.recurringReservationId)\n\n        if (response.data.success) {\n          this.recurringReservation = response.data.data\n          this.userEmail = this.recurringReservation.user_email || ''\n          this.loadChildReservations()\n        } else {\n          this.error = true\n          this.errorMessage = response.data.message || this.$t('reservation.failedToLoadReservation')\n        }\n      } catch (error) {\n        console.error('Failed to load recurring reservation:', error)\n        this.error = true\n        this.errorMessage = error.response?.data?.detail || this.$t('reservation.failedToLoadReservation')\n      } finally {\n        this.loading = false\n      }\n    },\n\n    // 加载子预约列表\n    async loadChildReservations() {\n      this.childReservationsLoading = true\n\n      try {\n        const response = await recurringReservationApi.getChildReservations(\n          this.recurringReservationId,\n          this.includePastReservations ? 1 : 0\n        )\n\n        if (response.data.success) {\n          this.childReservations = response.data.reservations || []\n        } else {\n          this.$message.error(response.data.message || this.$t('reservation.failedToLoadChildReservations'))\n        }\n      } catch (error) {\n        console.error('Failed to load child reservations:', error)\n        this.$message.error(this.$t('reservation.failedToLoadChildReservations'))\n      } finally {\n        this.childReservationsLoading = false\n      }\n    },\n\n    // 返回上一页\n    goBack() {\n      // 如果是从子预约详情页面返回的，则返回到个人预约管理页面\n      if (this.fromChildReservation) {\n        this.$router.push('/reservation/query')\n      } else {\n        // 否则使用浏览器的返回功能\n        this.$router.go(-1)\n      }\n    },\n\n    // 查看子预约详情\n    viewChildReservation(reservation) {\n      // 使用子预约的ID而不是预约码，避免与循环预约的预约码冲突\n      if (reservation.id) {\n        // 直接调用API获取子预约详情，避免重定向到循环预约\n        this.$router.push({\n          path: `/reservation/${reservation.reservation_code}`,\n          query: {\n            child: 'true',\n            id: reservation.id,\n            recurringId: this.recurringReservation.id,\n            startTime: reservation.start_datetime,\n            endTime: reservation.end_datetime\n          }\n        })\n      } else {\n        this.$message.warning('无法查看子预约详情，缺少预约ID')\n      }\n    },\n\n    // 取消子预约\n    async cancelChildReservation(reservation) {\n      try {\n        const result = await this.$confirm(\n          this.$t('reservation.cancelConfirmation'),\n          this.$t('common.warning'),\n          {\n            confirmButtonText: this.$t('common.confirm'),\n            cancelButtonText: this.$t('common.cancel'),\n            type: 'warning'\n          }\n        )\n\n        if (result === 'confirm') {\n          // 添加预约序号参数，确保只取消特定的子预约\n          const response = await reservationApi.cancelReservation(reservation.reservation_code, {\n            user_email: this.recurringReservation.user_email,\n            reservation_number: reservation.reservation_number // 添加预约序号参数\n          })\n\n          console.log('取消子预约响应:', response.data)\n\n          if (response.data.success) {\n            this.$message.success(this.$t('reservation.cancelSuccess'))\n\n            // 直接更新子预约状态为已取消\n            reservation.status = 'cancelled'\n\n            // 保存状态变更到localStorage\n            this.saveChildReservationStatus(reservation, 'cancelled')\n\n            // 强制刷新整个页面，确保获取最新数据\n            console.log('子预约已取消，即将刷新页面...')\n            setTimeout(() => {\n              window.location.reload(true)\n            }, 1000)\n          } else {\n            this.$message.error(response.data.message || this.$t('reservation.cancelFailed'))\n          }\n        }\n      } catch (error) {\n        if (error !== 'cancel') {\n          console.error('Failed to cancel reservation:', error)\n          this.$message.error(this.$t('reservation.cancelFailed'))\n        }\n      }\n    },\n\n    // 保存子预约状态到localStorage\n    saveChildReservationStatus(reservation, status) {\n      if (!reservation) return\n\n      // 使用预约码作为键\n      const stateKey = `reservation_status_${reservation.reservation_code}`\n\n      // 保存状态信息\n      const state = {\n        statusText: this.getChildStatusText({ ...reservation, status: status }),\n        statusType: this.getChildStatusType({ ...reservation, status: status }),\n        dbStatus: status,\n        forcedStatus: status,\n        timestamp: new Date().getTime(),\n        permanent: true,\n        reservationCode: reservation.reservation_code\n      }\n\n      console.log('保存子预约状态到localStorage:', state)\n      localStorage.setItem(stateKey, JSON.stringify(state))\n    },\n\n    // 检查子预约状态是否发生变化\n    checkChildReservationUpdates() {\n      console.log('检查子预约状态是否发生变化')\n\n      // 检查是否有子预约状态变更标记\n      const recurringStateKey = `recurring_reservation_${this.recurringReservationId}_child_status_changed`\n      const recurringStateStr = localStorage.getItem(recurringStateKey)\n\n      if (recurringStateStr) {\n        try {\n          const recurringState = JSON.parse(recurringStateStr)\n\n          // 检查状态变更是否还是新鲜的（5分钟内）\n          const now = new Date().getTime()\n          const fiveMinutes = 5 * 60 * 1000\n\n          if (now - recurringState.timestamp <= fiveMinutes) {\n            console.log('检测到子预约状态变更，刷新列表:', recurringState)\n\n            // 移除状态变更标记\n            localStorage.removeItem(recurringStateKey)\n\n            // 重新加载子预约列表\n            this.loadChildReservations()\n            return\n          } else {\n            // 如果状态变更过期，移除它\n            localStorage.removeItem(recurringStateKey)\n          }\n        } catch (e) {\n          console.error('解析子预约状态变更标记时出错:', e)\n        }\n      }\n\n      // 如果没有子预约状态变更标记，检查每个子预约的状态\n      if (this.childReservations.length > 0) {\n        let needRefresh = false\n\n        // 检查每个子预约的状态\n        for (let i = 0; i < this.childReservations.length; i++) {\n          const reservation = this.childReservations[i]\n          const stateKey = `reservation_status_${reservation.reservation_code}`\n          const savedStateStr = localStorage.getItem(stateKey)\n\n          if (savedStateStr) {\n            try {\n              const savedState = JSON.parse(savedStateStr)\n\n              // 检查保存的状态是否还是新鲜的（5分钟内）\n              const now = new Date().getTime()\n              const fiveMinutes = 5 * 60 * 1000\n\n              if (now - savedState.timestamp <= fiveMinutes) {\n                console.log(`检测到子预约 ${reservation.reservation_code} 的状态可能已更改，保存的状态:`, savedState)\n\n                // 如果状态已变更为已取消，需要刷新子预约列表\n                if (savedState.forcedStatus === 'cancelled' ||\n                    (savedState.statusText === this.$t('reservation.cancelled') &&\n                     savedState.statusType === 'danger')) {\n                  console.log(`子预约 ${reservation.reservation_code} 已被标记为已取消，需要刷新列表`)\n                  needRefresh = true\n                  break\n                }\n              } else {\n                // 如果状态过期，则移除它\n                localStorage.removeItem(stateKey)\n              }\n            } catch (e) {\n              console.error(`解析子预约 ${reservation.reservation_code} 的保存状态时出错:`, e)\n            }\n          }\n        }\n\n        // 如果需要刷新，重新加载子预约列表\n        if (needRefresh) {\n          console.log('检测到子预约状态变更，刷新列表')\n          this.loadChildReservations()\n        }\n      }\n    },\n\n    // 显示取消循环预约对话框\n    showCancelDialog() {\n      this.cancelDialogVisible = true\n    },\n\n    // 确认取消循环预约\n    async confirmCancel() {\n      this.cancelLoading = true\n\n      try {\n        const response = await recurringReservationApi.cancelRecurringReservation(\n          this.recurringReservationId,\n          this.cancelFutureOnly,\n          this.userEmail || null\n        )\n\n        if (response.data.success) {\n          this.$message.success(this.$t('reservation.cancelSuccess'))\n          this.cancelDialogVisible = false\n          this.loadRecurringReservation()\n        } else {\n          this.$message.error(response.data.message || this.$t('reservation.cancelFailed'))\n        }\n      } catch (error) {\n        console.error('Failed to cancel recurring reservation:', error)\n        this.$message.error(this.$t('reservation.cancelFailed'))\n      } finally {\n        this.cancelLoading = false\n      }\n    },\n\n    // 格式化日期\n    formatDate(dateStr) {\n      if (!dateStr) return ''\n      const date = new Date(dateStr)\n      return `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}-${String(date.getDate()).padStart(2, '0')}`\n    },\n\n    // 格式化时间\n    formatTime(timeStr) {\n      if (!timeStr) return ''\n      return timeStr.substring(0, 5)\n    },\n\n    // 格式化日期时间\n    formatDateTime(row, column, cellValue) {\n      if (!cellValue) return ''\n      const date = new Date(cellValue)\n      return `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}-${String(date.getDate()).padStart(2, '0')} ${String(date.getHours()).padStart(2, '0')}:${String(date.getMinutes()).padStart(2, '0')}`\n    },\n\n    // 格式化星期几\n    formatDaysOfWeek(days) {\n      if (!days || days.length === 0) return ''\n\n      const dayNames = [\n        this.$t('reservation.sunday'),\n        this.$t('reservation.monday'),\n        this.$t('reservation.tuesday'),\n        this.$t('reservation.wednesday'),\n        this.$t('reservation.thursday'),\n        this.$t('reservation.friday'),\n        this.$t('reservation.saturday')\n      ]\n\n      return days.map(day => dayNames[day]).join(', ')\n    },\n\n    // 格式化每月几号\n    formatDaysOfMonth(days) {\n      if (!days || days.length === 0) return ''\n      return days.join(', ')\n    },\n\n    // 获取循环模式文本\n    getPatternText(pattern) {\n      const patterns = {\n        'daily': this.$t('reservation.daily'),\n        'weekly': this.$t('reservation.weekly'),\n        'monthly': this.$t('reservation.monthly'),\n        'custom': this.$t('reservation.custom')\n      }\n      return patterns[pattern] || pattern\n    },\n\n    // 获取循环预约状态类型\n    getStatusType(reservation) {\n      if (reservation.status === 'cancelled') {\n        return 'danger'\n      }\n      return 'success'\n    },\n\n    // 获取循环预约状态文本\n    getStatusText(reservation) {\n      if (reservation.status === 'cancelled') {\n        return this.$t('reservation.cancelled')\n      }\n      return this.$t('reservation.active')\n    },\n\n    // 获取子预约状态类型\n    getChildStatusType(reservation) {\n      // 如果预约已取消，返回红色\n      if (reservation.status === 'cancelled') {\n        return 'danger'\n      }\n\n      // 如果预约已过期，返回橙色\n      if (isReservationExpired(reservation.end_datetime)) {\n        return 'warning'\n      }\n\n      // 如果预约正在进行中，返回蓝色\n      const now = new Date()\n      const start = new Date(reservation.start_datetime)\n      const end = new Date(reservation.end_datetime)\n      if (now >= start && now <= end) {\n        return 'primary'\n      }\n\n      // 如果预约已确认且未开始，返回绿色\n      return 'success'\n    },\n\n    // 获取子预约状态文本\n    getChildStatusText(reservation) {\n      // 如果预约已取消，显示\"已取消\"\n      if (reservation.status === 'cancelled') {\n        return this.$t('reservation.cancelled')\n      }\n\n      // 如果预约已过期，显示\"已过期\"\n      if (isReservationExpired(reservation.end_datetime)) {\n        return this.$t('reservation.expired')\n      }\n\n      // 如果预约正在进行中，显示\"进行中\"\n      const now = new Date()\n      const start = new Date(reservation.start_datetime)\n      const end = new Date(reservation.end_datetime)\n      if (now >= start && now <= end) {\n        return this.$t('reservation.ongoing')\n      }\n\n      // 如果预约已确认且未开始，显示\"已确认\"\n      return this.$t('reservation.confirmed')\n    }\n  }\n}\n</script>\n\n<style scoped>\n.recurring-reservation-detail {\n  max-width: 1000px;\n  margin: 0 auto;\n  padding: 20px;\n}\n\n.loading-container,\n.error-container {\n  margin: 40px 0;\n}\n\n.header-actions {\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 20px;\n}\n\n.reservation-card,\n.child-reservations-card {\n  margin-bottom: 30px;\n}\n\n.card-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.reservation-info {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\n  gap: 20px;\n}\n\n.info-section {\n  margin-bottom: 20px;\n}\n\n.info-section h3 {\n  margin-top: 0;\n  margin-bottom: 15px;\n  font-size: 16px;\n  color: #303133;\n  border-bottom: 1px solid #EBEEF5;\n  padding-bottom: 10px;\n}\n\n.info-row {\n  margin-bottom: 10px;\n  line-height: 1.5;\n}\n\n.info-label {\n  font-weight: bold;\n  color: #606266;\n  margin-right: 5px;\n}\n\n.info-value {\n  color: #303133;\n}\n\n.empty-state {\n  padding: 30px 0;\n}\n\n.cancel-options {\n  padding: 0 20px;\n}\n\n.cancel-options p {\n  margin-bottom: 20px;\n  color: #606266;\n}\n\n.email-input {\n  margin-top: 20px;\n}\n\n.child-reservations-list {\n  margin-top: 20px;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}