{"ast":null,"code":"import router from './index';\nimport store from '@/store';\nimport { Message } from 'element-ui';\nimport NProgress from 'nprogress';\nimport 'nprogress/nprogress.css';\n\n// 配置NProgress\nNProgress.configure({\n  showSpinner: false\n});\n\n// 白名单路由（不需要登录即可访问）\nconst whiteList = ['/', '/equipment', '/equipment/:id', '/reservation/query', '/reservation/:code', '/admin/login', '/404'];\n\n// 路由前置守卫\nrouter.beforeEach((to, from, next) => {\n  // 开始进度条\n  NProgress.start();\n\n  // 设置页面标题\n  document.title = to.meta.title ? `${to.meta.title} - HTNIA设备预定系统` : 'HTNIA设备预定系统';\n\n  // 获取用户登录状态\n  const hasToken = store.getters.isLoggedIn;\n\n  // 判断是否需要登录权限\n  const requiresAuth = to.matched.some(record => record.meta.requiresAuth);\n\n  // 如果是登录页面且已登录，直接跳转到首页\n  if (to.path === '/admin/login' && hasToken) {\n    next('/admin/dashboard');\n    NProgress.done();\n    return;\n  }\n\n  // 如果需要登录权限但未登录，跳转到登录页\n  if (requiresAuth && !hasToken) {\n    next(`/admin/login?redirect=${to.path}`);\n    NProgress.done();\n    return;\n  }\n\n  // 其他情况直接放行\n  next();\n});\n\n// 路由后置守卫\nrouter.afterEach(() => {\n  // 结束进度条\n  NProgress.done();\n});\nexport default router;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}