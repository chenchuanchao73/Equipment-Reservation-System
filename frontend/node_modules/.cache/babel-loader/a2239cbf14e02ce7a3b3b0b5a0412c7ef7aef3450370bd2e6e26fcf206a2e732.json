{"ast":null,"code":"import { mapGetters, mapActions } from 'vuex';\nexport default {\n  name: 'AdminLayout',\n  data() {\n    return {\n      mobileMenuOpen: false\n    };\n  },\n  computed: {\n    ...mapGetters(['currentUser', 'getLanguage']),\n    activeMenu() {\n      return this.$route.path;\n    },\n    currentLanguage() {\n      return this.getLanguage;\n    },\n    displayUsername() {\n      // 优先显示用户名，如果没有则显示'管理员'\n      return this.currentUser && this.currentUser.username ? this.currentUser.username : '管理员';\n    }\n  },\n  methods: {\n    ...mapActions(['logout', 'setLanguage']),\n    handleCommand(command) {\n      if (command === 'logout') {\n        this.handleLogout();\n      } else if (command === 'home') {\n        this.$router.push('/');\n      }\n    },\n    handleLogout() {\n      this.logout();\n      this.$message.success('退出登录成功');\n      this.$router.push('/admin/login');\n    },\n    handleLanguageChange(lang) {\n      this.setLanguage(lang);\n      this.$i18n.locale = lang;\n    },\n    toggleMobileMenu() {\n      // 这里可以实现折叠菜单的逻辑，或 emit 事件给父组件\n      const menu = document.querySelector('.header-menu');\n      if (menu) {\n        menu.style.display = menu.style.display === 'none' ? '' : 'none';\n      }\n    }\n  }\n};","map":{"version":3,"names":["mapGetters","mapActions","name","data","mobileMenuOpen","computed","activeMenu","$route","path","currentLanguage","getLanguage","displayUsername","currentUser","username","methods","handleCommand","command","handleLogout","$router","push","logout","$message","success","handleLanguageChange","lang","setLanguage","$i18n","locale","toggleMobileMenu","menu","document","querySelector","style","display"],"sources":["src/views/admin/AdminLayout.vue"],"sourcesContent":["<template>\n  <div class=\"admin-layout\">\n    <!-- 移动端菜单按钮，放在最外层，避免被父容器裁剪，仅在移动端显示 -->\n    <div class=\"admin-mobile-nav-toggle\" @click=\"toggleMobileMenu\"></div>\n    <el-container class=\"admin-container\">\n      <el-header class=\"admin-header\">\n        <div class=\"header-left\">\n          <img src=\"@/assets/logo.png\" alt=\"Logo\" class=\"header-logo\" />\n          <span class=\"header-title\">管理控制台</span>\n        </div>\n\n        <div class=\"header-menu\">\n          <el-menu\n            :default-active=\"activeMenu\"\n            class=\"top-menu\"\n            mode=\"horizontal\"\n            background-color=\"#FFFFFF\"\n            text-color=\"#333333\"\n            active-text-color=\"#409EFF\"\n            router\n          >\n            <el-menu-item index=\"/admin/dashboard\">\n              <i class=\"el-icon-s-home\"></i>\n              <span>控制台</span>\n            </el-menu-item>\n\n            <el-submenu index=\"equipment\">\n              <template slot=\"title\">\n                <i class=\"el-icon-s-grid\"></i>\n                <span>设备管理</span>\n              </template>\n              <el-menu-item index=\"/admin/equipment\">\n                <i class=\"el-icon-s-management\"></i>\n                <span>设备列表</span>\n              </el-menu-item>\n              <el-menu-item index=\"/admin/category\">\n                <i class=\"el-icon-collection-tag\"></i>\n                <span>设备类别</span>\n              </el-menu-item>\n            </el-submenu>\n\n            <el-menu-item index=\"/admin/reservation\">\n              <i class=\"el-icon-s-order\"></i>\n              <span>预定管理</span>\n            </el-menu-item>\n\n            <el-menu-item index=\"/admin/announcement\">\n              <i class=\"el-icon-message\"></i>\n              <span>公告管理</span>\n            </el-menu-item>\n\n            <el-menu-item index=\"/admin/settings\">\n              <i class=\"el-icon-setting\"></i>\n              <span>系统设置</span>\n            </el-menu-item>\n          </el-menu>\n        </div>\n\n        <div class=\"header-right\">\n          <div class=\"user-info\">\n            <i class=\"el-icon-user\"></i>\n            <span>{{ displayUsername }}</span>\n          </div>\n          <el-button type=\"primary\" plain icon=\"el-icon-s-home\" size=\"small\" @click=\"handleCommand('home')\">返回首页</el-button>\n          <el-button type=\"danger\" plain icon=\"el-icon-switch-button\" size=\"small\" @click=\"handleCommand('logout')\">退出登录</el-button>\n        </div>\n      </el-header>\n\n      <el-main class=\"admin-main\">\n        <keep-alive>\n          <router-view></router-view>\n        </keep-alive>\n      </el-main>\n    </el-container>\n  </div>\n</template>\n\n<script>\nimport { mapGetters, mapActions } from 'vuex'\n\nexport default {\n  name: 'AdminLayout',\n\n  data() {\n    return {\n      mobileMenuOpen: false\n    }\n  },\n\n  computed: {\n    ...mapGetters(['currentUser', 'getLanguage']),\n\n    activeMenu() {\n      return this.$route.path\n    },\n\n    currentLanguage() {\n      return this.getLanguage\n    },\n\n    displayUsername() {\n      // 优先显示用户名，如果没有则显示'管理员'\n      return this.currentUser && this.currentUser.username ? this.currentUser.username : '管理员'\n    }\n  },\n\n  methods: {\n    ...mapActions(['logout', 'setLanguage']),\n\n    handleCommand(command) {\n      if (command === 'logout') {\n        this.handleLogout()\n      } else if (command === 'home') {\n        this.$router.push('/')\n      }\n    },\n\n    handleLogout() {\n      this.logout()\n      this.$message.success('退出登录成功')\n      this.$router.push('/admin/login')\n    },\n\n    handleLanguageChange(lang) {\n      this.setLanguage(lang)\n      this.$i18n.locale = lang\n    },\n\n    toggleMobileMenu() {\n      // 这里可以实现折叠菜单的逻辑，或 emit 事件给父组件\n      const menu = document.querySelector('.header-menu')\n      if (menu) {\n        menu.style.display = (menu.style.display === 'none') ? '' : 'none'\n      }\n    }\n  }\n}\n</script>\n\n<style>\n.admin-layout {\n  height: 100vh;\n  width: 100vw;\n  overflow: hidden;\n  display: flex;\n  margin: 0;\n  padding: 0;\n  position: absolute;\n  top: 0;\n  left: 0;\n  box-sizing: border-box;\n}\n\n.admin-container {\n  width: 100%;\n  height: 100%;\n  margin: 0;\n  padding: 0;\n  display: flex;\n  flex-direction: column;\n}\n\n.admin-header,\n.el-header {\n  background-color: #FFFFFF !important;\n  color: #333333 !important;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0;\n  height: 60px;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n  border-bottom: 1px solid #EBEEF5;\n}\n\n.header-left {\n  display: flex;\n  align-items: center;\n  padding: 0 20px;\n}\n\n.header-logo {\n  height: 32px;\n  margin-right: 10px;\n}\n\n.header-title {\n  font-size: 18px;\n  font-weight: bold;\n  color: #409EFF;\n  white-space: nowrap;\n}\n\n.header-menu {\n  flex: 1;\n  display: flex;\n  justify-content: center;\n}\n\n.top-menu {\n  background-color: #FFFFFF !important;\n  border-bottom: none;\n}\n\n.top-menu .el-menu-item {\n  height: 60px;\n  line-height: 60px;\n}\n\n.top-menu .el-submenu__title {\n  height: 60px;\n  line-height: 60px;\n}\n\n.header-right {\n  display: flex;\n  align-items: center;\n  gap: 15px;\n  padding: 0 20px;\n}\n\n.user-info {\n  display: flex;\n  align-items: center;\n  color: #606266;\n  margin-right: 15px;\n  background-color: #F5F7FA;\n  padding: 5px 12px;\n  border-radius: 4px;\n  font-size: 14px;\n  border: 1px solid #DCDFE6;\n}\n\n.user-info i {\n  margin-right: 5px;\n}\n\n.header-right .el-button {\n  margin-left: 0;\n  white-space: nowrap;\n}\n\n.admin-main {\n  background-color: #f0f2f5;\n  padding: 20px;\n  overflow-y: auto;\n  height: calc(100vh - 60px);\n  width: 100%;\n  max-width: 100%;\n}\n\n@media (max-width: 768px) {\n  .header-title {\n    display: none;\n  }\n\n  .header-menu {\n    justify-content: flex-start;\n  }\n\n  .top-menu .el-menu-item span,\n  .top-menu .el-submenu__title span {\n    display: none;\n  }\n\n  .user-info span {\n    display: none;\n  }\n\n  .admin-mobile-nav-toggle {\n    position: fixed;\n    top: 50%;\n    right: 0;\n    left: auto;\n    transform: translateY(-50%);\n    width: 40px;\n    height: 40px;\n    border-radius: 50%;\n    background-color: #409EFF;\n    color: #fff;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    cursor: pointer;\n    z-index: 3000;\n    box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\n  }\n  .admin-mobile-nav-toggle:before {\n    content: '';\n    display: block;\n    width: 24px;\n    height: 24px;\n    background-image: url('data:image/svg+xml;utf8,<svg fill=\"white\" viewBox=\"0 0 1024 1024\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M160 512a32 32 0 0 1 32-32h640a32 32 0 0 1 0 64H192a32 32 0 0 1-32-32zm0-192a32 32 0 0 1 32-32h640a32 32 0 0 1 0 64H192a32 32 0 0 1-32-32zm32 288a32 32 0 0 0 0 64h640a32 32 0 0 0 0-64H192z\"/></svg>');\n    background-size: contain;\n    background-repeat: no-repeat;\n    margin: auto;\n  }\n}\n</style>\n"],"mappings":"AA8EA,SAAAA,UAAA,EAAAC,UAAA;AAEA;EACAC,IAAA;EAEAC,KAAA;IACA;MACAC,cAAA;IACA;EACA;EAEAC,QAAA;IACA,GAAAL,UAAA;IAEAM,WAAA;MACA,YAAAC,MAAA,CAAAC,IAAA;IACA;IAEAC,gBAAA;MACA,YAAAC,WAAA;IACA;IAEAC,gBAAA;MACA;MACA,YAAAC,WAAA,SAAAA,WAAA,CAAAC,QAAA,QAAAD,WAAA,CAAAC,QAAA;IACA;EACA;EAEAC,OAAA;IACA,GAAAb,UAAA;IAEAc,cAAAC,OAAA;MACA,IAAAA,OAAA;QACA,KAAAC,YAAA;MACA,WAAAD,OAAA;QACA,KAAAE,OAAA,CAAAC,IAAA;MACA;IACA;IAEAF,aAAA;MACA,KAAAG,MAAA;MACA,KAAAC,QAAA,CAAAC,OAAA;MACA,KAAAJ,OAAA,CAAAC,IAAA;IACA;IAEAI,qBAAAC,IAAA;MACA,KAAAC,WAAA,CAAAD,IAAA;MACA,KAAAE,KAAA,CAAAC,MAAA,GAAAH,IAAA;IACA;IAEAI,iBAAA;MACA;MACA,MAAAC,IAAA,GAAAC,QAAA,CAAAC,aAAA;MACA,IAAAF,IAAA;QACAA,IAAA,CAAAG,KAAA,CAAAC,OAAA,GAAAJ,IAAA,CAAAG,KAAA,CAAAC,OAAA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}